(()=>{"use strict";var e,r,t,n,o,s,a={661:(e,r,t)=>{t.a(e,(async e=>{var r=t(54);const n="content_bestbuy",o={"process-atc":async function(e,r,t){const n={accept:"application/json","accept-language":"en-US,en;q=0.9","content-type":"application/json; charset=UTF-8","sec-ch-ua":'" Not;A Brand";v="99", "Google Chrome";v="91", "Chromium";v="91"',"sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"};void 0!==r&&(n.a2ctransactionreferenceid=r),void 0!==t&&(n.a2ctransactioncode=t);const o=await fetch("https://www.bestbuy.com/cart/api/v1/addToCart",{headers:n,referrer:"https://www.bestbuy.com/cart",referrerPolicy:"strict-origin-when-cross-origin",body:`{"items":[{"skuId":"${e}"}]}`,method:"POST",mode:"cors",credentials:"include"});return 200===o.status?"success":400===o.status?"failure":"error"}};await async function(){(0,r.Z0)(n,o,["background","extension"]),(0,r.Vf)(n,"Finished processing content script startup routine")}(),await async function(){const e=atob(localStorage.getItem("purchaseTracker")||"e30="),t=JSON.parse(e);(0,r.eJ)("content_best-buy","updateQueueData",[t])}(),e()}),1)},54:(e,r,t)=>{function n(e,r,t="info"){const n=`[${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).substring(0,8)}]\t\t(${e})\t\t${r}`;"info"===t?console.log(n):"debug"===t?console.debug(n):"warn"===t?console.warn(n):"error"===t&&console.error(n)}async function o(e,r,t=[]){const n={sender:e,handler:r,args:t};return await browser.runtime.sendMessage(n)}function s(e,r,t){browser.runtime.onMessage.addListener((async(o,s)=>{const a=o;let c={status:"success",payload:void 0};if(t.includes(a.sender)){const t=r[a.handler];if(void 0!==t){n(e,`Processing handler ${a.handler} from ${a.sender} with arguments ${JSON.stringify(a.args)}`);try{const e=await t(...a.args||[]);c.status="success",c.payload=e}catch(r){const t=r.message;c.status="error",c.payload=t,n(e,`Error processing handler ${a.handler}: ${t}`,"error")}}else n(e,`Error, given handler ${a.handler} doesn't exist`,"error"),c.status="not-found"}return c}))}t.d(r,{Vf:()=>n,eJ:()=>o,Z0:()=>s}),t(261)}},c={};function i(e){var r=c[e];if(void 0!==r)return r.exports;var t=c[e]={exports:{}};return a[e](t,t.exports,i),t.exports}i.m=a,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},n=e=>!--e.r&&e(),o=(e,r)=>e?e.push(r):n(r),i.a=(s,a,c)=>{var i,u,l,d=c&&[],f=s.exports,h=!0,p=!1,g=(r,t,n)=>{p||(p=!0,t.r+=r.length,r.map(((r,o)=>r[e](t,n))),p=!1)},b=new Promise(((e,r)=>{l=r,u=()=>(e(f),t(d),d=0)}));b[r]=f,b[e]=(e,r)=>{if(h)return n(e);i&&g(i,e,r),o(d,e),b.catch(r)},s.exports=b,a((s=>{if(!s)return u();var a,c;i=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var a=[];s.then((e=>{c[r]=e,t(a),a=0}));var c={};return c[e]=(e,r)=>(o(a,e),s.catch(r)),c}}var i={};return i[e]=e=>n(e),i[r]=s,i})))(s);var l=new Promise(((e,t)=>{(a=()=>e(c=i.map((e=>e[r])))).r=0,g(i,a,t)}));return a.r?l:c})).then(u,l),h=!1},s=[],i.O=(e,r,t,n)=>{if(!r){var o=1/0;for(l=0;l<s.length;l++){for(var[r,t,n]=s[l],a=!0,c=0;c<r.length;c++)(!1&n||o>=n)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(a=!1,n<o&&(o=n));if(a){s.splice(l--,1);var u=t();void 0!==u&&(e=u)}}return e}n=n||0;for(var l=s.length;l>0&&s[l-1][2]>n;l--)s[l]=s[l-1];s[l]=[r,t,n]},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i.j=9,(()=>{var e={9:0};i.O.j=r=>0===e[r];var r=(r,t)=>{var n,o,[s,a,c]=t,u=0;if(s.some((r=>0!==e[r]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)var l=c(i)}for(r&&r(t);u<s.length;u++)o=s[u],i.o(e,o)&&e[o]&&e[o][0](),e[s[u]]=0;return i.O(l)},t=self.webpackChunkgraphics_queue_utilities=self.webpackChunkgraphics_queue_utilities||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var u=i.O(void 0,[154],(()=>i(661)));u=i.O(u)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUNyQixFQUFHLEdBYUpuRSxFQUFvQndDLEVBQUVNLEVBQUtzQixHQUEwQyxJQUE3QkQsRUFBZ0JDLEdBR3hELElBQUlDLEVBQXVCLENBQUNDLEVBQTRCQyxLQUN2RCxJQUdJdEUsRUFBVW1FLEdBSFQzQixFQUFVK0IsRUFBYTNHLEdBQVcwRyxFQUdoQjNDLEVBQUksRUFDM0IsR0FBR2EsRUFBU2dDLE1BQU1DLEdBQWdDLElBQXhCUCxFQUFnQk8sS0FBYSxDQUN0RCxJQUFJekUsS0FBWXVFLEVBQ1p4RSxFQUFvQnFELEVBQUVtQixFQUFhdkUsS0FDckNELEVBQW9CTSxFQUFFTCxHQUFZdUUsRUFBWXZFLElBR2hELEdBQUdwQyxFQUFTLElBQUlnQyxFQUFTaEMsRUFBUW1DLEdBR2xDLElBREdzRSxHQUE0QkEsRUFBMkJDLEdBQ3JEM0MsRUFBSWEsRUFBU2hCLE9BQVFHLElBQ3pCd0MsRUFBVTNCLEVBQVNiLEdBQ2hCNUIsRUFBb0JxRCxFQUFFYyxFQUFpQkMsSUFBWUQsRUFBZ0JDLElBQ3JFRCxFQUFnQkMsR0FBUyxLQUUxQkQsRUFBZ0IxQixFQUFTYixJQUFNLEVBRWhDLE9BQU81QixFQUFvQndDLEVBQUUzQyxJQUcxQjhFLEVBQXFCNUYsS0FBMkMscUNBQUlBLEtBQTJDLHNDQUFLLEdBQ3hINEYsRUFBbUJsRSxRQUFRNEQsRUFBcUJPLEtBQUssS0FBTSxJQUMzREQsRUFBbUIvRCxLQUFPeUQsRUFBcUJPLEtBQUssS0FBTUQsRUFBbUIvRCxLQUFLZ0UsS0FBS0QsSyxHQzdDdkYsSUFBSUUsRUFBc0I3RSxFQUFvQndDLE9BQUV2RixFQUFXLENBQUMsTUFBTSxJQUFPK0MsRUFBb0IsT0FDN0Y2RSxFQUFzQjdFLEVBQW9Cd0MsRUFBRXFDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvLi9zb3VyY2UvY29udGVudC9iZXN0YnV5LnRzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy8uL3NvdXJjZS9zaGFyZWQvdXRpbGl0aWVzLnRzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB3ZWJwYWNrVGhlbiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgdGhlblwiKSA6IFwiX193ZWJwYWNrX3RoZW5fX1wiO1xudmFyIHdlYnBhY2tFeHBvcnRzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sKFwid2VicGFjayBleHBvcnRzXCIpIDogXCJfX3dlYnBhY2tfZXhwb3J0c19fXCI7XG52YXIgY29tcGxldGVRdWV1ZSA9IChxdWV1ZSkgPT4ge1xuXHRpZihxdWV1ZSkge1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tKSk7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0gPyBmbi5yKysgOiBmbigpKSk7XG5cdH1cbn1cbnZhciBjb21wbGV0ZUZ1bmN0aW9uID0gKGZuKSA9PiAoIS0tZm4uciAmJiBmbigpKTtcbnZhciBxdWV1ZUZ1bmN0aW9uID0gKHF1ZXVlLCBmbikgPT4gKHF1ZXVlID8gcXVldWUucHVzaChmbikgOiBjb21wbGV0ZUZ1bmN0aW9uKGZuKSk7XG52YXIgd3JhcERlcHMgPSAoZGVwcykgPT4gKGRlcHMubWFwKChkZXApID0+IHtcblx0aWYoZGVwICE9PSBudWxsICYmIHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpIHtcblx0XHRpZihkZXBbd2VicGFja1RoZW5dKSByZXR1cm4gZGVwO1xuXHRcdGlmKGRlcC50aGVuKSB7XG5cdFx0XHR2YXIgcXVldWUgPSBbXTtcblx0XHRcdGRlcC50aGVuKChyKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXhwb3J0c10gPSByO1xuXHRcdFx0XHRjb21wbGV0ZVF1ZXVlKHF1ZXVlKTtcblx0XHRcdFx0cXVldWUgPSAwO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9ialt3ZWJwYWNrVGhlbl0gPSAoZm4sIHJlamVjdCkgPT4gKHF1ZXVlRnVuY3Rpb24ocXVldWUsIGZuKSwgZGVwLmNhdGNoKHJlamVjdCkpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cdH1cblx0dmFyIHJldCA9IHt9O1xuXHRcdFx0XHRcdFx0cmV0W3dlYnBhY2tUaGVuXSA9IChmbikgPT4gKGNvbXBsZXRlRnVuY3Rpb24oZm4pKTtcblx0XHRcdFx0XHRcdHJldFt3ZWJwYWNrRXhwb3J0c10gPSBkZXA7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmV0O1xufSkpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5hID0gKG1vZHVsZSwgYm9keSwgaGFzQXdhaXQpID0+IHtcblx0dmFyIHF1ZXVlID0gaGFzQXdhaXQgJiYgW107XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cdHZhciBjdXJyZW50RGVwcztcblx0dmFyIG91dGVyUmVzb2x2ZTtcblx0dmFyIHJlamVjdDtcblx0dmFyIGlzRXZhbHVhdGluZyA9IHRydWU7XG5cdHZhciBuZXN0ZWQgPSBmYWxzZTtcblx0dmFyIHdoZW5BbGwgPSAoZGVwcywgb25SZXNvbHZlLCBvblJlamVjdCkgPT4ge1xuXHRcdGlmIChuZXN0ZWQpIHJldHVybjtcblx0XHRuZXN0ZWQgPSB0cnVlO1xuXHRcdG9uUmVzb2x2ZS5yICs9IGRlcHMubGVuZ3RoO1xuXHRcdGRlcHMubWFwKChkZXAsIGkpID0+IChkZXBbd2VicGFja1RoZW5dKG9uUmVzb2x2ZSwgb25SZWplY3QpKSk7XG5cdFx0bmVzdGVkID0gZmFsc2U7XG5cdH07XG5cdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlaikgPT4ge1xuXHRcdHJlamVjdCA9IHJlajtcblx0XHRvdXRlclJlc29sdmUgPSAoKSA9PiAocmVzb2x2ZShleHBvcnRzKSwgY29tcGxldGVRdWV1ZShxdWV1ZSksIHF1ZXVlID0gMCk7XG5cdH0pO1xuXHRwcm9taXNlW3dlYnBhY2tFeHBvcnRzXSA9IGV4cG9ydHM7XG5cdHByb21pc2Vbd2VicGFja1RoZW5dID0gKGZuLCByZWplY3RGbikgPT4ge1xuXHRcdGlmIChpc0V2YWx1YXRpbmcpIHsgcmV0dXJuIGNvbXBsZXRlRnVuY3Rpb24oZm4pOyB9XG5cdFx0aWYgKGN1cnJlbnREZXBzKSB3aGVuQWxsKGN1cnJlbnREZXBzLCBmbiwgcmVqZWN0Rm4pO1xuXHRcdHF1ZXVlRnVuY3Rpb24ocXVldWUsIGZuKTtcblx0XHRwcm9taXNlLmNhdGNoKHJlamVjdEZuKTtcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlO1xuXHRib2R5KChkZXBzKSA9PiB7XG5cdFx0aWYoIWRlcHMpIHJldHVybiBvdXRlclJlc29sdmUoKTtcblx0XHRjdXJyZW50RGVwcyA9IHdyYXBEZXBzKGRlcHMpO1xuXHRcdHZhciBmbiwgcmVzdWx0O1xuXHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Zm4gPSAoKSA9PiAocmVzb2x2ZShyZXN1bHQgPSBjdXJyZW50RGVwcy5tYXAoKGQpID0+IChkW3dlYnBhY2tFeHBvcnRzXSkpKSk7XG5cdFx0XHRmbi5yID0gMDtcblx0XHRcdHdoZW5BbGwoY3VycmVudERlcHMsIGZuLCByZWplY3QpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBmbi5yID8gcHJvbWlzZSA6IHJlc3VsdDtcblx0fSkudGhlbihvdXRlclJlc29sdmUsIHJlamVjdCk7XG5cdGlzRXZhbHVhdGluZyA9IGZhbHNlO1xufTsiLCJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgeyBleHRlbnNpb25Mb2csIG1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMsIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsaXRpZXNcIjtcclxuY29uc3QgY29udGVudEtleSA9IFwiY29udGVudF9iZXN0YnV5XCI7IC8vIENvbnRlbnQgc2NyaXB0IGlkZW50aWZpZXJcclxuY29uc3QgbWVzc2FnZUhhbmRsZXJzID0ge1xyXG4gICAgXCJwcm9jZXNzLWF0Y1wiOiBwcm9jZXNzQWRkdG9DYXJ0LFxyXG59OyAvLyBNZXNzYWdlIGhhbmRsZXJzIGZvciBwcm9jZXNzaW5nIGZyb20gTWVzc2FnZXMgQVBJXHJcbi8vIFNlbmQgYWRkLXRvLWNhcnQgcmVxdWVzdCwgb3B0aW9uYWxseSB3aXRoIChhc3N1bWluZyBwb3BwZWQpIHF1ZXVlIGRhdGFcclxuLy8gT25seSByZXR1cm4gc3VjY2VzcyAvIGZhaWx1cmUgLyBlcnJvciByZXN1bHRzLCBpZ25vcmUgbmV3IHF1ZXVlIGFuZCByZXNwb25zZSBjb250ZW50XHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NBZGR0b0NhcnQoc2t1LCBhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkLCBhMmNUcmFuc2FjdGlvbkNvZGUpIHtcclxuICAgIC8vIEluaXRpYWxpemUgaGVhZGVycyBhbmQgYWRkaXRpb25hbGx5IGFkZCBxdWV1ZSBkYXRhIGlmIGRlZmluZWRcclxuICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgXCJhY2NlcHQtbGFuZ3VhZ2VcIjogXCJlbi1VUyxlbjtxPTAuOVwiLFxyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiLFxyXG4gICAgICAgIFwic2VjLWNoLXVhXCI6IFwiXFxcIiBOb3Q7QSBCcmFuZFxcXCI7dj1cXFwiOTlcXFwiLCBcXFwiR29vZ2xlIENocm9tZVxcXCI7dj1cXFwiOTFcXFwiLCBcXFwiQ2hyb21pdW1cXFwiO3Y9XFxcIjkxXFxcIlwiLFxyXG4gICAgICAgIFwic2VjLWNoLXVhLW1vYmlsZVwiOiBcIj8wXCIsXHJcbiAgICAgICAgXCJzZWMtZmV0Y2gtZGVzdFwiOiBcImVtcHR5XCIsXHJcbiAgICAgICAgXCJzZWMtZmV0Y2gtbW9kZVwiOiBcImNvcnNcIixcclxuICAgICAgICBcInNlYy1mZXRjaC1zaXRlXCI6IFwic2FtZS1vcmlnaW5cIlxyXG4gICAgfTtcclxuICAgIGlmIChhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBoZWFkZXJzW1wiYTJjdHJhbnNhY3Rpb25yZWZlcmVuY2VpZFwiXSA9IGEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYTJjVHJhbnNhY3Rpb25Db2RlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBoZWFkZXJzW1wiYTJjdHJhbnNhY3Rpb25jb2RlXCJdID0gYTJjVHJhbnNhY3Rpb25Db2RlO1xyXG4gICAgfVxyXG4gICAgLy8gUHJvY2VzcyBhZGQtdG8tY2FydCByZXF1ZXN0IGFuZCBjaGVjayByZXNwb25zZSBzdGF0dXMgZm9yIHJlc3VsdFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vd3d3LmJlc3RidXkuY29tL2NhcnQvYXBpL3YxL2FkZFRvQ2FydFwiLCB7XHJcbiAgICAgICAgXCJoZWFkZXJzXCI6IGhlYWRlcnMsXHJcbiAgICAgICAgXCJyZWZlcnJlclwiOiBcImh0dHBzOi8vd3d3LmJlc3RidXkuY29tL2NhcnRcIixcclxuICAgICAgICBcInJlZmVycmVyUG9saWN5XCI6IFwic3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpblwiLFxyXG4gICAgICAgIFwiYm9keVwiOiBge1wiaXRlbXNcIjpbe1wic2t1SWRcIjpcIiR7c2t1fVwifV19YCxcclxuICAgICAgICBcIm1ldGhvZFwiOiBcIlBPU1RcIixcclxuICAgICAgICBcIm1vZGVcIjogXCJjb3JzXCIsXHJcbiAgICAgICAgXCJjcmVkZW50aWFsc1wiOiBcImluY2x1ZGVcIixcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwXHJcbiAgICAgICAgPyBcInN1Y2Nlc3NcIiA6IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwXHJcbiAgICAgICAgPyBcImZhaWx1cmVcIiA6IFwiZXJyb3JcIjsgLy8gUmV0dXJuIGRlcGVuZGluZyBvbiBzdGF0dXMgY29kZVxyXG59XHJcbi8vIEdlbmVyYWwgc3RhcnR1cCByb3V0aW5lIGZvciBjb250ZW50IHNjcmlwdFxyXG5hc3luYyBmdW5jdGlvbiBzdGFydHVwKCkge1xyXG4gICAgLy8gLSBTZXR1cCBtZXNzYWdlIHJlY2VpdmluZyBoYW5kbGVycyBhbmQgc2VuZGluZyB3cmFwcGVyXHJcbiAgICBtZXNzYWdlUHJvY2Vzc0hhbmRsZXJzKGNvbnRlbnRLZXksIG1lc3NhZ2VIYW5kbGVycywgW1wiYmFja2dyb3VuZFwiLCBcImV4dGVuc2lvblwiXSk7XHJcbiAgICBleHRlbnNpb25Mb2coY29udGVudEtleSwgXCJGaW5pc2hlZCBwcm9jZXNzaW5nIGNvbnRlbnQgc2NyaXB0IHN0YXJ0dXAgcm91dGluZVwiKTtcclxufVxyXG4vLyBDb250ZW50IHNjcmlwdCBydW50aW1lIHByb2Nlc3Npbmcgb24tbG9hZFxyXG5hc3luYyBmdW5jdGlvbiBydW50aW1lKCkge1xyXG4gICAgLy8gU2VuZCB1cGRhdGVkIHJhdyBxdWV1ZSBpbmZvIHRvIGJhY2tncm91bmRcclxuICAgIC8vIENhbid0IGludGVyY2VwdCByZXF1ZXN0cywgaW5zdGVhZCBpbnRlcmNlcHQgZGF0YSBtYW51YWxseT9cclxuICAgIGNvbnN0IHNlcmlhbGl6ZWRRdWV1ZURhdGEgPSBhdG9iKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHVyY2hhc2VUcmFja2VyXCIpIHx8IFwiZTMwPVwiKTtcclxuICAgIGNvbnN0IHF1ZXVlRGF0YSA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZFF1ZXVlRGF0YSk7XHJcbiAgICBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZChcImNvbnRlbnRfYmVzdC1idXlcIiwgXCJ1cGRhdGVRdWV1ZURhdGFcIiwgW3F1ZXVlRGF0YV0pOyAvLyBUaHJvdyBhbmQgZm9yZ2V0XHJcbn1cclxuYXdhaXQgc3RhcnR1cCgpO1xyXG5hd2FpdCBydW50aW1lKCk7XHJcbiIsImltcG9ydCB7IGdldCwgd3JpdGFibGUgfSBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zdG9yZVwiO1xyXG4vLyBTb21ld2hhdCBmYW5jeSBsb2dnaW5nIGZyb20gZXh0ZW5zaW9uIGJhY2tncm91bmRcclxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuc2lvbkxvZyhzZW5kZXIsIG1lc3NhZ2UsIGxldmVsID0gXCJpbmZvXCIpIHtcclxuICAgIC8vIEdlbmVyYXRlIHRpbWVzdG1hcCBmb3IgbG9nZ2luZyBpbiAyNC1ob3VyIEhIOk1NOlNTIGZvcm1hdFxyXG4gICAgY29uc3QgdGltZXN0YW1wID0gKG5ldyBEYXRlKCkpLnRvTG9jYWxlVGltZVN0cmluZygnZW4tR0InLCB7XHJcbiAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXHJcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcclxuICAgICAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiLFxyXG4gICAgfSkuc3Vic3RyaW5nKDAsIDgpO1xyXG4gICAgLy8gTG9nIG9yIGVycm9yIHRvIGNvbnNvbGUgKGN1cnJlbnRseSB3aXRob3V0IGZvcm1hdHRpbmcpXHJcbiAgICBjb25zdCBvdXRwdXQgPSBgWyR7dGltZXN0YW1wfV1cXHRcXHQoJHtzZW5kZXJ9KVxcdFxcdCR7bWVzc2FnZX1gO1xyXG4gICAgaWYgKGxldmVsID09PSBcImluZm9cIikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG91dHB1dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsZXZlbCA9PT0gXCJkZWJ1Z1wiKSB7XHJcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwid2FyblwiKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKG91dHB1dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChsZXZlbCA9PT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihvdXRwdXQpO1xyXG4gICAgfVxyXG59XHJcbi8vIEluaXRpYWxpemUgd3JpdGFibGUgc3RvcmUgZnJvbSBTdG9yYWdlIEFQSSBhbmQgbWFpbnRhaW4gdmFsdWUgdXNpbmcgc3Vic2NyaXB0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVN0b3JlKHNlbGYsIGtleSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAvLyBJbml0aWFsaXplIHdyaXRhYmxlIHN0b3JlIGZyb20gc3RvcmFnZSB2YWx1ZVxyXG4gICAgY29uc3Qgc3RvcmFnZVZhbHVlID0gYXdhaXQgc3RvcmFnZUdldChrZXksIGRlZmF1bHRWYWx1ZSk7XHJcbiAgICBjb25zdCBzdG9yZSA9IHdyaXRhYmxlKHN0b3JhZ2VWYWx1ZSk7XHJcbiAgICAvLyBJbnN0YW50aWF0ZSBzZXR0ZXIgYW5kIGdldHRlciBmb3IgYnJvYWRjYXN0aW5nIHVwZGF0ZXNcclxuICAgIC8vIEFzc3VtZSB0aGF0IGJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgaW5kZXhhYmxlIGJ5IHN0cmluZ1xyXG4gICAgY29uc3Qgc2V0ID0gKHNldEtleSwgc2V0VmFsdWUpID0+IHtcclxuICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyB2YWx1ZVtzZXRLZXldID0gc2V0VmFsdWU7IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiBnZXQoc3RvcmUpIH0pO1xyXG4gICAgICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHNlbGYsIFwidXBkYXRlLXNldFwiLCBba2V5LCBzZXRLZXksIHNldFZhbHVlXSk7XHJcbiAgICB9OyAvLyBTZXR0ZXIgdG8gYnJvYWRjYXN0IGtleSBzZXQgdXBkYXRlXHJcbiAgICBjb25zdCBkZWwgPSAoZGVsS2V5KSA9PiB7XHJcbiAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgZGVsZXRlIHZhbHVlW2RlbEtleV07IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiBnZXQoc3RvcmUpIH0pO1xyXG4gICAgICAgIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHNlbGYsIFwidXBkYXRlLWRlbFwiLCBba2V5LCBkZWxLZXldKTtcclxuICAgIH07IC8vIERlbGV0ZXIgdG8gYnJvYWRjYXN0IGtleSBkZWxldGUgdXBkYXRlXHJcbiAgICAvLyBBdHRhY2ggYWRkaXRpb25hbCBtZXNzYWdlIGxpc3RlbmVyIHRvIGxpc3RlbiBmb3IgdXBkYXRlc1xyXG4gICAgYnJvd3Nlci5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyAobWVzc2FnZSwgc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBrZXkgbWF0Y2hlcyBhbmQgcGVyZm9ybSB1cGRhdGUgb3IgZGVsZXRpb25cclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbWVzc2FnZTtcclxuICAgICAgICBpZiAocmVxdWVzdC5oYW5kbGVyID09PSBcInVwZGF0ZS1zZXRcIikge1xyXG4gICAgICAgICAgICAvLyBEZWNvbnN0cnVjdCBhcmd1bWVudHMgYW5kIHNldC9yZXBsYWNlIGtleSBpbiBzdG9yZVxyXG4gICAgICAgICAgICBjb25zdCBbc2V0S2V5LCBzZXRWYWx1ZV0gPSByZXF1ZXN0LmFyZ3M7XHJcbiAgICAgICAgICAgIGlmIChzZXRLZXkgPT09IGtleSkgeyAvLyBFbnN1cmUga2V5IG1hdGNoZXMgYmVmb3JlIHNldHRpbmdcclxuICAgICAgICAgICAgICAgIC8vIERPIE5PVCB1c2Ugc2V0dGVyLCBvdGhlcndpc2UgdXBkYXRlIGJyb2FkY2FzdHMgaW4gbG9vcFxyXG4gICAgICAgICAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgdmFsdWVbc2V0S2V5XSA9IHNldFZhbHVlOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlcXVlc3QuaGFuZGxlciA9PT0gXCJ1cGRhdGUtZGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgLy8gRGVjb25zdHJ1Y3QgYXJndW1lbnRzIGFuZCBkZWxldGUga2V5IGZyb20gc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgW2RlbEtleV0gPSByZXF1ZXN0LmFyZ3M7XHJcbiAgICAgICAgICAgIGlmIChkZWxLZXkgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRE8gTk9UIHVzZSBkZWxldGVyLCBvdGhlcndpc2UgdXBkYXRlIGJyb2FkY2FzdHMgaW4gbG9vcFxyXG4gICAgICAgICAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgZGVsZXRlIHZhbHVlW2RlbEtleV07IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7IHN0b3JlLCBzZXQsIGRlbCB9O1xyXG59XHJcbi8vIEluaXRpYWxpemVzIHdyYXBwZXIgZm9yIHNlbmRpbmcgbWVzc2FnZXMgZnJvbSBjb250ZW50IHNjcmlwdCB3aXRoIGtleSBhbmQgcGFyYW1zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZChzZWxmLCBoYW5kbGVyLCBhcmdzID0gW10pIHtcclxuICAgIC8vIENvbnN0cnVjdCByZXF1ZXN0IGZyb20gcGFyYW1ldGVyc1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBzZW5kZXI6IHNlbGYsXHJcbiAgICAgICAgaGFuZGxlciwgYXJncyxcclxuICAgIH07XHJcbiAgICAvLyBTZW5kIG1lc3NhZ2UgYW5kIHdhaXQgZm9yIHJlc3BvbnNlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGJyb3dzZXIucnVudGltZS5zZW5kTWVzc2FnZShyZXF1ZXN0KTtcclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG47XHJcbi8vIEluaXRpYWxpemVzIHdyYXBwZXIgZm9yIHNlbmRpbmcgbWVzc2FnZXMgZnJvbSBiYWNrZ3JvdW5kIG9yIGV4dGVuc2lvbiB3aXRoIGtleSBhbmQgcGFyYW1zXHJcbi8vIE11c3QgdGFyZ2V0IGluZGl2aWR1YWwgdGFicyBieSBnbG9iLCB0aHVzIG9ubHkgc2VuZHMgdG8gdGhlIGZpcnN0IHRhYiBtYXRjaGVkXHJcbmNvbnN0IGRvbWFpbk1hdGNoZXMgPSB7XHJcbiAgICBcImJlc3RidXlcIjogXCJodHRwczovLyouYmVzdGJ1eS5jb20vKlwiLFxyXG59OyAvLyBEb21haW4gbWF0Y2hlcyBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIGJhY2tncm91bmQgb3IgZXh0ZW5zaW9uXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvQ29udGVudChzZWxmLCB0YXJnZXQsIGhhbmRsZXIsIGFyZ3MgPSBbXSkge1xyXG4gICAgLy8gQ29uc3RydWN0IHJlcXVlc3QgZnJvbSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHNlbmRlcjogc2VsZixcclxuICAgICAgICBoYW5kbGVyLCBhcmdzLFxyXG4gICAgfTtcclxuICAgIC8vIEFzc3VtZSB0aGF0IHRhYiBhbHdheXMgZm91bmQsIGhhdmUgZmFpbHNhZmU/XHJcbiAgICBsZXQgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXHJcbiAgICAgICAgcGF5bG9hZDogXCJ0YWIgbm90IGZvdW5kIChzaG91bGRuJ3QgaGFwcGVuKVwiLFxyXG4gICAgfTsgLy8gRGVmYXVsdCByZXNwb25zZSwgb3ZlcndyaXR0ZW4gaWYgdGFiIGZvdW5kXHJcbiAgICBjb25zdCB0YWJzID0gYXdhaXQgYnJvd3Nlci50YWJzLnF1ZXJ5KHsgdXJsOiBkb21haW5NYXRjaGVzW3RhcmdldF0gfSk7XHJcbiAgICBpZiAodGFicy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gT25seSBwcm9jZXNzIG9uIGZpcnN0IGNvbnRlbnQgc2NyaXB0LCBhc3N1bWUgdGFiIElEIGRlZmluZWRcclxuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGJyb3dzZXIudGFicy5zZW5kTWVzc2FnZSh0YWJzWzBdLmlkLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG47XHJcbi8vIEluaXRpYWxpemVzIG1lc3NhZ2UgcmVjZWl2aW5nIGZvciBnaXZlbiBjb250ZW50IHNjcmlwdCB3aXRoIGtleSBhbmQgaGFuZGxlcnNcclxuZXhwb3J0IGZ1bmN0aW9uIG1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMoY29udGVudEtleSwgaGFuZGxlcnMsIHZhbGlkU2VuZGVycykge1xyXG4gICAgLy8gU2V0dXAgbGlzdGVuZXIgZm9yIHNub29waW5nIG1lc3NhZ2VzIGFuZCBleGVjdXRpbmcgbWF0Y2hpbmcgaGFuZGxlcnNcclxuICAgIGJyb3dzZXIucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoYXN5bmMgKG1lc3NhZ2UsIHNlbmRlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBtZXNzYWdlO1xyXG4gICAgICAgIGxldCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgcGF5bG9hZDogdW5kZWZpbmVkXHJcbiAgICAgICAgfTsgLy8gUGxhY2Vob2xkZXIgcmVzcG9uc2UgYmVmb3JlIGNvbnN0cnVjdGlvblxyXG4gICAgICAgIC8vIE9ubHkgcHJvY2VzcyBpbmNvbWluZyBtZXNzYWdlcyBmcm9tIHZhbGlkIHNlbmRlcnNcclxuICAgICAgICBpZiAodmFsaWRTZW5kZXJzLmluY2x1ZGVzKHJlcXVlc3Quc2VuZGVyKSkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGhhbmRsZXIgZXhpc3RzLCBtZXNzYWdlcyBhcmUgdGFyZ2V0ZWRcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW3JlcXVlc3QuaGFuZGxlcl07XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhjb250ZW50S2V5LCBgUHJvY2Vzc2luZyBoYW5kbGVyICR7cmVxdWVzdC5oYW5kbGVyfSBmcm9tICR7cmVxdWVzdC5zZW5kZXJ9IHdpdGggYXJndW1lbnRzICR7SlNPTi5zdHJpbmdpZnkocmVxdWVzdC5hcmdzKX1gKTtcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZXIgZXhpc3RzLCBhdHRlbXB0IHRvIGV4ZWN1dGVcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlciguLi5yZXF1ZXN0LmFyZ3MgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IFwic3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnBheWxvYWQgPSByZXN1bHQ7IC8vIE5vbi1zZXJpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5wYXlsb2FkID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhjb250ZW50S2V5LCBgRXJyb3IgcHJvY2Vzc2luZyBoYW5kbGVyICR7cmVxdWVzdC5oYW5kbGVyfTogJHtlcnJvck1lc3NhZ2V9YCwgXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhjb250ZW50S2V5LCBgRXJyb3IsIGdpdmVuIGhhbmRsZXIgJHtyZXF1ZXN0LmhhbmRsZXJ9IGRvZXNuJ3QgZXhpc3RgLCBcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlciBkb2Vzbid0IGV4aXN0LCByZXR1cm4gbm90aWZ5XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPSBcIm5vdC1mb3VuZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH0pO1xyXG59XHJcbi8vIFJldHJpZXZlIHZhbHVlIHdpdGggZ2l2ZW4ga2V5IGZyb20gU3RvcmFnZSBBUElcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0b3JhZ2VHZXQoa2V5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIC8vIFJldHJpZXZlIGZyb20gc3RvcmFnZSBhbmQgXCJvdmVyd3JpdGVcIiB3aXRoIGRlZmF1bHQgaWYgbm90IGZvdW5kXHJcbiAgICBjb25zdCBzdG9yYWdlQ29udGVudCA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoa2V5KTtcclxuICAgIGlmIChzdG9yYWdlQ29udGVudFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzdG9yYWdlQ29udGVudFtrZXldID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0b3JhZ2VDb250ZW50W2tleV07XHJcbn1cclxuLy8gU3RvcmUgd2l0aCB0aGUgZ2l2ZW4ga2V5IHRoZSB2YWx1ZSB0aHJvdWdoIHRoZSBTdG9yYWdlIEFQSVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmFnZVNldChrZXksIHZhbHVlKSB7XHJcbiAgICAvLyBTdG9yZSB1c2luZyB0aGUgZ2l2ZW4ga2V5IGFuZCB2YWx1ZVxyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiB2YWx1ZSB9KTtcclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIl9fd2VicGFja19yZXF1aXJlX18uaiA9IDk7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtncmFwaGljc19xdWV1ZV91dGlsaXRpZXNcIl0gPSBzZWxmW1wid2VicGFja0NodW5rZ3JhcGhpY3NfcXVldWVfdXRpbGl0aWVzXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMTU0XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNjYxKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbIndlYnBhY2tUaGVuIiwid2VicGFja0V4cG9ydHMiLCJjb21wbGV0ZVF1ZXVlIiwiY29tcGxldGVGdW5jdGlvbiIsInF1ZXVlRnVuY3Rpb24iLCJkZWZlcnJlZCIsImNvbnRlbnRLZXkiLCJtZXNzYWdlSGFuZGxlcnMiLCJhc3luYyIsInNrdSIsImEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQiLCJhMmNUcmFuc2FjdGlvbkNvZGUiLCJoZWFkZXJzIiwidW5kZWZpbmVkIiwicmVzcG9uc2UiLCJmZXRjaCIsInN0YXR1cyIsInN0YXJ0dXAiLCJzZXJpYWxpemVkUXVldWVEYXRhIiwiYXRvYiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJxdWV1ZURhdGEiLCJKU09OIiwicGFyc2UiLCJydW50aW1lIiwiZXh0ZW5zaW9uTG9nIiwic2VuZGVyIiwibWVzc2FnZSIsImxldmVsIiwib3V0cHV0IiwiRGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJzdWJzdHJpbmciLCJjb25zb2xlIiwibG9nIiwiZGVidWciLCJ3YXJuIiwiZXJyb3IiLCJzZW5kTWVzc2FnZVRvQmFja2dyb3VuZCIsInNlbGYiLCJoYW5kbGVyIiwiYXJncyIsInJlcXVlc3QiLCJicm93c2VyIiwic2VuZE1lc3NhZ2UiLCJtZXNzYWdlUHJvY2Vzc0hhbmRsZXJzIiwiaGFuZGxlcnMiLCJ2YWxpZFNlbmRlcnMiLCJvbk1lc3NhZ2UiLCJhZGRMaXN0ZW5lciIsInBheWxvYWQiLCJpbmNsdWRlcyIsInN0cmluZ2lmeSIsInJlc3VsdCIsImVycm9yTWVzc2FnZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibSIsIlN5bWJvbCIsInF1ZXVlIiwiZm9yRWFjaCIsImZuIiwiciIsInB1c2giLCJhIiwiYm9keSIsImhhc0F3YWl0IiwiY3VycmVudERlcHMiLCJvdXRlclJlc29sdmUiLCJyZWplY3QiLCJpc0V2YWx1YXRpbmciLCJuZXN0ZWQiLCJ3aGVuQWxsIiwiZGVwcyIsIm9uUmVzb2x2ZSIsIm9uUmVqZWN0IiwibGVuZ3RoIiwibWFwIiwiZGVwIiwiaSIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlaiIsInJlamVjdEZuIiwiY2F0Y2giLCJ0aGVuIiwib2JqIiwicmV0Iiwid3JhcERlcHMiLCJkIiwiTyIsImNodW5rSWRzIiwicHJpb3JpdHkiLCJub3RGdWxmaWxsZWQiLCJJbmZpbml0eSIsImZ1bGZpbGxlZCIsImoiLCJPYmplY3QiLCJrZXlzIiwiZXZlcnkiLCJrZXkiLCJzcGxpY2UiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInNvbWUiLCJpZCIsImNodW5rTG9hZGluZ0dsb2JhbCIsImJpbmQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==
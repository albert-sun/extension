(()=>{"use strict";var e,r,t,n,o,s,a={661:(e,r,t)=>{t.a(e,(async e=>{var r=t(54);const n="content_bestbuy",o={"process-atc":async function(e,r,t){const n={accept:"application/json","accept-language":"en-US,en;q=0.9","content-type":"application/json; charset=UTF-8","sec-ch-ua":'" Not;A Brand";v="99", "Google Chrome";v="91", "Chromium";v="91"',"sec-ch-ua-mobile":"?0","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"};void 0!==r&&(n.a2ctransactionreferenceid=r),void 0!==t&&(n.a2ctransactioncode=t);const o=await fetch("https://www.bestbuy.com/cart/api/v1/addToCart",{headers:n,referrer:"https://www.bestbuy.com/cart",referrerPolicy:"strict-origin-when-cross-origin",body:`{"items":[{"skuId":"${e}"}]}`,method:"POST",mode:"cors",credentials:"include"});return 200===o.status?"success":400===o.status?"failure":"error"}};await async function(){(0,r.Z0)(n,o,["background","extension"]),(0,r.Vf)(n,"Finished processing content script startup routine")}(),await async function(){const e=atob(localStorage.getItem("purchaseTracker")||"e30="),t=JSON.parse(e);(0,r.eJ)("content_best-buy","merge-bestbuy-product_queues",[t])}(),e()}),1)},54:(e,r,t)=>{function n(e,r,t="info"){const n=`[${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).substring(0,8)}]\t\t(${e})\t\t${r}`;"info"===t?console.log(n):"debug"===t?console.debug(n):"warn"===t?console.warn(n):"error"===t&&console.error(n)}async function o(e,r,t=[]){const n={sender:e,handler:r,args:t};return await browser.runtime.sendMessage(n)}function s(e,r,t){browser.runtime.onMessage.addListener((async(o,s)=>{const a=o;let c={status:"success",payload:void 0};if(t.includes(a.sender)){const t=r[a.handler];if(void 0!==t){n(e,`Processing handler ${a.handler} from ${a.sender} with arguments ${JSON.stringify(a.args)}`);try{const e=await t(...a.args||[]);c.status="success",c.payload=e}catch(r){const t=r.message;c.status="error",c.payload=t,n(e,`Error processing handler ${a.handler}: ${t}`,"error")}}else n(e,`Error, given handler ${a.handler} doesn't exist`,"error"),c.status="not-found"}return c}))}t.d(r,{Vf:()=>n,eJ:()=>o,Z0:()=>s}),t(261)}},c={};function i(e){var r=c[e];if(void 0!==r)return r.exports;var t=c[e]={exports:{}};return a[e](t,t.exports,i),t.exports}i.m=a,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",r="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},n=e=>!--e.r&&e(),o=(e,r)=>e?e.push(r):n(r),i.a=(s,a,c)=>{var i,u,l,d=c&&[],f=s.exports,h=!0,p=!1,b=(r,t,n)=>{p||(p=!0,t.r+=r.length,r.map(((r,o)=>r[e](t,n))),p=!1)},g=new Promise(((e,r)=>{l=r,u=()=>(e(f),t(d),d=0)}));g[r]=f,g[e]=(e,r)=>{if(h)return n(e);i&&b(i,e,r),o(d,e),g.catch(r)},s.exports=g,a((s=>{if(!s)return u();var a,c;i=(s=>s.map((s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var a=[];s.then((e=>{c[r]=e,t(a),a=0}));var c={};return c[e]=(e,r)=>(o(a,e),s.catch(r)),c}}var i={};return i[e]=e=>n(e),i[r]=s,i})))(s);var l=new Promise(((e,t)=>{(a=()=>e(c=i.map((e=>e[r])))).r=0,b(i,a,t)}));return a.r?l:c})).then(u,l),h=!1},s=[],i.O=(e,r,t,n)=>{if(!r){var o=1/0;for(l=0;l<s.length;l++){for(var[r,t,n]=s[l],a=!0,c=0;c<r.length;c++)(!1&n||o>=n)&&Object.keys(i.O).every((e=>i.O[e](r[c])))?r.splice(c--,1):(a=!1,n<o&&(o=n));if(a){s.splice(l--,1);var u=t();void 0!==u&&(e=u)}}return e}n=n||0;for(var l=s.length;l>0&&s[l-1][2]>n;l--)s[l]=s[l-1];s[l]=[r,t,n]},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i.j=9,(()=>{var e={9:0};i.O.j=r=>0===e[r];var r=(r,t)=>{var n,o,[s,a,c]=t,u=0;if(s.some((r=>0!==e[r]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(c)var l=c(i)}for(r&&r(t);u<s.length;u++)o=s[u],i.o(e,o)&&e[o]&&e[o][0](),e[s[u]]=0;return i.O(l)},t=self.webpackChunkgraphics_queue_utilities=self.webpackChunkgraphics_queue_utilities||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var u=i.O(void 0,[154],(()=>i(661)));u=i.O(u)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljL3Jlc291cmNlcy9jb250ZW50X2Jlc3RidXkuanMiLCJtYXBwaW5ncyI6InVCQUFJQSxFQUNBQyxFQUNBQyxFQU1BQyxFQUNBQyxFQ1RBQyxFLDhDQ0NKLE1BQU1DLEVBQWEsa0JBQ2JDLEVBQWtCLENBQ3BCLGNBSUpDLGVBQWdDQyxFQUFLQyxFQUEyQkMsR0FFNUQsTUFBTUMsRUFBVSxDQUNaLE9BQVUsbUJBQ1Ysa0JBQW1CLGlCQUNuQixlQUFnQixrQ0FDaEIsWUFBYSxtRUFDYixtQkFBb0IsS0FDcEIsaUJBQWtCLFFBQ2xCLGlCQUFrQixPQUNsQixpQkFBa0Isb0JBRVlDLElBQTlCSCxJQUNBRSxFQUFtQywwQkFBSUYsUUFFaEJHLElBQXZCRixJQUNBQyxFQUE0QixtQkFBSUQsR0FHcEMsTUFBTUcsUUFBaUJDLE1BQU0sZ0RBQWlELENBQzFFLFFBQVdILEVBQ1gsU0FBWSwrQkFDWixlQUFrQixrQ0FDbEIsS0FBUSx1QkFBdUJILFFBQy9CLE9BQVUsT0FDVixLQUFRLE9BQ1IsWUFBZSxZQUVuQixPQUEyQixNQUFwQkssRUFBU0UsT0FDVixVQUFnQyxNQUFwQkYsRUFBU0UsT0FDckIsVUFBWSxnQkFHdEJSLGtCQUVJLFFBQXVCRixFQUFZQyxFQUFpQixDQUFDLGFBQWMsZUFDbkUsUUFBYUQsRUFBWSxzREFVdkJXLFNBUE5ULGlCQUdJLE1BQU1VLEVBQXNCQyxLQUFLQyxhQUFhQyxRQUFRLG9CQUFzQixRQUN0RUMsRUFBWUMsS0FBS0MsTUFBTU4sSUFDN0IsUUFBd0IsbUJBQW9CLCtCQUFnQyxDQUFDSSxJQUczRUcsRyx1QkNwREMsU0FBU0MsRUFBYUMsRUFBUUMsRUFBU0MsRUFBUSxRQUVsRCxNQU1NQyxFQUFTLEtBTkcsSUFBS0MsTUFBUUMsbUJBQW1CLFFBQVMsQ0FDdkRDLEtBQU0sVUFDTkMsT0FBUSxVQUNSQyxPQUFRLFlBQ1RDLFVBQVUsRUFBRyxXQUVxQlQsU0FBY0MsSUFDckMsU0FBVkMsRUFDQVEsUUFBUUMsSUFBSVIsR0FFRyxVQUFWRCxFQUNMUSxRQUFRRSxNQUFNVCxHQUVDLFNBQVZELEVBQ0xRLFFBQVFHLEtBQUtWLEdBRUUsVUFBVkQsR0FDTFEsUUFBUUksTUFBTVgsR0ErQ2Z0QixlQUFla0MsRUFBd0JDLEVBQU1DLEVBQVNDLEVBQU8sSUFFaEUsTUFBTUMsRUFBVSxDQUNabkIsT0FBUWdCLEVBQ1JDLFFBQUFBLEVBQVNDLEtBQUFBLEdBSWIsYUFEdUJFLFFBQVF0QixRQUFRdUIsWUFBWUYsR0E2QmhELFNBQVNHLEVBQXVCM0MsRUFBWTRDLEVBQVVDLEdBRXpESixRQUFRdEIsUUFBUTJCLFVBQVVDLGFBQVk3QyxNQUFPb0IsRUFBU0QsS0FDbEQsTUFBTW1CLEVBQVVsQixFQUNoQixJQUFJZCxFQUFXLENBQ1hFLE9BQVEsVUFDUnNDLGFBQVN6QyxHQUdiLEdBQUlzQyxFQUFhSSxTQUFTVCxFQUFRbkIsUUFBUyxDQUV2QyxNQUFNaUIsRUFBVU0sRUFBU0osRUFBUUYsU0FDakMsUUFBZ0IvQixJQUFaK0IsRUFBdUIsQ0FDdkJsQixFQUFhcEIsRUFBWSxzQkFBc0J3QyxFQUFRRixnQkFBZ0JFLEVBQVFuQix5QkFBeUJKLEtBQUtpQyxVQUFVVixFQUFRRCxTQUUvSCxJQUNJLE1BQU1ZLFFBQWViLEtBQVdFLEVBQVFELE1BQVEsSUFDaEQvQixFQUFTRSxPQUFTLFVBQ2xCRixFQUFTd0MsUUFBVUcsRUFFdkIsTUFBT2hCLEdBQ0gsTUFBTWlCLEVBQWVqQixFQUFNYixRQUMzQmQsRUFBU0UsT0FBUyxRQUNsQkYsRUFBU3dDLFFBQVVJLEVBQ25CaEMsRUFBYXBCLEVBQVksNEJBQTRCd0MsRUFBUUYsWUFBWWMsSUFBZ0IsZUFJN0ZoQyxFQUFhcEIsRUFBWSx3QkFBd0J3QyxFQUFRRix3QkFBeUIsU0FFbEY5QixFQUFTRSxPQUFTLFlBRzFCLE9BQU9GLEssNkNDeElYNkMsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQmhELElBQWpCaUQsRUFDSCxPQUFPQSxFQUFhQyxRQUdyQixJQUFJQyxFQUFTTCxFQUF5QkUsR0FBWSxDQUdqREUsUUFBUyxJQU9WLE9BSEFFLEVBQW9CSixHQUFVRyxFQUFRQSxFQUFPRCxRQUFTSCxHQUcvQ0ksRUFBT0QsUUFJZkgsRUFBb0JNLEVBQUlELEVKekJwQmpFLEVBQWdDLG1CQUFYbUUsT0FBd0JBLE9BQU8sZ0JBQWtCLG1CQUN0RWxFLEVBQW1DLG1CQUFYa0UsT0FBd0JBLE9BQU8sbUJBQXFCLHNCQUM1RWpFLEVBQWlCa0UsSUFDakJBLElBQ0ZBLEVBQU1DLFNBQVNDLEdBQVFBLEVBQUdDLE1BQzFCSCxFQUFNQyxTQUFTQyxHQUFRQSxFQUFHQyxJQUFNRCxFQUFHQyxJQUFNRCxRQUd2Q25FLEVBQW9CbUUsTUFBV0EsRUFBR0MsR0FBS0QsSUFDdkNsRSxFQUFnQixDQUFDZ0UsRUFBT0UsSUFBUUYsRUFBUUEsRUFBTUksS0FBS0YsR0FBTW5FLEVBQWlCbUUsR0FxQjlFVixFQUFvQmEsRUFBSSxDQUFDVCxFQUFRVSxFQUFNQyxLQUN0QyxJQUVJQyxFQUNBQyxFQUNBQyxFQUpBVixFQUFRTyxHQUFZLEdBQ3BCWixFQUFVQyxFQUFPRCxRQUlqQmdCLEdBQWUsRUFDZkMsR0FBUyxFQUNUQyxFQUFVLENBQUNDLEVBQU1DLEVBQVdDLEtBQzNCSixJQUNKQSxHQUFTLEVBQ1RHLEVBQVVaLEdBQUtXLEVBQUtHLE9BQ3BCSCxFQUFLSSxLQUFJLENBQUNDLEVBQUtDLElBQU9ELEVBQUl2RixHQUFhbUYsRUFBV0MsS0FDbERKLEdBQVMsSUFFTlMsRUFBVSxJQUFJQyxTQUFRLENBQUNDLEVBQVNDLEtBQ25DZCxFQUFTYyxFQUNUZixFQUFlLEtBQU9jLEVBQVE1QixHQUFVN0QsRUFBY2tFLEdBQVFBLEVBQVEsTUFFdkVxQixFQUFReEYsR0FBa0I4RCxFQUMxQjBCLEVBQVF6RixHQUFlLENBQUNzRSxFQUFJdUIsS0FDM0IsR0FBSWQsRUFBZ0IsT0FBTzVFLEVBQWlCbUUsR0FDeENNLEdBQWFLLEVBQVFMLEVBQWFOLEVBQUl1QixHQUMxQ3pGLEVBQWNnRSxFQUFPRSxHQUNyQm1CLEVBQVFLLE1BQU1ELElBRWY3QixFQUFPRCxRQUFVMEIsRUFDakJmLEdBQU1RLElBQ0wsSUFBSUEsRUFBTSxPQUFPTCxJQUVqQixJQUFJUCxFQUFJYixFQURSbUIsRUFqRGEsQ0FBQ00sR0FBVUEsRUFBS0ksS0FBS0MsSUFDbkMsR0FBVyxPQUFSQSxHQUErQixpQkFBUkEsRUFBa0IsQ0FDM0MsR0FBR0EsRUFBSXZGLEdBQWMsT0FBT3VGLEVBQzVCLEdBQUdBLEVBQUlRLEtBQU0sQ0FDWixJQUFJM0IsRUFBUSxHQUNabUIsRUFBSVEsTUFBTXhCLElBQ1R5QixFQUFJL0YsR0FBa0JzRSxFQUN0QnJFLEVBQWNrRSxHQUNkQSxFQUFRLEtBRVQsSUFBSTRCLEVBQU0sR0FFVixPQURPQSxFQUFJaEcsR0FBZSxDQUFDc0UsRUFBSVEsS0FBWTFFLEVBQWNnRSxFQUFPRSxHQUFLaUIsRUFBSU8sTUFBTWhCLElBQ3hFa0IsR0FHVCxJQUFJQyxFQUFNLEdBR0wsT0FGQUEsRUFBSWpHLEdBQWdCc0UsR0FBUW5FLEVBQWlCbUUsR0FDN0MyQixFQUFJaEcsR0FBa0JzRixFQUNmVSxLQStCR0MsQ0FBU2hCLEdBRXZCLElBQUlPLEVBQVUsSUFBSUMsU0FBUSxDQUFDQyxFQUFTYixNQUNuQ1IsRUFBSyxJQUFPcUIsRUFBUWxDLEVBQVNtQixFQUFZVSxLQUFLYSxHQUFPQSxFQUFFbEcsT0FDcERzRSxFQUFJLEVBQ1BVLEVBQVFMLEVBQWFOLEVBQUlRLE1BRTFCLE9BQU9SLEVBQUdDLEVBQUlrQixFQUFVaEMsS0FDdEJzQyxLQUFLbEIsRUFBY0MsR0FDdEJDLEdBQWUsR0NwRVoxRSxFQUFXLEdBQ2Z1RCxFQUFvQndDLEVBQUksQ0FBQzNDLEVBQVE0QyxFQUFVL0IsRUFBSWdDLEtBQzlDLElBQUdELEVBQUgsQ0FNQSxJQUFJRSxFQUFlQyxFQUFBQSxFQUNuQixJQUFTaEIsRUFBSSxFQUFHQSxFQUFJbkYsRUFBU2dGLE9BQVFHLElBQUssQ0FHekMsSUFGQSxJQUFLYSxFQUFVL0IsRUFBSWdDLEdBQVlqRyxFQUFTbUYsR0FDcENpQixHQUFZLEVBQ1BDLEVBQUksRUFBR0EsRUFBSUwsRUFBU2hCLE9BQVFxQixNQUNwQixFQUFYSixHQUFzQkMsR0FBZ0JELElBQWFLLE9BQU9DLEtBQUtoRCxFQUFvQndDLEdBQUdTLE9BQU9DLEdBQVNsRCxFQUFvQndDLEVBQUVVLEdBQUtULEVBQVNLLE1BQzlJTCxFQUFTVSxPQUFPTCxJQUFLLElBRXJCRCxHQUFZLEVBQ1RILEVBQVdDLElBQWNBLEVBQWVELElBRzdDLEdBQUdHLEVBQVcsQ0FDYnBHLEVBQVMwRyxPQUFPdkIsSUFBSyxHQUNyQixJQUFJakIsRUFBSUQsU0FDRXpELElBQU4wRCxJQUFpQmQsRUFBU2MsSUFHaEMsT0FBT2QsRUF2Qk42QyxFQUFXQSxHQUFZLEVBQ3ZCLElBQUksSUFBSWQsRUFBSW5GLEVBQVNnRixPQUFRRyxFQUFJLEdBQUtuRixFQUFTbUYsRUFBSSxHQUFHLEdBQUtjLEVBQVVkLElBQUtuRixFQUFTbUYsR0FBS25GLEVBQVNtRixFQUFJLEdBQ3JHbkYsRUFBU21GLEdBQUssQ0FBQ2EsRUFBVS9CLEVBQUlnQyxJSUovQjFDLEVBQW9CdUMsRUFBSSxDQUFDcEMsRUFBU2lELEtBQ2pDLElBQUksSUFBSUYsS0FBT0UsRUFDWHBELEVBQW9CcUQsRUFBRUQsRUFBWUYsS0FBU2xELEVBQW9CcUQsRUFBRWxELEVBQVMrQyxJQUM1RUgsT0FBT08sZUFBZW5ELEVBQVMrQyxFQUFLLENBQUVLLFlBQVksRUFBTUMsSUFBS0osRUFBV0YsTUNKM0VsRCxFQUFvQnlELEVBQUksV0FDdkIsR0FBMEIsaUJBQWZDLFdBQXlCLE9BQU9BLFdBQzNDLElBQ0MsT0FBT0MsTUFBUSxJQUFJQyxTQUFTLGNBQWIsR0FDZCxNQUFPQyxHQUNSLEdBQXNCLGlCQUFYQyxPQUFxQixPQUFPQSxRQUxqQixHQ0F4QjlELEVBQW9CcUQsRUFBSSxDQUFDakIsRUFBSzJCLElBQVVoQixPQUFPaUIsVUFBVUMsZUFBZUMsS0FBSzlCLEVBQUsyQixHQ0FsRi9ELEVBQW9COEMsRUFBSSxFLE1DS3hCLElBQUlxQixFQUFrQixDQUNyQixFQUFHLEdBYUpuRSxFQUFvQndDLEVBQUVNLEVBQUtzQixHQUEwQyxJQUE3QkQsRUFBZ0JDLEdBR3hELElBQUlDLEVBQXVCLENBQUNDLEVBQTRCQyxLQUN2RCxJQUdJdEUsRUFBVW1FLEdBSFQzQixFQUFVK0IsRUFBYTNHLEdBQVcwRyxFQUdoQjNDLEVBQUksRUFDM0IsR0FBR2EsRUFBU2dDLE1BQU1DLEdBQWdDLElBQXhCUCxFQUFnQk8sS0FBYSxDQUN0RCxJQUFJekUsS0FBWXVFLEVBQ1p4RSxFQUFvQnFELEVBQUVtQixFQUFhdkUsS0FDckNELEVBQW9CTSxFQUFFTCxHQUFZdUUsRUFBWXZFLElBR2hELEdBQUdwQyxFQUFTLElBQUlnQyxFQUFTaEMsRUFBUW1DLEdBR2xDLElBREdzRSxHQUE0QkEsRUFBMkJDLEdBQ3JEM0MsRUFBSWEsRUFBU2hCLE9BQVFHLElBQ3pCd0MsRUFBVTNCLEVBQVNiLEdBQ2hCNUIsRUFBb0JxRCxFQUFFYyxFQUFpQkMsSUFBWUQsRUFBZ0JDLElBQ3JFRCxFQUFnQkMsR0FBUyxLQUUxQkQsRUFBZ0IxQixFQUFTYixJQUFNLEVBRWhDLE9BQU81QixFQUFvQndDLEVBQUUzQyxJQUcxQjhFLEVBQXFCNUYsS0FBMkMscUNBQUlBLEtBQTJDLHNDQUFLLEdBQ3hINEYsRUFBbUJsRSxRQUFRNEQsRUFBcUJPLEtBQUssS0FBTSxJQUMzREQsRUFBbUIvRCxLQUFPeUQsRUFBcUJPLEtBQUssS0FBTUQsRUFBbUIvRCxLQUFLZ0UsS0FBS0QsSyxHQzdDdkYsSUFBSUUsRUFBc0I3RSxFQUFvQndDLE9BQUV2RixFQUFXLENBQUMsTUFBTSxJQUFPK0MsRUFBb0IsT0FDN0Y2RSxFQUFzQjdFLEVBQW9Cd0MsRUFBRXFDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2FzeW5jIG1vZHVsZSIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvLi9zb3VyY2UvY29udGVudC9iZXN0YnV5LnRzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy8uL3NvdXJjZS9zaGFyZWQvdXRpbGl0aWVzLnRzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL2dyYXBoaWNzLXF1ZXVlLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9ncmFwaGljcy1xdWV1ZS11dGlsaXRpZXMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciB3ZWJwYWNrVGhlbiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgdGhlblwiKSA6IFwiX193ZWJwYWNrX3RoZW5fX1wiO1xudmFyIHdlYnBhY2tFeHBvcnRzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sKFwid2VicGFjayBleHBvcnRzXCIpIDogXCJfX3dlYnBhY2tfZXhwb3J0c19fXCI7XG52YXIgY29tcGxldGVRdWV1ZSA9IChxdWV1ZSkgPT4ge1xuXHRpZihxdWV1ZSkge1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tKSk7XG5cdFx0cXVldWUuZm9yRWFjaCgoZm4pID0+IChmbi5yLS0gPyBmbi5yKysgOiBmbigpKSk7XG5cdH1cbn1cbnZhciBjb21wbGV0ZUZ1bmN0aW9uID0gKGZuKSA9PiAoIS0tZm4uciAmJiBmbigpKTtcbnZhciBxdWV1ZUZ1bmN0aW9uID0gKHF1ZXVlLCBmbikgPT4gKHF1ZXVlID8gcXVldWUucHVzaChmbikgOiBjb21wbGV0ZUZ1bmN0aW9uKGZuKSk7XG52YXIgd3JhcERlcHMgPSAoZGVwcykgPT4gKGRlcHMubWFwKChkZXApID0+IHtcblx0aWYoZGVwICE9PSBudWxsICYmIHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpIHtcblx0XHRpZihkZXBbd2VicGFja1RoZW5dKSByZXR1cm4gZGVwO1xuXHRcdGlmKGRlcC50aGVuKSB7XG5cdFx0XHR2YXIgcXVldWUgPSBbXTtcblx0XHRcdGRlcC50aGVuKChyKSA9PiB7XG5cdFx0XHRcdG9ialt3ZWJwYWNrRXhwb3J0c10gPSByO1xuXHRcdFx0XHRjb21wbGV0ZVF1ZXVlKHF1ZXVlKTtcblx0XHRcdFx0cXVldWUgPSAwO1xuXHRcdFx0fSk7XG5cdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9ialt3ZWJwYWNrVGhlbl0gPSAoZm4sIHJlamVjdCkgPT4gKHF1ZXVlRnVuY3Rpb24ocXVldWUsIGZuKSwgZGVwLmNhdGNoKHJlamVjdCkpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cdH1cblx0dmFyIHJldCA9IHt9O1xuXHRcdFx0XHRcdFx0cmV0W3dlYnBhY2tUaGVuXSA9IChmbikgPT4gKGNvbXBsZXRlRnVuY3Rpb24oZm4pKTtcblx0XHRcdFx0XHRcdHJldFt3ZWJwYWNrRXhwb3J0c10gPSBkZXA7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmV0O1xufSkpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5hID0gKG1vZHVsZSwgYm9keSwgaGFzQXdhaXQpID0+IHtcblx0dmFyIHF1ZXVlID0gaGFzQXdhaXQgJiYgW107XG5cdHZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cdHZhciBjdXJyZW50RGVwcztcblx0dmFyIG91dGVyUmVzb2x2ZTtcblx0dmFyIHJlamVjdDtcblx0dmFyIGlzRXZhbHVhdGluZyA9IHRydWU7XG5cdHZhciBuZXN0ZWQgPSBmYWxzZTtcblx0dmFyIHdoZW5BbGwgPSAoZGVwcywgb25SZXNvbHZlLCBvblJlamVjdCkgPT4ge1xuXHRcdGlmIChuZXN0ZWQpIHJldHVybjtcblx0XHRuZXN0ZWQgPSB0cnVlO1xuXHRcdG9uUmVzb2x2ZS5yICs9IGRlcHMubGVuZ3RoO1xuXHRcdGRlcHMubWFwKChkZXAsIGkpID0+IChkZXBbd2VicGFja1RoZW5dKG9uUmVzb2x2ZSwgb25SZWplY3QpKSk7XG5cdFx0bmVzdGVkID0gZmFsc2U7XG5cdH07XG5cdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlaikgPT4ge1xuXHRcdHJlamVjdCA9IHJlajtcblx0XHRvdXRlclJlc29sdmUgPSAoKSA9PiAocmVzb2x2ZShleHBvcnRzKSwgY29tcGxldGVRdWV1ZShxdWV1ZSksIHF1ZXVlID0gMCk7XG5cdH0pO1xuXHRwcm9taXNlW3dlYnBhY2tFeHBvcnRzXSA9IGV4cG9ydHM7XG5cdHByb21pc2Vbd2VicGFja1RoZW5dID0gKGZuLCByZWplY3RGbikgPT4ge1xuXHRcdGlmIChpc0V2YWx1YXRpbmcpIHsgcmV0dXJuIGNvbXBsZXRlRnVuY3Rpb24oZm4pOyB9XG5cdFx0aWYgKGN1cnJlbnREZXBzKSB3aGVuQWxsKGN1cnJlbnREZXBzLCBmbiwgcmVqZWN0Rm4pO1xuXHRcdHF1ZXVlRnVuY3Rpb24ocXVldWUsIGZuKTtcblx0XHRwcm9taXNlLmNhdGNoKHJlamVjdEZuKTtcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9taXNlO1xuXHRib2R5KChkZXBzKSA9PiB7XG5cdFx0aWYoIWRlcHMpIHJldHVybiBvdXRlclJlc29sdmUoKTtcblx0XHRjdXJyZW50RGVwcyA9IHdyYXBEZXBzKGRlcHMpO1xuXHRcdHZhciBmbiwgcmVzdWx0O1xuXHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Zm4gPSAoKSA9PiAocmVzb2x2ZShyZXN1bHQgPSBjdXJyZW50RGVwcy5tYXAoKGQpID0+IChkW3dlYnBhY2tFeHBvcnRzXSkpKSk7XG5cdFx0XHRmbi5yID0gMDtcblx0XHRcdHdoZW5BbGwoY3VycmVudERlcHMsIGZuLCByZWplY3QpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBmbi5yID8gcHJvbWlzZSA6IHJlc3VsdDtcblx0fSkudGhlbihvdXRlclJlc29sdmUsIHJlamVjdCk7XG5cdGlzRXZhbHVhdGluZyA9IGZhbHNlO1xufTsiLCJ2YXIgZGVmZXJyZWQgPSBbXTtcbl9fd2VicGFja19yZXF1aXJlX18uTyA9IChyZXN1bHQsIGNodW5rSWRzLCBmbiwgcHJpb3JpdHkpID0+IHtcblx0aWYoY2h1bmtJZHMpIHtcblx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0Zm9yKHZhciBpID0gZGVmZXJyZWQubGVuZ3RoOyBpID4gMCAmJiBkZWZlcnJlZFtpIC0gMV1bMl0gPiBwcmlvcml0eTsgaS0tKSBkZWZlcnJlZFtpXSA9IGRlZmVycmVkW2kgLSAxXTtcblx0XHRkZWZlcnJlZFtpXSA9IFtjaHVua0lkcywgZm4sIHByaW9yaXR5XTtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIG5vdEZ1bGZpbGxlZCA9IEluZmluaXR5O1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGRlZmVycmVkLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIFtjaHVua0lkcywgZm4sIHByaW9yaXR5XSA9IGRlZmVycmVkW2ldO1xuXHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuXHRcdGZvciAodmFyIGogPSAwOyBqIDwgY2h1bmtJZHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdGlmICgocHJpb3JpdHkgJiAxID09PSAwIHx8IG5vdEZ1bGZpbGxlZCA+PSBwcmlvcml0eSkgJiYgT2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5PKS5ldmVyeSgoa2V5KSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXy5PW2tleV0oY2h1bmtJZHNbal0pKSkpIHtcblx0XHRcdFx0Y2h1bmtJZHMuc3BsaWNlKGotLSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmdWxmaWxsZWQgPSBmYWxzZTtcblx0XHRcdFx0aWYocHJpb3JpdHkgPCBub3RGdWxmaWxsZWQpIG5vdEZ1bGZpbGxlZCA9IHByaW9yaXR5O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihmdWxmaWxsZWQpIHtcblx0XHRcdGRlZmVycmVkLnNwbGljZShpLS0sIDEpXG5cdFx0XHR2YXIgciA9IGZuKCk7XG5cdFx0XHRpZiAociAhPT0gdW5kZWZpbmVkKSByZXN1bHQgPSByO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufTsiLCJpbXBvcnQgeyBleHRlbnNpb25Mb2csIG1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMsIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsaXRpZXNcIjtcclxuY29uc3QgY29udGVudEtleSA9IFwiY29udGVudF9iZXN0YnV5XCI7IC8vIENvbnRlbnQgc2NyaXB0IGlkZW50aWZpZXJcclxuY29uc3QgbWVzc2FnZUhhbmRsZXJzID0ge1xyXG4gICAgXCJwcm9jZXNzLWF0Y1wiOiBwcm9jZXNzQWRkdG9DYXJ0LFxyXG59OyAvLyBNZXNzYWdlIGhhbmRsZXJzIGZvciBwcm9jZXNzaW5nIGZyb20gTWVzc2FnZXMgQVBJXHJcbi8vIFNlbmQgYWRkLXRvLWNhcnQgcmVxdWVzdCwgb3B0aW9uYWxseSB3aXRoIChhc3N1bWluZyBwb3BwZWQpIHF1ZXVlIGRhdGFcclxuLy8gT25seSByZXR1cm4gc3VjY2VzcyAvIGZhaWx1cmUgLyBlcnJvciByZXN1bHRzLCBpZ25vcmUgbmV3IHF1ZXVlIGFuZCByZXNwb25zZSBjb250ZW50XHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NBZGR0b0NhcnQoc2t1LCBhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkLCBhMmNUcmFuc2FjdGlvbkNvZGUpIHtcclxuICAgIC8vIEluaXRpYWxpemUgaGVhZGVycyBhbmQgYWRkaXRpb25hbGx5IGFkZCBxdWV1ZSBkYXRhIGlmIGRlZmluZWRcclxuICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgXCJhY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgXCJhY2NlcHQtbGFuZ3VhZ2VcIjogXCJlbi1VUyxlbjtxPTAuOVwiLFxyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiLFxyXG4gICAgICAgIFwic2VjLWNoLXVhXCI6IFwiXFxcIiBOb3Q7QSBCcmFuZFxcXCI7dj1cXFwiOTlcXFwiLCBcXFwiR29vZ2xlIENocm9tZVxcXCI7dj1cXFwiOTFcXFwiLCBcXFwiQ2hyb21pdW1cXFwiO3Y9XFxcIjkxXFxcIlwiLFxyXG4gICAgICAgIFwic2VjLWNoLXVhLW1vYmlsZVwiOiBcIj8wXCIsXHJcbiAgICAgICAgXCJzZWMtZmV0Y2gtZGVzdFwiOiBcImVtcHR5XCIsXHJcbiAgICAgICAgXCJzZWMtZmV0Y2gtbW9kZVwiOiBcImNvcnNcIixcclxuICAgICAgICBcInNlYy1mZXRjaC1zaXRlXCI6IFwic2FtZS1vcmlnaW5cIlxyXG4gICAgfTtcclxuICAgIGlmIChhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBoZWFkZXJzW1wiYTJjdHJhbnNhY3Rpb25yZWZlcmVuY2VpZFwiXSA9IGEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYTJjVHJhbnNhY3Rpb25Db2RlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBoZWFkZXJzW1wiYTJjdHJhbnNhY3Rpb25jb2RlXCJdID0gYTJjVHJhbnNhY3Rpb25Db2RlO1xyXG4gICAgfVxyXG4gICAgLy8gUHJvY2VzcyBhZGQtdG8tY2FydCByZXF1ZXN0IGFuZCBjaGVjayByZXNwb25zZSBzdGF0dXMgZm9yIHJlc3VsdFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vd3d3LmJlc3RidXkuY29tL2NhcnQvYXBpL3YxL2FkZFRvQ2FydFwiLCB7XHJcbiAgICAgICAgXCJoZWFkZXJzXCI6IGhlYWRlcnMsXHJcbiAgICAgICAgXCJyZWZlcnJlclwiOiBcImh0dHBzOi8vd3d3LmJlc3RidXkuY29tL2NhcnRcIixcclxuICAgICAgICBcInJlZmVycmVyUG9saWN5XCI6IFwic3RyaWN0LW9yaWdpbi13aGVuLWNyb3NzLW9yaWdpblwiLFxyXG4gICAgICAgIFwiYm9keVwiOiBge1wiaXRlbXNcIjpbe1wic2t1SWRcIjpcIiR7c2t1fVwifV19YCxcclxuICAgICAgICBcIm1ldGhvZFwiOiBcIlBPU1RcIixcclxuICAgICAgICBcIm1vZGVcIjogXCJjb3JzXCIsXHJcbiAgICAgICAgXCJjcmVkZW50aWFsc1wiOiBcImluY2x1ZGVcIixcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwXHJcbiAgICAgICAgPyBcInN1Y2Nlc3NcIiA6IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwXHJcbiAgICAgICAgPyBcImZhaWx1cmVcIiA6IFwiZXJyb3JcIjsgLy8gUmV0dXJuIGRlcGVuZGluZyBvbiBzdGF0dXMgY29kZVxyXG59XHJcbi8vIEdlbmVyYWwgc3RhcnR1cCByb3V0aW5lIGZvciBjb250ZW50IHNjcmlwdFxyXG5hc3luYyBmdW5jdGlvbiBzdGFydHVwKCkge1xyXG4gICAgLy8gLSBTZXR1cCBtZXNzYWdlIHJlY2VpdmluZyBoYW5kbGVycyBhbmQgc2VuZGluZyB3cmFwcGVyXHJcbiAgICBtZXNzYWdlUHJvY2Vzc0hhbmRsZXJzKGNvbnRlbnRLZXksIG1lc3NhZ2VIYW5kbGVycywgW1wiYmFja2dyb3VuZFwiLCBcImV4dGVuc2lvblwiXSk7XHJcbiAgICBleHRlbnNpb25Mb2coY29udGVudEtleSwgXCJGaW5pc2hlZCBwcm9jZXNzaW5nIGNvbnRlbnQgc2NyaXB0IHN0YXJ0dXAgcm91dGluZVwiKTtcclxufVxyXG4vLyBDb250ZW50IHNjcmlwdCBydW50aW1lIHByb2Nlc3Npbmcgb24tbG9hZFxyXG5hc3luYyBmdW5jdGlvbiBydW50aW1lKCkge1xyXG4gICAgLy8gU2VuZCB1cGRhdGVkIHJhdyBxdWV1ZSBpbmZvIHRvIGJhY2tncm91bmRcclxuICAgIC8vIENhbid0IGludGVyY2VwdCByZXF1ZXN0cywgaW5zdGVhZCBpbnRlcmNlcHQgZGF0YSBtYW51YWxseT9cclxuICAgIGNvbnN0IHNlcmlhbGl6ZWRRdWV1ZURhdGEgPSBhdG9iKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHVyY2hhc2VUcmFja2VyXCIpIHx8IFwiZTMwPVwiKTtcclxuICAgIGNvbnN0IHF1ZXVlRGF0YSA9IEpTT04ucGFyc2Uoc2VyaWFsaXplZFF1ZXVlRGF0YSk7XHJcbiAgICBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZChcImNvbnRlbnRfYmVzdC1idXlcIiwgXCJtZXJnZS1iZXN0YnV5LXByb2R1Y3RfcXVldWVzXCIsIFtxdWV1ZURhdGFdKTsgLy8gVGhyb3cgYW5kIGZvcmdldFxyXG59XHJcbmF3YWl0IHN0YXJ0dXAoKTtcclxuYXdhaXQgcnVudGltZSgpO1xyXG4iLCJpbXBvcnQgeyBnZXQsIHdyaXRhYmxlIH0gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvc3RvcmVcIjtcclxuLy8gU29tZXdoYXQgZmFuY3kgbG9nZ2luZyBmcm9tIGV4dGVuc2lvbiBiYWNrZ3JvdW5kXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbnNpb25Mb2coc2VuZGVyLCBtZXNzYWdlLCBsZXZlbCA9IFwiaW5mb1wiKSB7XHJcbiAgICAvLyBHZW5lcmF0ZSB0aW1lc3RtYXAgZm9yIGxvZ2dpbmcgaW4gMjQtaG91ciBISDpNTTpTUyBmb3JtYXRcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IChuZXcgRGF0ZSgpKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUdCJywge1xyXG4gICAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxyXG4gICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXHJcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcclxuICAgIH0pLnN1YnN0cmluZygwLCA4KTtcclxuICAgIC8vIExvZyBvciBlcnJvciB0byBjb25zb2xlIChjdXJyZW50bHkgd2l0aG91dCBmb3JtYXR0aW5nKVxyXG4gICAgY29uc3Qgb3V0cHV0ID0gYFske3RpbWVzdGFtcH1dXFx0XFx0KCR7c2VuZGVyfSlcXHRcXHQke21lc3NhZ2V9YDtcclxuICAgIGlmIChsZXZlbCA9PT0gXCJpbmZvXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZGVidWdcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcob3V0cHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5cIikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3Iob3V0cHV0KTtcclxuICAgIH1cclxufVxyXG4vLyBJbml0aWFsaXplIHdyaXRhYmxlIHN0b3JlIGZyb20gU3RvcmFnZSBBUEkgYW5kIG1haW50YWluIHZhbHVlIHVzaW5nIHN1YnNjcmlwdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTdG9yZShzZWxmLCBrZXksIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSB3cml0YWJsZSBzdG9yZSBmcm9tIHN0b3JhZ2UgdmFsdWVcclxuICAgIGNvbnN0IHN0b3JhZ2VWYWx1ZSA9IGF3YWl0IHN0b3JhZ2VHZXQoa2V5LCBkZWZhdWx0VmFsdWUpO1xyXG4gICAgY29uc3Qgc3RvcmUgPSB3cml0YWJsZShzdG9yYWdlVmFsdWUpO1xyXG4gICAgLy8gSW5zdGFudGlhdGUgc2V0dGVyIGFuZCBnZXR0ZXIgZm9yIGJyb2FkY2FzdGluZyB1cGRhdGVzXHJcbiAgICAvLyBBc3N1bWUgdGhhdCBib3RoIGtleSBhbmQgdmFsdWUgYXJlIGluZGV4YWJsZSBieSBzdHJpbmdcclxuICAgIGNvbnN0IHNldCA9IChzZXRLZXksIHNldFZhbHVlKSA9PiB7XHJcbiAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgdmFsdWVbc2V0S2V5XSA9IHNldFZhbHVlOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoeyBba2V5XTogZ2V0KHN0b3JlKSB9KTtcclxuICAgICAgICBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZChzZWxmLCBcInVwZGF0ZS1zZXRcIiwgW2tleSwgc2V0S2V5LCBzZXRWYWx1ZV0pO1xyXG4gICAgfTsgLy8gU2V0dGVyIHRvIGJyb2FkY2FzdCBrZXkgc2V0IHVwZGF0ZVxyXG4gICAgY29uc3QgZGVsID0gKGRlbEtleSkgPT4ge1xyXG4gICAgICAgIHN0b3JlLnVwZGF0ZSh2YWx1ZSA9PiB7IGRlbGV0ZSB2YWx1ZVtkZWxLZXldOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoeyBba2V5XTogZ2V0KHN0b3JlKSB9KTtcclxuICAgICAgICBzZW5kTWVzc2FnZVRvQmFja2dyb3VuZChzZWxmLCBcInVwZGF0ZS1kZWxcIiwgW2tleSwgZGVsS2V5XSk7XHJcbiAgICB9OyAvLyBEZWxldGVyIHRvIGJyb2FkY2FzdCBrZXkgZGVsZXRlIHVwZGF0ZVxyXG4gICAgLy8gQXR0YWNoIGFkZGl0aW9uYWwgbWVzc2FnZSBsaXN0ZW5lciB0byBsaXN0ZW4gZm9yIHVwZGF0ZXNcclxuICAgIGJyb3dzZXIucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoYXN5bmMgKG1lc3NhZ2UsIHNlbmRlcikgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIga2V5IG1hdGNoZXMgYW5kIHBlcmZvcm0gdXBkYXRlIG9yIGRlbGV0aW9uXHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG1lc3NhZ2U7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdCk7XHJcbiAgICAgICAgaWYgKHJlcXVlc3QuaGFuZGxlciA9PT0gXCJ1cGRhdGUtc2V0XCIpIHtcclxuICAgICAgICAgICAgLy8gRGVjb25zdHJ1Y3QgYXJndW1lbnRzIGFuZCBzZXQvcmVwbGFjZSBrZXkgaW4gc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgW3N0b3JlS2V5LCBzZXRLZXksIHNldFZhbHVlXSA9IHJlcXVlc3QuYXJncztcclxuICAgICAgICAgICAgaWYgKHN0b3JlS2V5ID09PSBrZXkpIHsgLy8gRW5zdXJlIGtleSBtYXRjaGVzIGJlZm9yZSBzZXR0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBETyBOT1QgdXNlIHNldHRlciwgb3RoZXJ3aXNlIHVwZGF0ZSBicm9hZGNhc3RzIGluIGxvb3BcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGdldChzdG9yZSkpO1xyXG4gICAgICAgICAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgdmFsdWVbc2V0S2V5XSA9IHNldFZhbHVlOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZ2V0KHN0b3JlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVxdWVzdC5oYW5kbGVyID09PSBcInVwZGF0ZS1kZWxldGVcIikge1xyXG4gICAgICAgICAgICAvLyBEZWNvbnN0cnVjdCBhcmd1bWVudHMgYW5kIGRlbGV0ZSBrZXkgZnJvbSBzdG9yZVxyXG4gICAgICAgICAgICBjb25zdCBbc3RvcmVLZXksIGRlbEtleV0gPSByZXF1ZXN0LmFyZ3M7XHJcbiAgICAgICAgICAgIGlmIChzdG9yZUtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBETyBOT1QgdXNlIGRlbGV0ZXIsIG90aGVyd2lzZSB1cGRhdGUgYnJvYWRjYXN0cyBpbiBsb29wXHJcbiAgICAgICAgICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyBkZWxldGUgdmFsdWVbZGVsS2V5XTsgcmV0dXJuIHZhbHVlOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHsgc3RvcmUsIHNldCwgZGVsIH07XHJcbn1cclxuLy8gSW5pdGlhbGl6ZXMgd3JhcHBlciBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIGNvbnRlbnQgc2NyaXB0IHdpdGgga2V5IGFuZCBwYXJhbXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kKHNlbGYsIGhhbmRsZXIsIGFyZ3MgPSBbXSkge1xyXG4gICAgLy8gQ29uc3RydWN0IHJlcXVlc3QgZnJvbSBwYXJhbWV0ZXJzXHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHNlbmRlcjogc2VsZixcclxuICAgICAgICBoYW5kbGVyLCBhcmdzLFxyXG4gICAgfTtcclxuICAgIC8vIFNlbmQgbWVzc2FnZSBhbmQgd2FpdCBmb3IgcmVzcG9uc2VcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYnJvd3Nlci5ydW50aW1lLnNlbmRNZXNzYWdlKHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcbjtcclxuLy8gSW5pdGlhbGl6ZXMgd3JhcHBlciBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIGJhY2tncm91bmQgb3IgZXh0ZW5zaW9uIHdpdGgga2V5IGFuZCBwYXJhbXNcclxuLy8gTXVzdCB0YXJnZXQgaW5kaXZpZHVhbCB0YWJzIGJ5IGdsb2IsIHRodXMgb25seSBzZW5kcyB0byB0aGUgZmlyc3QgdGFiIG1hdGNoZWRcclxuY29uc3QgZG9tYWluTWF0Y2hlcyA9IHtcclxuICAgIFwiYmVzdGJ1eVwiOiBcImh0dHBzOi8vKi5iZXN0YnV5LmNvbS8qXCIsXHJcbn07IC8vIERvbWFpbiBtYXRjaGVzIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGZyb20gYmFja2dyb3VuZCBvciBleHRlbnNpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlVG9Db250ZW50KHNlbGYsIHRhcmdldCwgaGFuZGxlciwgYXJncyA9IFtdKSB7XHJcbiAgICAvLyBDb25zdHJ1Y3QgcmVxdWVzdCBmcm9tIHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgc2VuZGVyOiBzZWxmLFxyXG4gICAgICAgIGhhbmRsZXIsIGFyZ3MsXHJcbiAgICB9O1xyXG4gICAgLy8gQXNzdW1lIHRoYXQgdGFiIGFsd2F5cyBmb3VuZCwgaGF2ZSBmYWlsc2FmZT9cclxuICAgIGxldCByZXNwb25zZSA9IHtcclxuICAgICAgICBzdGF0dXM6IFwiZXJyb3JcIixcclxuICAgICAgICBwYXlsb2FkOiBcInRhYiBub3QgZm91bmQgKHNob3VsZG4ndCBoYXBwZW4pXCIsXHJcbiAgICB9OyAvLyBEZWZhdWx0IHJlc3BvbnNlLCBvdmVyd3JpdHRlbiBpZiB0YWIgZm91bmRcclxuICAgIGNvbnN0IHRhYnMgPSBhd2FpdCBicm93c2VyLnRhYnMucXVlcnkoeyB1cmw6IGRvbWFpbk1hdGNoZXNbdGFyZ2V0XSB9KTtcclxuICAgIGlmICh0YWJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBPbmx5IHByb2Nlc3Mgb24gZmlyc3QgY29udGVudCBzY3JpcHQsIGFzc3VtZSB0YWIgSUQgZGVmaW5lZFxyXG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgYnJvd3Nlci50YWJzLnNlbmRNZXNzYWdlKHRhYnNbMF0uaWQsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcbjtcclxuLy8gSW5pdGlhbGl6ZXMgbWVzc2FnZSByZWNlaXZpbmcgZm9yIGdpdmVuIGNvbnRlbnQgc2NyaXB0IHdpdGgga2V5IGFuZCBoYW5kbGVyc1xyXG5leHBvcnQgZnVuY3Rpb24gbWVzc2FnZVByb2Nlc3NIYW5kbGVycyhjb250ZW50S2V5LCBoYW5kbGVycywgdmFsaWRTZW5kZXJzKSB7XHJcbiAgICAvLyBTZXR1cCBsaXN0ZW5lciBmb3Igc25vb3BpbmcgbWVzc2FnZXMgYW5kIGV4ZWN1dGluZyBtYXRjaGluZyBoYW5kbGVyc1xyXG4gICAgYnJvd3Nlci5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyAobWVzc2FnZSwgc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG1lc3NhZ2U7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxyXG4gICAgICAgICAgICBwYXlsb2FkOiB1bmRlZmluZWRcclxuICAgICAgICB9OyAvLyBQbGFjZWhvbGRlciByZXNwb25zZSBiZWZvcmUgY29uc3RydWN0aW9uXHJcbiAgICAgICAgLy8gT25seSBwcm9jZXNzIGluY29taW5nIG1lc3NhZ2VzIGZyb20gdmFsaWQgc2VuZGVyc1xyXG4gICAgICAgIGlmICh2YWxpZFNlbmRlcnMuaW5jbHVkZXMocmVxdWVzdC5zZW5kZXIpKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaGFuZGxlciBleGlzdHMsIG1lc3NhZ2VzIGFyZSB0YXJnZXRlZFxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gaGFuZGxlcnNbcmVxdWVzdC5oYW5kbGVyXTtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGNvbnRlbnRLZXksIGBQcm9jZXNzaW5nIGhhbmRsZXIgJHtyZXF1ZXN0LmhhbmRsZXJ9IGZyb20gJHtyZXF1ZXN0LnNlbmRlcn0gd2l0aCBhcmd1bWVudHMgJHtKU09OLnN0cmluZ2lmeShyZXF1ZXN0LmFyZ3MpfWApO1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlciBleGlzdHMsIGF0dGVtcHQgdG8gZXhlY3V0ZVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVyKC4uLnJlcXVlc3QuYXJncyB8fCBbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gXCJzdWNjZXNzXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucGF5bG9hZCA9IHJlc3VsdDsgLy8gTm9uLXNlcmlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID0gXCJlcnJvclwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnBheWxvYWQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGNvbnRlbnRLZXksIGBFcnJvciBwcm9jZXNzaW5nIGhhbmRsZXIgJHtyZXF1ZXN0LmhhbmRsZXJ9OiAke2Vycm9yTWVzc2FnZX1gLCBcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGNvbnRlbnRLZXksIGBFcnJvciwgZ2l2ZW4gaGFuZGxlciAke3JlcXVlc3QuaGFuZGxlcn0gZG9lc24ndCBleGlzdGAsIFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGVyIGRvZXNuJ3QgZXhpc3QsIHJldHVybiBub3RpZnlcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9IFwibm90LWZvdW5kXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuLy8gUmV0cmlldmUgdmFsdWUgd2l0aCBnaXZlbiBrZXkgZnJvbSBTdG9yYWdlIEFQSVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmFnZUdldChrZXksIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgLy8gUmV0cmlldmUgZnJvbSBzdG9yYWdlIGFuZCBcIm92ZXJ3cml0ZVwiIHdpdGggZGVmYXVsdCBpZiBub3QgZm91bmRcclxuICAgIGNvbnN0IHN0b3JhZ2VDb250ZW50ID0gYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldChrZXkpO1xyXG4gICAgaWYgKHN0b3JhZ2VDb250ZW50W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHN0b3JhZ2VDb250ZW50W2tleV0gPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RvcmFnZUNvbnRlbnRba2V5XTtcclxufVxyXG4vLyBTdG9yZSB3aXRoIHRoZSBnaXZlbiBrZXkgdGhlIHZhbHVlIHRocm91Z2ggdGhlIFN0b3JhZ2UgQVBJXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9yYWdlU2V0KGtleSwgdmFsdWUpIHtcclxuICAgIC8vIFN0b3JlIHVzaW5nIHRoZSBnaXZlbiBrZXkgYW5kIHZhbHVlXHJcbiAgICBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KHsgW2tleV06IHZhbHVlIH0pO1xyXG59XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gOTsiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzW2ldXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2dyYXBoaWNzX3F1ZXVlX3V0aWxpdGllc1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtncmFwaGljc19xdWV1ZV91dGlsaXRpZXNcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFsxNTRdLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg2NjEpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsid2VicGFja1RoZW4iLCJ3ZWJwYWNrRXhwb3J0cyIsImNvbXBsZXRlUXVldWUiLCJjb21wbGV0ZUZ1bmN0aW9uIiwicXVldWVGdW5jdGlvbiIsImRlZmVycmVkIiwiY29udGVudEtleSIsIm1lc3NhZ2VIYW5kbGVycyIsImFzeW5jIiwic2t1IiwiYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCIsImEyY1RyYW5zYWN0aW9uQ29kZSIsImhlYWRlcnMiLCJ1bmRlZmluZWQiLCJyZXNwb25zZSIsImZldGNoIiwic3RhdHVzIiwic3RhcnR1cCIsInNlcmlhbGl6ZWRRdWV1ZURhdGEiLCJhdG9iIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInF1ZXVlRGF0YSIsIkpTT04iLCJwYXJzZSIsInJ1bnRpbWUiLCJleHRlbnNpb25Mb2ciLCJzZW5kZXIiLCJtZXNzYWdlIiwibGV2ZWwiLCJvdXRwdXQiLCJEYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsInN1YnN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJkZWJ1ZyIsIndhcm4iLCJlcnJvciIsInNlbmRNZXNzYWdlVG9CYWNrZ3JvdW5kIiwic2VsZiIsImhhbmRsZXIiLCJhcmdzIiwicmVxdWVzdCIsImJyb3dzZXIiLCJzZW5kTWVzc2FnZSIsIm1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMiLCJoYW5kbGVycyIsInZhbGlkU2VuZGVycyIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwicGF5bG9hZCIsImluY2x1ZGVzIiwic3RyaW5naWZ5IiwicmVzdWx0IiwiZXJyb3JNZXNzYWdlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiU3ltYm9sIiwicXVldWUiLCJmb3JFYWNoIiwiZm4iLCJyIiwicHVzaCIsImEiLCJib2R5IiwiaGFzQXdhaXQiLCJjdXJyZW50RGVwcyIsIm91dGVyUmVzb2x2ZSIsInJlamVjdCIsImlzRXZhbHVhdGluZyIsIm5lc3RlZCIsIndoZW5BbGwiLCJkZXBzIiwib25SZXNvbHZlIiwib25SZWplY3QiLCJsZW5ndGgiLCJtYXAiLCJkZXAiLCJpIiwicHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqIiwicmVqZWN0Rm4iLCJjYXRjaCIsInRoZW4iLCJvYmoiLCJyZXQiLCJ3cmFwRGVwcyIsImQiLCJPIiwiY2h1bmtJZHMiLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiZnVsZmlsbGVkIiwiaiIsIk9iamVjdCIsImtleXMiLCJldmVyeSIsImtleSIsInNwbGljZSIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93IiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwic29tZSIsImlkIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwiYmluZCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9
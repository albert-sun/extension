(()=>{"use strict";var e,t={38:(e,t,a)=>{a.d(t,{Z:()=>E});var i=a(234),o=a(655),s=a(568),r=a(261);const n={bestbuy:"https://*.bestbuy.com/*"};function d(e,t,a="info"){const i=`[${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).substring(0,8)}]\t\t(${e})\t\t${t}`;"info"===a?console.log(i):"debug"===a?console.debug(i):"warn"===a?console.warn(i):"error"===a&&console.error(i)}async function c(e,t){const a=await async function(e,t){const a=await browser.storage.local.get(e);return void 0===a[e]&&(a[e]=t),a[e]}(e,t),i=(0,r.fZ)(a);return browser.runtime.onMessage.addListener((async(t,a)=>{const o=t;if("update-set"===o.handler){const[t,a,s]=o.args;t===e&&i.update((e=>(e[a]=s,e)))}else if("update-delete"===o.handler){const[t,a]=o.args;t===e&&i.update((e=>(delete e[a],e)))}})),{store:i,set:(t,a)=>{i.update((e=>(e[t]=a,e))),browser.storage.local.set({[e]:(0,r.U2)(i)}),u("update-set",[e,t,a])},del:t=>{i.update((e=>(delete e[t],e))),browser.storage.local.set({[e]:(0,r.U2)(i)}),u("update-del",[e,t])}}}async function u(e,t=[]){const a={handler:e,args:t},i=await async function(e){return await new Promise((t=>{browser.runtime.sendMessage(e).then((e=>t(e))).catch((e=>t(e.message)))}))}(a);return i}function l(e,t,a){browser.runtime.onMessage.addListener((async(a,i)=>{const o=a;let s={result:"success",payload:{value:void 0}};const r=t[o.handler];if(void 0!==r){d(e,`Processing handler ${o.handler} with arguments ${JSON.stringify(o.args)}`);try{const e=await r(...o.args||[]);s.result="okay",s.payload=e}catch(t){const a=t.message;s.result="error",s.payload.value=a,d(e,`Error processing handler ${o.handler}: ${a}`,"error")}}return s}))}function G(e){return new Promise((t=>setTimeout(t,e)))}function p(e){const t=e.split("-"),a=t.map((e=>parseInt(e,16)));return 1e3*parseInt(t[2]+t[3],16)/a[1]}function T(e,t=!1){let a=!1;e<0&&(e*=-1,a=!0);const i=e/1e3;let o=Math.floor(i/60),s=i%60;return!0===t&&(o=Math.floor(o),s=Math.floor(s)),[o,s,a]}(0,r.fZ)([]);const y={global:{display:"Global Settings",description:"Note that pop-up notifications can obscure the screen and forcefully change window focus when clicked - don't enable notifications if you're playing games!",settings:{autoOpenTab:{display:"Automatically open tab when script not detected",default:!0},playNotifications:{display:"Play notification sounds on events",default:!0},notificationError:{display:"Show desktop notification on extension error",default:!0},durationNotification:{display:"Notification popup duration before clearing",default:5e3,args:{suffix:"ms"}}}},bestbuy:{display:"Best Buy Settings",description:"Note that pop-up notifications can obscure the screen and forcefully change window focus when clicked - don't enable notifications if you're playing games!",settings:{autoAddQueue:{display:"Automatically execute queue add-to-cart when finished",default:!0},autoReload:{display:"Automatically reload tab on potential rate-limit (403/500)",default:!0},replaceQueue:{display:"Maintain shortest instead of multiple queues per SKU",default:!0},requeueSuccess:{display:"Re-queue with response queue on successful add-to-cart",default:!0},notificationSuccess:{display:"Show desktop notification on successful add-to-cart",default:!0},notificationFailure:{display:"Show desktop notification on failed add-to-cart",default:!0},notificationQueue:{display:"Show desktop notification on new queue interception",default:!0},notificationRateLimit:{display:"Show desktop notification on potential rate-limit (403/500)",default:!0}}}},f=Object.entries({"gtx-16":{display:"[Graphics] GeForce GTX 16-Series",items:[{display:"ASUS GeForce GTX 1660 SUPER TUF GAMING OC",data:"6405063"},{display:"EVGA GeForce GTX 1650 SUPER SC ULTRA GAMING",data:"6412939"},{display:"EVGA GeForce GTX 1660Ti SC ULTRA GAMING",data:"6373500"},{display:"MSI GeForce GTX 1650 SUPER GAMING X",data:"6397798"},{display:"MSI GeForce GTX 1660 SUPER GAMING X",data:"6389333"},{display:"MSI GeForce GTX 1660Ti GAMING X",data:"6330461"},{display:"PNY GeForce GTX 1650 SUPER XLR8 GAMING OC",data:"6407305"},{display:"PNY GeForce GTX 1660 SUPER XLR8 GAMING OC",data:"6407309"}]},"rtx-3060":{display:"[Graphics] GeForce RTX 3060",items:[{display:"ASUS GeForce RTX 3060 STRIX",data:"6460665"},{display:"ASUS GeForce RTX 3060 STRIX (LHR)",data:"6475224"},{display:"ASUS GeForce RTX 3060 TUF GAMING",data:"6460666"},{display:"ASUS GeForce RTX 3060 TUF GAMING (LHR)",data:"6475223"},{display:"EVGA GeForce RTX 3060 XC GAMING (KB)",data:"6454329"},{display:"EVGA GeForce RTX 3060 XC GAMING (KR)",data:"6454328"},{display:"GIGABYTE GeForce RTX 3060 AORUS ELITE",data:"6468910"},{display:"GIGABYTE GeForce RTX 3060 EAGLE OC",data:"6454689"},{display:"GIGABYTE GeForce RTX 3060 EAGLE OC (LHR)",data:"6468928"},{display:"GIGABYTE GeForce RTX 3060 GAMING OC",data:"6454688"},{display:"GIGABYTE GeForce RTX 3060 GAMING OC (LHR)",data:"6468931"},{display:"GIGABYTE GeForce RTX 3060 VISION OC",data:"6468925"},{display:"MSI GeForce RTX 3060 GAMING X OC",data:"6476229"},{display:"MSI GeForce RTX 3060 VENTUS 2X OC",data:"6462173"},{display:"MSI GeForce RTX 3060 VENTUS 3X OC",data:"6452940"},{display:"PNY GeForce RTX 3060 XLR8 GAMING REVEL EPIC-X",data:"6454318"}]},"rtx-3060ti":{display:"[Graphics] GeForce RTX 3060Ti",items:[{display:"ASUS GeForce RTX 3060Ti TUF GAMING",data:"6475237"},{display:"ASUS GeForce RTX 3060Ti TUF GAMING",data:"6452573"},{display:"EVGA GeForce RTX 3060Ti FTW3 GAMING (KB)",data:"6444444"},{display:"EVGA GeForce RTX 3060Ti FTW3 GAMING (KH, LHR)",data:"6479524"},{display:"GIGABYTE GeForce RTX 3060Ti AORUS EAGLE (LHR)",data:"6479686"},{display:"GIGABYTE GeForce RTX 3060Ti EAGLE OC",data:"6442485"},{display:"GIGABYTE GeForce RTX 3060Ti EAGLE OC (LHR)",data:"6471951"},{display:"GIGABYTE GeForce RTX 3060Ti GAMING OC",data:"6471952"},{display:"GIGABYTE GeForce RTX 3060Ti GAMING OC (LHR)",data:"6479688"},{display:"GIGABYTE GeForce RTX 3060Ti GAMING OC (LHR V2)",data:"6442484"},{display:"MSI GeForce RTX 3060Ti GAMING X",data:"6480291"},{display:"MSI GeForce RTX 3060Ti GAMING Z",data:"6476230"},{display:"MSI GeForce RTX 3060Ti VENTUS 2X OC",data:"6441172"},{display:"MSI GeForce RTX 3060Ti VENTUS 2X OC (LHR)",data:"6471286"},{display:"MSI GeForce RTX 3060Ti VENTUS 3X OC",data:"6480307"},{display:"NVIDIA GeForce RTX 3060Ti FOUNDERS",data:"6439402"}]},"rtx-3070":{display:"[Graphics] GeForce RTX 3070",items:[{display:"ASUS GeForce RTX 3070 STRIX",data:"6439127"},{display:"ASUS GeForce RTX 3070 STRIX (LHR)",data:"6475228"},{display:"ASUS GeForce RTX 3070 TUF GAMING",data:"6439128"},{display:"ASUS GeForce RTX 3070 TUF GAMING (LHR)",data:"6475226"},{display:"EVGA GeForce RTX 3070 XC3 ULTRA GAMING (KL, LHR)",data:"6479528"},{display:"EVGA GeForce RTX 3070 XC3 ULTRA GAMING (KH, LHR)",data:"6477077"},{display:"EVGA GeForce RTX 3070 XC3 ULTRA GAMING (KB)",data:"6439299"},{display:"GIGABYTE GeForce RTX 3070 AORUS MASTER",data:"6439384"},{display:"GIGABYTE GeForce RTX 3070 AORUS MASTER (LHR)",data:"6479685"},{display:"GIGABYTE GeForce RTX 3070 EAGLE",data:"6437912"},{display:"GIGABYTE GeForce RTX 3070 EAGLE OC (LHR)",data:"6471958"},{display:"GIGABYTE GeForce RTX 3070 GAMING OC",data:"6437909"},{display:"GIGABYTE GeForce RTX 3070 VISION OC",data:"6439385"},{display:"MSI GeForce RTX 3070 GAMING Z TRIO",data:"6471285"},{display:"MSI GeForce RTX 3070 VENTUS 2X OC",data:"6462266"},{display:"MSI GeForce RTX 3070 VENTUS 2X OC (LHR)",data:"6480308"},{display:"MSI GeForce RTX 3070 VENTUS 3X OC",data:"6438278"},{display:"MSI GeForce RTX 3070 GAMING X TRIO",data:"6438279"},{display:"NVIDIA GeForce RTX 3070 FOUNDERS",data:"6429442"}]},"rtx-3070ti":{display:"[Graphics] GeForce RTX 3070Ti",items:[{display:"ASUS GeForce RTX 3070Ti STRIX",data:"6467838"},{display:"ASUS GeForce RTX 3070Ti TUF GAMING",data:"6467840"},{display:"GIGABYTE GeForce RTX 3070Ti AORUS MASTER",data:"6467788"},{display:"GIGABYTE GeForce RTX 3070Ti GAMING OC",data:"6467779"},{display:"GIGABYTE GeForce RTX 3070Ti EAGLE",data:"6467782"},{display:"GIGABYTE GeForce RTX 3070Ti EAGLE OC",data:"6467781"},{display:"GIGABYTE GeForce RTX 3070Ti VISION OC",data:"6467785"},{display:"MSI GeForce RTX 3070Ti GAMING X TRIO",data:"6467497"},{display:"MSI GeForce RTX 3070Ti VENTUS 3X OC",data:"6467500"},{display:"NVIDIA GeForce RTX 3070Ti FOUNDERS",data:"6465789"}]},"rtx-3080":{display:"[Graphics] GeForce RTX 3080",items:[{display:"ASUS GeForce RTX 3080 STRIX",data:"6432445"},{display:"ASUS GeForce RTX 3080 STRIX (LHR)",data:"6475238"},{display:"EVGA GeForce RTX 3080 XC3 ULTRA GAMING (KB)",data:"6432400"},{display:"EVGA GeForce RTX 3080 XC3 ULTRA GAMING (KH, LHR)",data:"6471615"},{display:"GIGABYTE GeForce RTX 3080 AORUS MASTER (LHR)",data:"6462198"},{display:"GIGABYTE GeForce RTX 3080 AORUS XTREME",data:"6436223"},{display:"GIGABYTE GeForce RTX 3080 AORUS XTREME (LHR)",data:"6471954"},{display:"GIGABYTE GeForce RTX 3080 EAGLE OC",data:"6430621"},{display:"GIGABYTE GeForce RTX 3080 GAMING OC",data:"6430620"},{display:"GIGABYTE GeForce RTX 3080 GAMING OC (LHR)",data:"6471960"},{display:"GIGABYTE GeForce RTX 3080 VISION OC",data:"6436219"},{display:"GIGABYTE GeForce RTX 3080 VISION OC (LHR)",data:"6471957"},{display:"MSI GeForce RTX 3080 GAMING Z TRIO",data:"6480289"},{display:"MSI GeForce RTX 3080 VENTUS 3X (LHR)",data:"6471287"},{display:"MSI GeForce RTX 3080 VENTUS 3X OC",data:"6430175"},{display:"MSI GeForce RTX 3080 VENTUS 3X PLUS (LHR)",data:"6480306"},{display:"NVIDIA GeForce RTX 3080 FOUNDERS",data:"6429440"}]},"rtx-3080ti":{display:"[Graphics] GeForce RTX 3080Ti",items:[{display:"ASUS GeForce RTX 3080Ti STRIX",data:"6466931"},{display:"ASUS GeForce RTX 3080Ti TUF GAMING",data:"6466932"},{display:"EVGA GeForce RTX 3080Ti FTW3 ULTRA GAMING (KB)",data:"6467808"},{display:"GIGABYTE GeForce RTX 3080Ti AORUS MASTER",data:"6468932"},{display:"GIGABYTE GeForce RTX 3080Ti AORUS XTREME",data:"6468933"},{display:"GIGABYTE GeForce RTX 3080Ti GAMING OC",data:"6466561"},{display:"GIGABYTE GeForce RTX 3080Ti VISION OC",data:"6466564"},{display:"MSI GeForce RTX 3080Ti GAMING X TRIO",data:"6465803"},{display:"MSI GeForce RTX 3080Ti VENTUS 3X OC",data:"6472637"},{display:"NVIDIA GeForce RTX 3080Ti FOUNDERS",data:"6462956"},{display:"PNY GeForce RTX 3080Ti XLR8 GAMING REVEL EPIC-X",data:"6467289"}]},"rtx-3090":{display:"[Graphics] GeForce RTX 3090",items:[{display:"ASUS GeForce RTX 3090 STRIX",data:"6432447"},{display:"ASUS GeForce RTX 3090 TUF GAMING",data:"6432446"},{display:"EVGA GeForce RTX 3090 XC3 ULTRA GAMING (KB)",data:"6434198"},{display:"GIGABYTE GeForce RTX 3090 AORUS MASTER",data:"6437910"},{display:"GIGABYTE GeForce RTX 3090 EAGLE OC",data:"6430624"},{display:"GIGABYTE GeForce RTX 3090 GAMING OC",data:"6430623"},{display:"GIGABYTE GeForce RTX 3090 VISION OC",data:"6445108"},{display:"MSI GeForce RTX 3090 GAMING X TRIO",data:"6468863"},{display:"MSI GeForce RTX 3090 VENTUS 3X OC",data:"SKU: 6472646"},{display:"MSI GeForce RTX 3090 VENTUS 3X OC (?)",data:"6430215"},{display:"NVIDIA GeForce RTX 3090 FOUNDERS",data:"6429434"}]}}).reduce(((e,[t,a])=>Object.assign(Object.assign({},e),Object.entries(a.items).reduce(((e,[t,a])=>(e[a.data]=a.display,e)),{}))),{}),R={handler:"ping",args:[]};a(434),a(374),e=a.hmd(e);const{Error:b,Object:I}=i.lig;function g(e){const t={c:i.ZTd,l:function(e){throw new b("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:i.ZTd,p:i.ZTd,i:i.ZTd,o:i.ZTd,d:i.ZTd};return(0,i.YyZ)("SvelteRegisterBlock",{block:t,id:g.name,type:"component",source:"",ctx:e}),t}const S="background",A="background-bestbuy",X="https://www.bestbuy.com/cart",m="https://www.bestbuy.com/";function h(e,t,a){let r,u,b=i.ZTd,g=()=>(b(),b=(0,i.LdU)(E,(e=>a(6,r=e))),E),h=i.ZTd,F=()=>(h(),h=(0,i.LdU)(M,(e=>a(7,u=e))),M);e.$$.on_destroy.push((()=>b())),e.$$.on_destroy.push((()=>h()));let E,O,M,N,{$$slots:w={},$$scope:v}=t;(0,i.KXV)("Background",w,[]);const U=[];let C,$=!1;function B(e,t,a,i,s){return(0,o.mG)(this,void 0,void 0,(function*(){let o;return!0===u[i[0]][i[1]]&&(o=yield new Promise((e=>{chrome.notifications.create({type:"basic",title:t,message:a,iconUrl:"../resources/icon_512_dark.png",buttons:null==s?void 0:s.map((e=>({title:e})))},(function(t){e(t)}))})),setTimeout((()=>{chrome.notifications.clear(o)}),u.global.durationNotification)),!0===u.global.playNotifications&&new Audio(C[e]).play(),o}))}function q(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return yield new Promise((a=>{browser.tabs.sendMessage(e,t).then((e=>a(e))).catch((e=>a(e.message)))}))}))}function L(e,t=!0){return(0,o.mG)(this,void 0,void 0,(function*(){for(;!0===t;){const t=yield q(e,R);if(void 0!==t&&"string"!=typeof t)break;yield G(u.global.pollingInterval)}}))}function k(){return(0,o.mG)(this,void 0,void 0,(function*(){if(!0!==$){for($=!0;U.length>0;){const e=U.shift(),t={status:"not-found",payload:void 0},a=JSON.stringify(e);d(S,`Executing queued request with body ${a}`);const i=n[null==e?void 0:e.urlMatch],o=yield browser.tabs.query({url:n[null==e?void 0:e.urlMatch],discarded:!1});0===o.length&&(d(S,`Couldn't find matching tabs with glob ${i}, placeholder resolving with undefined`),e.resolve(t));let s=!1;for(const a of o){d(S,`Attempting to ping tab with ID ${a.id} and URL ${a.url}`);const i=yield q(a.id,R);if(void 0===i||"string"==typeof i){d(S,`Error pinging content script: ${i}`);continue}d(S,"Received successful ping response, broadcasting request");const o={handler:e.handler,args:e.args},r=yield q(a.id,o);if(void 0===r||"string"==typeof r)throw new Error(`error communicating after ping: ${r}`);t.status="okay",t.payload=r,void 0!==r.payload.execute?(d(S,`Response received, performing execution handlers ${r.payload.execute}`),r.payload.execute.includes("reload")&&(d(S,`Executing reload for tab with ID ${a.id}`),yield browser.tabs.reload(a.id),yield G(1e3),yield L(a.id)),r.payload.execute.includes("retry")&&(d(S,"Executing retry, re-pushing request to back of queue"),U.push(e),s=!0)):d(S,"Response received, no execution handler necessary");break}if(!0===s)continue;const r=JSON.stringify(t);d(S,`Finished processing queued request, responding with body ${r}`),e.resolve(t)}$=!1}}))}function V(e){return(0,o.mG)(this,void 0,void 0,(function*(){return d(S,"Pushing request to back of queue for streamlined execution"),new Promise((t=>{const a=Object.assign(Object.assign({},e),{resolve:t});U.push(a),k()}))}))}function Y(e,t=!0){return(0,o.mG)(this,void 0,void 0,(function*(){const a=yield browser.tabs.create({active:!1,url:e});!0===t&&(yield L(a.id))}))}function x(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t=(new Date).getTime();for(const[a,i]of Object.entries(e))if(void 0===(r[a]||{})[i[1]]){const[e,o,s]=i,n=p(i[1]),c=e+n-t,[l,G,y]=T(c);if(c>-3e5){const i={startTime:e,a2cTransactionReferenceId:o,a2cTransactionCode:s,queueTime:n},c=r[a]||{};if(!0===u.bestbuy.replaceQueue&&Object.keys(c).length>0){const[e,o,s]=H(c,i,t);d(S,!0===e?`Importing queue for SKU ${a} has ${o}m ${s}s improvement, replacing`:`Importing queue for SKU ${a} worse by ${o}m ${s}s improvement, not replacing`)}else d(S,!1===y?`Importing queue for SKU ${a} with ${l}m ${G}s remaining`:`Importing queue for SKU ${a} already popped for ${l}m ${G}s`);O(a,c)}}}))}function H(e,t,a){const i=Object.entries(e).map((([e,t])=>[t.startTime+t.queueTime-a,e,t]));i.sort(((e,t)=>e[0]-t[0]));const o=i[0][0],s=t.a2cTransactionReferenceId,r=t.startTime+t.queueTime-a;i.push([r,s,t]),i.sort(((e,t)=>e[0]-t[0]));const[n,d,c]=T(o-r,!0),u=i[0][1]===t.a2cTransactionReferenceId;return(e={})[t.a2cTransactionReferenceId]=t,[u,n,d]}function j(e,t,a){return(0,o.mG)(this,void 0,void 0,(function*(){const i={urlMatch:"bestbuy",handler:"process-add_to_cart",args:[e,t,a]};let s,r,n,c,l;for(;;){let e=yield V(i);if("not-found"===e.status){if(!0===u.global.autoOpenTab){d(A,`Matching tab not found, creating new tab with url ${m}`),yield Y(m),d(A,"Tab creation finished, re-broadcasting initial request");continue}{d(A,"Matching tab not found, showing notification and exiting");const e="Best Buy - Tab Not Found",t="Matching tab not found or content script not responding. Open a matching tab or try reloading the page.";return void(void 0!==(yield B("error",e,t,["global","notificationNotFound"]))&&browser.notifications.onButtonClicked.addListener((function(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){0===t&&(yield Y(m,!1))}))})))}}s=e.payload;break}const G=f[e];"okay"===s.result&&(200===s.payload.value?(d(A,`Successfully added ${G} to cart`),r="Best Buy - Successful Cart",n=G,c=["bestbuy","notificationSuccess"],l=["Open cart page"],void 0!==(yield B("success",r,n,c,l))&&browser.notifications.onButtonClicked.addListener((function(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){0===t&&(yield Y(X,!1))}))}))):400===s.payload.value?(d(A,`Failed to cart ${G}, either invaild queue or unavailable`),r="Best Buy - Failed to Cart",n=G,c=["bestbuy","notificationFailure"],yield B("failure",r,n,c)):(d(A,`Error carting ${G} with status ${status}`),r=`Best Buy - Error ${status}`,n=!0===u.bestbuy.autoReload?`Error carting ${G} - possible rate limiting, automatically reloading tab and retrying request`:`Error carting ${G} - possible rate limiting, not automatically reloading tab`,c=["bestbuy","notificationError"],yield B("error",r,n,c)))}))}(0,s.H3)((function(){return(0,o.mG)(this,void 0,void 0,(function*(){C={success:"../resources/notification_success.mp3",failure:"../resources/notification_queue.mp3",queue:"../resources/notification_queue.mp3",error:"../resources/notification_ratelimit.mp3"},F(a(1,({store:M,set:N}=yield c("settings",{})),M));for(const[e,t]of Object.entries(y)){const a=u[e];if(void 0!==u[e]){let i=!1;for(const[e,o]of Object.entries(t.settings)){const t=a[e];void 0!==t&&typeof t==typeof o||(a[e]=o.default,i=!0)}!0===i&&N(e,a)}else N(e,t)}g(a(0,({store:E,set:O}=yield c("queues",{})),E));let e=0;for(const[t,a]of Object.entries(r))e+=Object.keys(a).length;d(A,`Startup routine, retrieved and tracking ${e} existing queues from storage`);const t=new Set;setInterval((function(){return(0,o.mG)(this,void 0,void 0,(function*(){const e=(new Date).getTime();for(const[a,i]of Object.entries(r))for(const[o,s]of Object.entries(i)){const r=s.startTime+s.queueTime-e;r<=0&&(r>-3e5?!0===u.bestbuy.autoAddQueue&&!1===t.has(s.a2cTransactionReferenceId)?(d("background-bestbuy",`Queue popped for SKU ${a}, broadcasting add-to-cart request`),t.add(s.a2cTransactionReferenceId),yield j(a,s.a2cTransactionReferenceId,s.a2cTransactionCode)):d("background-bestbuy",`Queue popped for SKU ${a}, waiting for manual because of setting`):(d("background-bestbuy",`Queue popped but expired for ${a}, silently deleting`),t.delete(s.a2cTransactionReferenceId),delete i[o],O(a,i)))}}))}),1e3);const i={};chrome.webRequest.onBeforeRequest.addListener((function(e){if(void 0!==e.requestBody){const t=decodeURIComponent(String.fromCharCode.apply(null,new Uint8Array(e.requestBody.raw[0].bytes))),a=JSON.parse(t);i[e.requestId]=a;const o=a.items.map((e=>e.skuId)),s=JSON.stringify(o);d("background-bestbuy",`[webRequest.onBeforeRequest] Finished caching POST body for request ${e.requestId} with SKU(s) ${s}`,"debug")}}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["requestBody","blocking"]),chrome.webRequest.onBeforeSendHeaders.addListener((function(e){void 0!==i[e.requestId]||d("background-bestbuy",`[webRequest.onBeforeSendHeaders] Couldn't find cached POST body for request ${e.requestId}`,"error")}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["requestHeaders","blocking"]),chrome.webRequest.onHeadersReceived.addListener((function(e){var t;let a="",o="";for(const t of e.responseHeaders||[])"a2ctransactionreferenceid"===t.name?a=t.value:"a2ctransactioncode"===t.name&&(o=t.value);if((200!==e.statusCode||!0===u.bestbuy.requeueSuccess)&&""!==a&&""!==o){const s=i[e.requestId];if(void 0===s)return void d("background-bestbuy",`[webRequest.onHeadersReceived] Couldn't find cached POST body for request ${e.requestId}`,"error");const n=null===(t=s.items[0])||void 0===t?void 0:t.skuId,c=(new Date).getTime(),l=p(o),[G,y]=T(l),R={startTime:c,a2cTransactionReferenceId:a,a2cTransactionCode:o,queueTime:l};d("background-bestbuy",`[webRequest.onHeadersReceived] Queue response headers detected for request ${e.requestId} with time ${G}m ${y}s`);let b="";const I=f[n];let g=r[n]||{};if(!0===u.bestbuy.replaceQueue&&Object.keys(g).length>0){const[e,t,a]=H(g,R,c);b=!0===e?`[${I}] Queue replacement enabled, replacing with ${t}m ${a}s improvement`:`[${I}] Queue replacement enabled, not replacing because ${t}m ${a}s worse`}else b=`[${I}] Intercepted new queue with timer ${G}m ${y}s`,g[a]=R;O(n,g),B("queue","Best Buy - Queue Intercepted",b,["bestbuy","notificationQueue"])}delete i[e.requestId]}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["responseHeaders","blocking"]),l(S,{"add-request":V,"create-tab-ready":Y,"sound-notification":B,"get-bestbuy-product_queues"(){return(0,o.mG)(this,void 0,void 0,(function*(){return r}))},"merge-product_queues":x,"process-add_to_cart":j})}))}));const P=[];return I.keys(t).forEach((e=>{~P.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Background> was created with unknown prop '${e}'`)})),e.$capture_state=()=>({__awaiter:o.mG,onMount:s.H3,decodeQueue:p,minutesSeconds:T,bestBuyDisplays:f,settingLabels:y,pingRequest:R,domainMatches:n,extensionLog:d,initializeStore:c,messageProcessHandlers:l,sleep:G,queues:E,setQueues:O,settings:M,setSettings:N,backgroundSelf:S,queuedRequests:U,executing:$,notifications:C,bestBuySelf:A,bestBuyCartURL:X,bestBuyTabURL:m,soundNotification:B,sendMessageTab:q,pingTabReady:L,performStreamlinedRequests:k,addStreamlinedRequest:V,createTabReady:Y,mergeProductQueues:x,updateReplaceQueues:H,processAddToCart:j,$queues:r,$settings:u}),e.$inject_state=e=>{"queues"in e&&g(a(0,E=e.queues)),"setQueues"in e&&(O=e.setQueues),"settings"in e&&F(a(1,M=e.settings)),"setSettings"in e&&(N=e.setSettings),"executing"in e&&($=e.executing),"notifications"in e&&(C=e.notifications)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[E,M]}class F extends i.Mjb{constructor(e){super(e),(0,i.S1n)(this,e,h,g,i.N8,{}),(0,i.YyZ)("SvelteRegisterComponent",{component:this,tagName:"Background",options:e,id:g.name})}}e&&e.hot;const E=F},650:(e,t,a)=>{new(a(38).Z)({target:document.body,props:{}})}},a={};function i(e){var o=a[e];if(void 0!==o)return o.exports;var s=a[e]={id:e,loaded:!1,exports:{}};return t[e](s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=(t,a,o,s)=>{if(!a){var r=1/0;for(u=0;u<e.length;u++){for(var[a,o,s]=e[u],n=!0,d=0;d<a.length;d++)(!1&s||r>=s)&&Object.keys(i.O).every((e=>i.O[e](a[d])))?a.splice(d--,1):(n=!1,s<r&&(r=s));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,o,s]},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.j=979,(()=>{var e={979:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var o,s,[r,n,d]=a,c=0;if(r.some((t=>0!==e[t]))){for(o in n)i.o(n,o)&&(i.m[o]=n[o]);if(d)var u=d(i)}for(t&&t(a);c<r.length;c++)s=r[c],i.o(e,s)&&e[s]&&e[s][0](),e[r[c]]=0;return i.O(u)},a=self.webpackChunkakitos_automated_utilities=self.webpackChunkakitos_automated_utilities||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=i.O(void 0,[154],(()=>i(650)));o=i.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxHQ0FsRnRDLEVBQW9Ca0IsRUFBSSxJLE1DS3hCLElBQUl3QixFQUFrQixDQUNyQixJQUFLLEdBYU4xQyxFQUFvQlMsRUFBRVMsRUFBS3lCLEdBQTBDLElBQTdCRCxFQUFnQkMsR0FHeEQsSUFBSUMsRUFBdUIsQ0FBQ0MsRUFBNEJwRCxLQUN2RCxJQUdJUSxFQUFVMEMsR0FIVGpDLEVBQVVvQyxFQUFheEgsR0FBV21FLEVBR2hCc0IsRUFBSSxFQUMzQixHQUFHTCxFQUFTcUMsTUFBTTFDLEdBQWdDLElBQXhCcUMsRUFBZ0JyQyxLQUFhLENBQ3RELElBQUlKLEtBQVk2QyxFQUNaOUMsRUFBb0J5QixFQUFFcUIsRUFBYTdDLEtBQ3JDRCxFQUFvQlEsRUFBRVAsR0FBWTZDLEVBQVk3QyxJQUdoRCxHQUFHM0UsRUFBUyxJQUFJMEIsRUFBUzFCLEVBQVEwRSxHQUdsQyxJQURHNkMsR0FBNEJBLEVBQTJCcEQsR0FDckRzQixFQUFJTCxFQUFTTSxPQUFRRCxJQUN6QjRCLEVBQVVqQyxFQUFTSyxHQUNoQmYsRUFBb0J5QixFQUFFaUIsRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCaEMsRUFBU0ssSUFBTSxFQUVoQyxPQUFPZixFQUFvQlMsRUFBRXpELElBRzFCZ0csRUFBcUJDLEtBQTZDLHVDQUFJQSxLQUE2Qyx3Q0FBSyxHQUM1SEQsRUFBbUJFLFFBQVFOLEVBQXFCTyxLQUFLLEtBQU0sSUFDM0RILEVBQW1CSSxLQUFPUixFQUFxQk8sS0FBSyxLQUFNSCxFQUFtQkksS0FBS0QsS0FBS0gsSyxHQzdDdkYsSUFBSUssRUFBc0JyRCxFQUFvQlMsT0FBRXRGLEVBQVcsQ0FBQyxNQUFNLElBQU82RSxFQUFvQixPQUM3RnFELEVBQXNCckQsRUFBb0JTLEVBQUU0QyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy8uL3NvdXJjZS9zaGFyZWQvdXRpbGl0aWVzLnRzIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzLy4vc291cmNlL3NoYXJlZC9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvLi9zb3VyY2Uvc2hhcmVkL3R5cGVzX25ldy50cyIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy8uL3NvdXJjZS9iYWNrZ3JvdW5kL2JhY2tncm91bmQudHMiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2hhcm1vbnkgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9ydW50aW1lSWQiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHZhciByID0gZm4oKTtcblx0XHRcdGlmIChyICE9PSB1bmRlZmluZWQpIHJlc3VsdCA9IHI7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsImltcG9ydCB7IGdldCwgd3JpdGFibGUgfSBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zdG9yZVwiO1xyXG5leHBvcnQgY29uc3QgZG9tYWluTWF0Y2hlcyA9IHtcclxuICAgIFwiYmVzdGJ1eVwiOiBcImh0dHBzOi8vKi5iZXN0YnV5LmNvbS8qXCIsXHJcbn07IC8vIERvbWFpbiBtYXRjaGVzIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGZyb20gYmFja2dyb3VuZCBvciBleHRlbnNpb25cclxuLy8gU29tZXdoYXQgZmFuY3kgbG9nZ2luZyBmcm9tIGV4dGVuc2lvbiBiYWNrZ3JvdW5kXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbnNpb25Mb2coc2VuZGVyLCBtZXNzYWdlLCBsZXZlbCA9IFwiaW5mb1wiKSB7XHJcbiAgICAvLyBHZW5lcmF0ZSB0aW1lc3RtYXAgZm9yIGxvZ2dpbmcgaW4gMjQtaG91ciBISDpNTTpTUyBmb3JtYXRcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IChuZXcgRGF0ZSgpKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUdCJywge1xyXG4gICAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxyXG4gICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXHJcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcclxuICAgIH0pLnN1YnN0cmluZygwLCA4KTtcclxuICAgIC8vIExvZyBvciBlcnJvciB0byBjb25zb2xlIChjdXJyZW50bHkgd2l0aG91dCBmb3JtYXR0aW5nKVxyXG4gICAgY29uc3Qgb3V0cHV0ID0gYFske3RpbWVzdGFtcH1dXFx0XFx0KCR7c2VuZGVyfSlcXHRcXHQke21lc3NhZ2V9YDtcclxuICAgIGlmIChsZXZlbCA9PT0gXCJpbmZvXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZGVidWdcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcob3V0cHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5cIikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3Iob3V0cHV0KTtcclxuICAgIH1cclxufVxyXG4vLyBJbml0aWFsaXplIHdyaXRhYmxlIHN0b3JlIGZyb20gU3RvcmFnZSBBUEkgYW5kIG1haW50YWluIHZhbHVlIHVzaW5nIHN1YnNjcmlwdGlvbnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTdG9yZShrZXksIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSB3cml0YWJsZSBzdG9yZSBmcm9tIHN0b3JhZ2UgdmFsdWVcclxuICAgIGNvbnN0IHN0b3JhZ2VWYWx1ZSA9IGF3YWl0IHN0b3JhZ2VHZXQoa2V5LCBkZWZhdWx0VmFsdWUpO1xyXG4gICAgY29uc3Qgc3RvcmUgPSB3cml0YWJsZShzdG9yYWdlVmFsdWUpO1xyXG4gICAgLy8gSW5zdGFudGlhdGUgc2V0dGVyIGFuZCBnZXR0ZXIgZm9yIGJyb2FkY2FzdGluZyB1cGRhdGVzXHJcbiAgICAvLyBBc3N1bWUgdGhhdCBib3RoIGtleSBhbmQgdmFsdWUgYXJlIGluZGV4YWJsZSBieSBzdHJpbmdcclxuICAgIGNvbnN0IHNldCA9IChzZXRLZXksIHNldFZhbHVlKSA9PiB7XHJcbiAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgdmFsdWVbc2V0S2V5XSA9IHNldFZhbHVlOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgIGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoeyBba2V5XTogZ2V0KHN0b3JlKSB9KTtcclxuICAgICAgICBzZW5kUmVxdWVzdEJhY2tncm91bmQoXCJ1cGRhdGUtc2V0XCIsIFtrZXksIHNldEtleSwgc2V0VmFsdWVdKTtcclxuICAgIH07IC8vIFNldHRlciB0byBicm9hZGNhc3Qga2V5IHNldCB1cGRhdGVcclxuICAgIGNvbnN0IGRlbCA9IChkZWxLZXkpID0+IHtcclxuICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyBkZWxldGUgdmFsdWVbZGVsS2V5XTsgcmV0dXJuIHZhbHVlOyB9KTtcclxuICAgICAgICBicm93c2VyLnN0b3JhZ2UubG9jYWwuc2V0KHsgW2tleV06IGdldChzdG9yZSkgfSk7XHJcbiAgICAgICAgc2VuZFJlcXVlc3RCYWNrZ3JvdW5kKFwidXBkYXRlLWRlbFwiLCBba2V5LCBkZWxLZXldKTtcclxuICAgIH07IC8vIERlbGV0ZXIgdG8gYnJvYWRjYXN0IGtleSBkZWxldGUgdXBkYXRlXHJcbiAgICAvLyBBdHRhY2ggYWRkaXRpb25hbCBtZXNzYWdlIGxpc3RlbmVyIHRvIGxpc3RlbiBmb3IgdXBkYXRlc1xyXG4gICAgYnJvd3Nlci5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihhc3luYyAobWVzc2FnZSwgc2VuZGVyKSA9PiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBrZXkgbWF0Y2hlcyBhbmQgcGVyZm9ybSB1cGRhdGUgb3IgZGVsZXRpb25cclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbWVzc2FnZTtcclxuICAgICAgICBpZiAocmVxdWVzdC5oYW5kbGVyID09PSBcInVwZGF0ZS1zZXRcIikge1xyXG4gICAgICAgICAgICAvLyBEZWNvbnN0cnVjdCBhcmd1bWVudHMgYW5kIHNldC9yZXBsYWNlIGtleSBpbiBzdG9yZVxyXG4gICAgICAgICAgICBjb25zdCBbc3RvcmVLZXksIHNldEtleSwgc2V0VmFsdWVdID0gcmVxdWVzdC5hcmdzO1xyXG4gICAgICAgICAgICBpZiAoc3RvcmVLZXkgPT09IGtleSkgeyAvLyBFbnN1cmUga2V5IG1hdGNoZXMgYmVmb3JlIHNldHRpbmdcclxuICAgICAgICAgICAgICAgIC8vIERPIE5PVCB1c2Ugc2V0dGVyLCBvdGhlcndpc2UgdXBkYXRlIGJyb2FkY2FzdHMgaW4gbG9vcFxyXG4gICAgICAgICAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgdmFsdWVbc2V0S2V5XSA9IHNldFZhbHVlOyByZXR1cm4gdmFsdWU7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHJlcXVlc3QuaGFuZGxlciA9PT0gXCJ1cGRhdGUtZGVsZXRlXCIpIHtcclxuICAgICAgICAgICAgLy8gRGVjb25zdHJ1Y3QgYXJndW1lbnRzIGFuZCBkZWxldGUga2V5IGZyb20gc3RvcmVcclxuICAgICAgICAgICAgY29uc3QgW3N0b3JlS2V5LCBkZWxLZXldID0gcmVxdWVzdC5hcmdzO1xyXG4gICAgICAgICAgICBpZiAoc3RvcmVLZXkgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRE8gTk9UIHVzZSBkZWxldGVyLCBvdGhlcndpc2UgdXBkYXRlIGJyb2FkY2FzdHMgaW4gbG9vcFxyXG4gICAgICAgICAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgZGVsZXRlIHZhbHVlW2RlbEtleV07IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB7IHN0b3JlLCBzZXQsIGRlbCB9O1xyXG59XHJcbi8vIFJlc29sdmUvcmVqZWN0IHdyYXBwZXIgZm9yIHNlbmRpbmcgbWVzc2FnZXMgdG8gYmFja2dyb3VuZFxyXG4vLyBDdXJyZW50bHkgZG9lc24ndCBpbXBsZW1lbnQgdGltZW91dCBidXQgbWF5YmUgbGF0ZXI/XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlQmFja2dyb3VuZChyZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBicm93c2VyLnJ1bnRpbWUuc2VuZE1lc3NhZ2UocmVxdWVzdClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzb2x2ZShyZXNwb25zZSkpIC8vIFN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHJlc29sdmUoZXJyb3IubWVzc2FnZSkpOyAvLyBGYWlsZWQsIG5vIGxpbmtcclxuICAgIH0pO1xyXG59XHJcbi8vIEluaXRpYWxpemVzIHdyYXBwZXIgZm9yIHNlbmRpbmcgbWVzc2FnZXMgZnJvbSBjb250ZW50IHNjcmlwdCB3aXRoIGtleSBhbmQgcGFyYW1zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUmVxdWVzdEJhY2tncm91bmQoaGFuZGxlciwgYXJncyA9IFtdKSB7XHJcbiAgICAvLyBDb25zdHJ1Y3QgcmVxdWVzdCBmcm9tIHBhcmFtZXRlcnNcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgaGFuZGxlciwgYXJncyxcclxuICAgIH07XHJcbiAgICAvLyBTZW5kIG1lc3NhZ2UgYW5kIHdhaXQgZm9yIHJlc3BvbnNlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRNZXNzYWdlQmFja2dyb3VuZChyZXF1ZXN0KTtcclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG47XHJcbi8vIEluaXRpYWxpemVzIG1lc3NhZ2UgcmVjZWl2aW5nIGZvciBnaXZlbiBjb250ZW50IHNjcmlwdCB3aXRoIGtleSBhbmQgaGFuZGxlcnNcclxuZXhwb3J0IGZ1bmN0aW9uIG1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMoY29udGVudEtleSwgaGFuZGxlcnMsIHZhbGlkU2VuZGVycykge1xyXG4gICAgLy8gU2V0dXAgbGlzdGVuZXIgZm9yIHNub29waW5nIG1lc3NhZ2VzIGFuZCBleGVjdXRpbmcgbWF0Y2hpbmcgaGFuZGxlcnNcclxuICAgIGJyb3dzZXIucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoYXN5bmMgKG1lc3NhZ2UsIHNlbmRlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBtZXNzYWdlO1xyXG4gICAgICAgIGxldCByZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgcmVzdWx0OiBcInN1Y2Nlc3NcIixcclxuICAgICAgICAgICAgcGF5bG9hZDoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9OyAvLyBQbGFjZWhvbGRlciByZXNwb25zZSBiZWZvcmUgY29uc3RydWN0aW9uXHJcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBoYW5kbGVyIGV4aXN0cywgbWVzc2FnZXMgYXJlIHRhcmdldGVkXHJcbiAgICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW3JlcXVlc3QuaGFuZGxlcl07XHJcbiAgICAgICAgaWYgKGhhbmRsZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBleHRlbnNpb25Mb2coY29udGVudEtleSwgYFByb2Nlc3NpbmcgaGFuZGxlciAke3JlcXVlc3QuaGFuZGxlcn0gd2l0aCBhcmd1bWVudHMgJHtKU09OLnN0cmluZ2lmeShyZXF1ZXN0LmFyZ3MpfWApO1xyXG4gICAgICAgICAgICAvLyBIYW5kbGVyIGV4aXN0cywgYXR0ZW1wdCB0byBleGVjdXRlXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgaGFuZGxlciguLi5yZXF1ZXN0LmFyZ3MgfHwgW10pO1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0ID0gXCJva2F5XCI7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5wYXlsb2FkID0gcGF5bG9hZDsgLy8gTm9uLXNlcmlhbGl6ZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5yZXN1bHQgPSBcImVycm9yXCI7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5wYXlsb2FkLnZhbHVlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGNvbnRlbnRLZXksIGBFcnJvciBwcm9jZXNzaW5nIGhhbmRsZXIgJHtyZXF1ZXN0LmhhbmRsZXJ9OiAke2Vycm9yTWVzc2FnZX1gLCBcImVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgIH0pO1xyXG59XHJcbi8vIFJldHJpZXZlIHZhbHVlIHdpdGggZ2l2ZW4ga2V5IGZyb20gU3RvcmFnZSBBUElcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0b3JhZ2VHZXQoa2V5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIC8vIFJldHJpZXZlIGZyb20gc3RvcmFnZSBhbmQgXCJvdmVyd3JpdGVcIiB3aXRoIGRlZmF1bHQgaWYgbm90IGZvdW5kXHJcbiAgICBjb25zdCBzdG9yYWdlQ29udGVudCA9IGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoa2V5KTtcclxuICAgIGlmIChzdG9yYWdlQ29udGVudFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBzdG9yYWdlQ29udGVudFtrZXldID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0b3JhZ2VDb250ZW50W2tleV07XHJcbn1cclxuLy8gU3RvcmUgd2l0aCB0aGUgZ2l2ZW4ga2V5IHRoZSB2YWx1ZSB0aHJvdWdoIHRoZSBTdG9yYWdlIEFQSVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmFnZVNldChrZXksIHZhbHVlKSB7XHJcbiAgICAvLyBTdG9yZSB1c2luZyB0aGUgZ2l2ZW4ga2V5IGFuZCB2YWx1ZVxyXG4gICAgYXdhaXQgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiB2YWx1ZSB9KTtcclxufVxyXG4vLyBPcGVucyBVUkwgaW5zdGVhZCBvZiB1c2luZyBocmVmIGF0dHJpYnV0ZSBmb3IgYW5jaG9yXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuUGFnZSh1cmwsIGFjdGl2ZSA9IGZhbHNlKSB7XHJcbiAgICBicm93c2VyLnRhYnMuY3JlYXRlKHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBhY3RpdmU6IGFjdGl2ZSxcclxuICAgIH0pO1xyXG59XHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzk1MTAyMS93aGF0LWlzLXRoZS1qYXZhc2NyaXB0LXZlcnNpb24tb2Ytc2xlZXBcclxuZXhwb3J0IGZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjQ1NTg0NDIvaXMtdGhlcmUtc29tZXRoaW5nLWxpa2UtZ2xvYi1idXQtZm9yLXVybHMtaW4tamF2YXNjcmlwdFxyXG5leHBvcnQgZnVuY3Rpb24gdXJsR2xvYihwYXR0ZXJuLCBpbnB1dCkge1xyXG4gICAgdmFyIHJlID0gbmV3IFJlZ0V4cChwYXR0ZXJuLnJlcGxhY2UoLyhbLj8rXiRbXFxdXFxcXCgpe318XFwvLV0pL2csIFwiXFxcXCQxXCIpLnJlcGxhY2UoL1xcKi9nLCAnLionKSk7XHJcbiAgICByZXR1cm4gcmUudGVzdChpbnB1dCk7XHJcbn1cclxuLy8gRGVjb2RlcyB0aGUgcXVldWUgY29kZSB0byB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xyXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlUXVldWUocXVldWVDb2RlKSB7XHJcbiAgICBjb25zdCBzcGxpdENvZGUgPSBxdWV1ZUNvZGUuc3BsaXQoXCItXCIpO1xyXG4gICAgY29uc3QgcGFyc2VkQ29kZSA9IHNwbGl0Q29kZS5tYXAoY2h1bmsgPT4gcGFyc2VJbnQoY2h1bmssIDE2KSk7XHJcbiAgICAvLyBpZihwYXJzZWRDb2RlWzFdICogcGFyc2VkQ29kZVsyXSAqIHBhcnNlZENvZGVbM10gPT09IHBhcnNlZENvZGVbNF0pXHJcbiAgICBjb25zdCB3YWl0RHVyYXRpb24gPSAxMDAgKiAxMCAqIHBhcnNlSW50KHNwbGl0Q29kZVsyXSArIHNwbGl0Q29kZVszXSwgMTYpIC8gcGFyc2VkQ29kZVsxXTtcclxuICAgIHJldHVybiB3YWl0RHVyYXRpb247XHJcbn1cclxuLy8gQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIG1pbnV0ZXMgYW5kIHNlY29uZHMgZm9yIHF1ZXVlXHJcbmV4cG9ydCBmdW5jdGlvbiBtaW51dGVzU2Vjb25kcyh0b3RhbE1pbGxpU2Vjb25kcywgdHJ1bmNhdGUgPSBmYWxzZSkge1xyXG4gICAgLy8gQnlwYXNzIGZ1bmN0aW9uYWxpdHkgZm9yIG5lZ2F0aXZlIHRpbWVzXHJcbiAgICBsZXQgbmVnYXRpdmUgPSBmYWxzZTtcclxuICAgIGlmICh0b3RhbE1pbGxpU2Vjb25kcyA8IDApIHtcclxuICAgICAgICB0b3RhbE1pbGxpU2Vjb25kcyA9IHRvdGFsTWlsbGlTZWNvbmRzICogLTE7XHJcbiAgICAgICAgbmVnYXRpdmUgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdG90YWxTZWNvbmRzID0gdG90YWxNaWxsaVNlY29uZHMgLyAxMDAwO1xyXG4gICAgbGV0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcclxuICAgIGxldCBzZWNvbmRzID0gdG90YWxTZWNvbmRzICUgNjA7XHJcbiAgICAvLyBUcnVuY2F0ZSBudW1iZXJzIGlmIGRlc2lyZWRcclxuICAgIGlmICh0cnVuY2F0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG1pbnV0ZXMgPSBNYXRoLmZsb29yKG1pbnV0ZXMpO1xyXG4gICAgICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKHNlY29uZHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFttaW51dGVzLCBzZWNvbmRzLCBuZWdhdGl2ZV07XHJcbn1cclxuIiwiaW1wb3J0IHsgd3JpdGFibGUgfSBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zdG9yZVwiO1xyXG4vLyBEZWNsYXJlIHNoYXJlZCBzdG9yZXMsIE5PVEUgdGhhdCB0aGV5IGNhbiBvbmx5IGJlIHNoYXJlZCB3aXRoaW4gdGhlIHNhbWUgY29udGV4dCFcclxuZXhwb3J0IGNvbnN0IHRhYlVSTHMgPSB3cml0YWJsZShbXSk7IC8vIHRhYiBVUkxzIHNoYXJlZCBiZXR3ZWVuIGNvbXBvbmVudHNcclxuLy8gQWdncmVnYXRlIHNlbGYtaWRlbnRpZmljYXRpb24ga2V5c1xyXG5leHBvcnQgY29uc3QgYmFja2dyb3VuZFNlbGYgPSBcImJhY2tncm91bmRcIjtcclxuZXhwb3J0IGNvbnN0IGNvbnRlbnRTZWxmID0gXCJjb250ZW50XCI7XHJcbmV4cG9ydCBjb25zdCBleHRlbnNpb25TZWxmID0gXCJleHRlbnNpb25cIjtcclxuLy8gQ2hhbmdlbG9nIGZvciBkaXNwbGF5IHB1cnBvc2VzLCBtb3N0IHJlY2VudCB0byBvbGRlc3RcclxuZXhwb3J0IGNvbnN0IGNoYW5nZWxvZ3MgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgZGlzcGxheTogXCJWZXJzaW9uIDEuMi4wXCIsXHJcbiAgICAgICAgYnVsbGV0czogW1xyXG4gICAgICAgICAgICBcIlJlLWZhY3RvciBvZiBiYWNrZ3JvdW5kIHNjcmlwdCwgY29udGVudCBzY3JpcHRzLCBhbmQgZXh0ZW5zaW9uIGZyb250LWVuZCB0byBcIlxyXG4gICAgICAgICAgICAgICAgKyBcImltcGxlbWVudCBzZXF1ZW50aWFsIGhhbmRsZXIgZXhlY3V0aW9uIGFuZCBvdGhlciBmZWF0dXJlc1wiLFxyXG4gICAgICAgICAgICBcIkltcGxlbWVudGVkIGF1dG8tcmVsb2FkIHdpdGggc2V0dGluZyB3aGVuZXZlciA0MDMvNTAwIHJlc3BvbnNlIHJlY2VpdmVkXCIsXHJcbiAgICAgICAgICAgIFwiSW1wbGVtZW50ZWQgaXRlcmF0aW5nIG92ZXIgbXVsdGlwbGUgdGFicyBmb3Igc2VuZGluZyByZXF1ZXN0cyAtIFwiXHJcbiAgICAgICAgICAgICAgICArIFwid2hpbGUgZXhlY3V0ZWQgb25jZSwgZWFjaCB0YWIgaXMgcGluZ2VkIGJlZm9yZWhhbmQgdG8gZW5zdXJlIGV4ZWN1dGlvblwiLFxyXG4gICAgICAgICAgICBcIkFkZGVkIG5ldyBub3RpZmljYXRpb24gc291bmRzIGFuZCBleHBhbmRlZCBub3RpZmljYXRpb25zIGZvciBkaWZmZXJlbnQgZXZlbnRzXCIsXHJcbiAgICAgICAgICAgIFwiQWRkZWQgYXV0b21hdGljYWxseSBvcGVuaW5nIHRhYiB3aXRoIHNldHRpbmcgb24gZXhlY3V0aW9uIHdoZW4gc2NyaXB0IG5vdCBkZXRlY3RlZFwiLFxyXG4gICAgICAgICAgICBcIkFkZGVkIG9wdGlvbiB0byBkaXNhYmxlIG5vdGlmaWNhdGlvbiBzb3VuZHMgZm9yIGFsbCBldmVudHMgKHNlcGFyYXRlIGZyb20gcG9wdXBzKVwiLFxyXG4gICAgICAgICAgICBcIkNoYW5nZWQgdGhlIHdheSBub3RpZmljYXRpb24gc291bmRzIGFyZSBwbGF5ZWQgc28gdGhhdCB0aGV5IGNhbiBvdmVybGFwIFwiLFxyXG4gICAgICAgICAgICBcIkZpeGVkIHNldHRpbmdzIHRhYiBlaXRoZXIgbm90IHdvcmtpbmcgb3IgYmVoYXZpbmcgc3RyYW5nZWx5IChidXR0b25zIG5vdCB3b3JraW5nLCBcIlxyXG4gICAgICAgICAgICAgICAgKyBcImNlcnRhaW4gc2V0dGluZ3Mgbm90IHNhdmluZywgZXRjLilcIixcclxuICAgICAgICAgICAgXCJBZ2dyZWdhdGVkIGJhY2tncm91bmQgc2NyaXB0cyBpbnRvIGEgc2luZ2xlIHNjcmlwdCBiZWNhdXNlIEkgdGhvdWdodCB0aGV5IFwiXHJcbiAgICAgICAgICAgICAgICArIFwiY291bGRuJ3QgY29tbXVuaWNhdGUgdG8gZWFjaCBvdGhlciB0aHJvdWdoIHRoZSBydW50aW1lLnNlbmRNZXNzYWdlIEFQSSwgXCJcclxuICAgICAgICAgICAgICAgICsgXCJidXQgYXBwYXJlbnRseSB0aGUgaXNzdWUgd2FzIHNvbWV0aGluZyBlbHNlLiBEb2luZyBzb21lIHRlc3RpbmcgdG8gY2hlY2sgXCJcclxuICAgICAgICAgICAgICAgICsgXCJ3aGV0aGVyIEknbSBnb29kIHRvIHNlcGFyYXRlIHRoZW0gYWdhaW4gaW4gZnV0dXJlIHZlcnNpb25zIGZvciBjb2RlIGNsYXJpdHlcIixcclxuICAgICAgICAgICAgXCJTb21ld2hhdCBjbGVhbmVkIHVwIGNvZGUgYW5kIGFnZ3JlZ2F0ZWQgdXRpbGl0aWVzIGJlY2F1c2Ugb2YgdHJlZSBzaGFraW5nXCIsXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBkaXNwbGF5OiBcIlZlcnNpb24gMS4xLjFcIixcclxuICAgICAgICBidWxsZXRzOiBbXHJcbiAgICAgICAgICAgIFwiRml4ZWQgY2hhbmdlbG9nIHNwYWNpbmcsIG5vb25lIHByb2JhYmx5IGV2ZW4gbm90aWNlZCB0aGUgaXNzdWUgdGhvdWdoXCIsXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBkaXNwbGF5OiBcIlZlcnNpb24gMS4xLjBcIixcclxuICAgICAgICBidWxsZXRzOiBbXHJcbiAgICAgICAgICAgIFwiRml4ZWQgZGVmYXVsdCBzZXR0aW5ncyBub3QgcHJvcGVybHkgYXBwbHlpbmcgYW5kIGluc3RlYWQgc2hvd2luZyAwL2ZhbHNlL1xcXCJcXFwiL2V0Yy5cIixcclxuICAgICAgICAgICAgXCJSZXdvcmtlZCBuYW1lcyBhbmQgZGVzY3JpcHRpb25zIGZvciBzb21lIHNldHRpbmdzLCBwbGVhc2UgZG91YmxlLWNoZWNrIHRvIGVuc3VyZSB0aGV5IGxvb2sgZ29vZFwiLFxyXG4gICAgICAgICAgICBcIkJlc3QgQnV5OiBSZW1vdmVkIGF1dG9tYXRpY2FsbHkgcmV0cnlpbmcgZmFpbGVkIGF1dG9tYXRpYyByZXF1ZXN0cywgc2hvdWxkIG1hbnVhbGx5IHBlcmZvcm0gaW5zdGVhZFwiLFxyXG4gICAgICAgICAgICBcIkJlc3QgQnV5OiBBZGRlZCBtYW55IENocm9tZSBub3RpZmljYXRpb25zIGFuZCBzb3VuZCBlZmZlY3RzIGZvciBldmVudHMgbGlrZSBmYWlsZWQgY2FydGluZywgcXVldWUgaW50ZXJjZXB0aW9uLCBhbmQgcmF0ZSBsaW1pdC4gTm90aWZpY2F0aW9uIHNvdW5kcyBzdWNrIHRob3VnaCwgcGxlYXNlIHNlbmQgbWUgcmVjb21tZW5kYXRpb25zIVwiLFxyXG4gICAgICAgIF1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgZGlzcGxheTogXCJWZXJzaW9uIDEuMC4wIChJbml0aWFsIHJlLXJlbGVhc2UpXCIsXHJcbiAgICAgICAgYnVsbGV0czogW1xyXG4gICAgICAgICAgICBcIkNvbXBsZXRlbHkgcmUtZGV2ZWxvcGVkIHRoZSBleHRlbnNpb24gZnJvbSBzY3JhdGNoIHVzaW5nIFN2ZWx0ZVwiLFxyXG4gICAgICAgICAgICBcIk1hbmZpZXN0IHZlcnNpb24gZG93bmdyYWRlZCBmcm9tIFYzIHRvIFYyIGZvciBwZXJzaXN0ZW50IGJhY2tncm91bmQgcGFnZXNcIixcclxuICAgICAgICAgICAgXCJCZXN0IEJ1eTogQmFja2dyb3VuZCBzY3JpcHQgYXV0b21hdGljYWxseSBpbnRlcmNlcHRzIGFuZCB0cmFja3MgcXVldWVzXCIsXHJcbiAgICAgICAgICAgIFwiQmVzdCBCdXk6IEltcGxlbWVudGVkIG1hbnVhbCBhZGQtdG8tY2FydCBhbmQgYXV0b21hdGljL21hbnVhbCBxdWV1ZSBjYXJ0aW5nXCIsXHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuXTtcclxuLy8gU2V0dGluZ3MgaW5jbHVkaW5nIGRlZmF1bHQgZm9yIGluaXRpYWxpemF0aW9uIGFuZCBsYWJlbHNcclxuZXhwb3J0IGNvbnN0IHNldHRpbmdMYWJlbHMgPSB7XHJcbiAgICBcImdsb2JhbFwiOiB7XHJcbiAgICAgICAgZGlzcGxheTogXCJHbG9iYWwgU2V0dGluZ3NcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCJOb3RlIHRoYXQgcG9wLXVwIG5vdGlmaWNhdGlvbnMgY2FuIG9ic2N1cmUgdGhlIHNjcmVlbiBhbmQgZm9yY2VmdWxseSBjaGFuZ2Ugd2luZG93IGZvY3VzIHdoZW4gY2xpY2tlZCAtIGRvbid0IGVuYWJsZSBub3RpZmljYXRpb25zIGlmIHlvdSdyZSBwbGF5aW5nIGdhbWVzIVwiLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIFwiYXV0b09wZW5UYWJcIjoge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJBdXRvbWF0aWNhbGx5IG9wZW4gdGFiIHdoZW4gc2NyaXB0IG5vdCBkZXRlY3RlZFwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJwbGF5Tm90aWZpY2F0aW9uc1wiOiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIlBsYXkgbm90aWZpY2F0aW9uIHNvdW5kcyBvbiBldmVudHNcIixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibm90aWZpY2F0aW9uRXJyb3JcIjoge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJTaG93IGRlc2t0b3Agbm90aWZpY2F0aW9uIG9uIGV4dGVuc2lvbiBlcnJvclwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJkdXJhdGlvbk5vdGlmaWNhdGlvblwiOiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIk5vdGlmaWNhdGlvbiBwb3B1cCBkdXJhdGlvbiBiZWZvcmUgY2xlYXJpbmdcIixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IDUwMDAsXHJcbiAgICAgICAgICAgICAgICBhcmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJzdWZmaXhcIjogXCJtc1wiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBcImJlc3RidXlcIjoge1xyXG4gICAgICAgIGRpc3BsYXk6IFwiQmVzdCBCdXkgU2V0dGluZ3NcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCJOb3RlIHRoYXQgcG9wLXVwIG5vdGlmaWNhdGlvbnMgY2FuIG9ic2N1cmUgdGhlIHNjcmVlbiBhbmQgZm9yY2VmdWxseSBjaGFuZ2Ugd2luZG93IGZvY3VzIHdoZW4gY2xpY2tlZCAtIGRvbid0IGVuYWJsZSBub3RpZmljYXRpb25zIGlmIHlvdSdyZSBwbGF5aW5nIGdhbWVzIVwiLFxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIFwiYXV0b0FkZFF1ZXVlXCI6IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiQXV0b21hdGljYWxseSBleGVjdXRlIHF1ZXVlIGFkZC10by1jYXJ0IHdoZW4gZmluaXNoZWRcIixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiYXV0b1JlbG9hZFwiOiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIkF1dG9tYXRpY2FsbHkgcmVsb2FkIHRhYiBvbiBwb3RlbnRpYWwgcmF0ZS1saW1pdCAoNDAzLzUwMClcIixcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwicmVwbGFjZVF1ZXVlXCI6IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiTWFpbnRhaW4gc2hvcnRlc3QgaW5zdGVhZCBvZiBtdWx0aXBsZSBxdWV1ZXMgcGVyIFNLVVwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJyZXF1ZXVlU3VjY2Vzc1wiOiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIlJlLXF1ZXVlIHdpdGggcmVzcG9uc2UgcXVldWUgb24gc3VjY2Vzc2Z1bCBhZGQtdG8tY2FydFwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJub3RpZmljYXRpb25TdWNjZXNzXCI6IHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiU2hvdyBkZXNrdG9wIG5vdGlmaWNhdGlvbiBvbiBzdWNjZXNzZnVsIGFkZC10by1jYXJ0XCIsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm5vdGlmaWNhdGlvbkZhaWx1cmVcIjoge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJTaG93IGRlc2t0b3Agbm90aWZpY2F0aW9uIG9uIGZhaWxlZCBhZGQtdG8tY2FydFwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJub3RpZmljYXRpb25RdWV1ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIlNob3cgZGVza3RvcCBub3RpZmljYXRpb24gb24gbmV3IHF1ZXVlIGludGVyY2VwdGlvblwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJub3RpZmljYXRpb25SYXRlTGltaXRcIjoge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogXCJTaG93IGRlc2t0b3Agbm90aWZpY2F0aW9uIG9uIHBvdGVudGlhbCByYXRlLWxpbWl0ICg0MDMvNTAwKVwiLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59O1xyXG4vLyBCZXN0IEJ1eSBkYXRhIGZvciBtYW51YWwgYWRkLXRvLWNhcnQgYW5kIGRpc3BsYXlcclxuZXhwb3J0IGNvbnN0IHJhd0Jlc3RCdXlJdGVtcyA9IHtcclxuICAgIFwiZ3R4LTE2XCI6IHtcclxuICAgICAgICBkaXNwbGF5OiBcIltHcmFwaGljc10gR2VGb3JjZSBHVFggMTYtU2VyaWVzXCIsXHJcbiAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBHVFggMTY2MCBTVVBFUiBUVUYgR0FNSU5HIE9DXCIsIFwiZGF0YVwiOiBcIjY0MDUwNjNcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiRVZHQSBHZUZvcmNlIEdUWCAxNjUwIFNVUEVSIFNDIFVMVFJBIEdBTUlOR1wiLCBcImRhdGFcIjogXCI2NDEyOTM5XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkVWR0EgR2VGb3JjZSBHVFggMTY2MFRpIFNDIFVMVFJBIEdBTUlOR1wiLCBcImRhdGFcIjogXCI2MzczNTAwXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIEdUWCAxNjUwIFNVUEVSIEdBTUlORyBYXCIsIFwiZGF0YVwiOiBcIjYzOTc3OThcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgR1RYIDE2NjAgU1VQRVIgR0FNSU5HIFhcIiwgXCJkYXRhXCI6IFwiNjM4OTMzM1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBHVFggMTY2MFRpIEdBTUlORyBYXCIsIFwiZGF0YVwiOiBcIjYzMzA0NjFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiUE5ZIEdlRm9yY2UgR1RYIDE2NTAgU1VQRVIgWExSOCBHQU1JTkcgT0NcIiwgXCJkYXRhXCI6IFwiNjQwNzMwNVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJQTlkgR2VGb3JjZSBHVFggMTY2MCBTVVBFUiBYTFI4IEdBTUlORyBPQ1wiLCBcImRhdGFcIjogXCI2NDA3MzA5XCIgfSxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIFwicnR4LTMwNjBcIjoge1xyXG4gICAgICAgIGRpc3BsYXk6IFwiW0dyYXBoaWNzXSBHZUZvcmNlIFJUWCAzMDYwXCIsXHJcbiAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA2MCBTVFJJWFwiLCBcImRhdGFcIjogXCI2NDYwNjY1XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA2MCBTVFJJWCAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDc1MjI0XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA2MCBUVUYgR0FNSU5HXCIsIFwiZGF0YVwiOiBcIjY0NjA2NjZcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiQVNVUyBHZUZvcmNlIFJUWCAzMDYwIFRVRiBHQU1JTkcgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3NTIyM1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwNjAgWEMgR0FNSU5HIChLQilcIiwgXCJkYXRhXCI6IFwiNjQ1NDMyOVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwNjAgWEMgR0FNSU5HIChLUilcIiwgXCJkYXRhXCI6IFwiNjQ1NDMyOFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwIEFPUlVTIEVMSVRFXCIsIFwiZGF0YVwiOiBcIjY0Njg5MTBcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA2MCBFQUdMRSBPQ1wiLCBcImRhdGFcIjogXCI2NDU0Njg5XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNjAgRUFHTEUgT0MgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ2ODkyOFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwIEdBTUlORyBPQ1wiLCBcImRhdGFcIjogXCI2NDU0Njg4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNjAgR0FNSU5HIE9DIChMSFIpXCIsIFwiZGF0YVwiOiBcIjY0Njg5MzFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA2MCBWSVNJT04gT0NcIiwgXCJkYXRhXCI6IFwiNjQ2ODkyNVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA2MCBHQU1JTkcgWCBPQ1wiLCBcImRhdGFcIjogXCI2NDc2MjI5XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDYwIFZFTlRVUyAyWCBPQ1wiLCBcImRhdGFcIjogXCI2NDYyMTczXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDYwIFZFTlRVUyAzWCBPQ1wiLCBcImRhdGFcIjogXCI2NDUyOTQwXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIlBOWSBHZUZvcmNlIFJUWCAzMDYwIFhMUjggR0FNSU5HIFJFVkVMIEVQSUMtWFwiLCBcImRhdGFcIjogXCI2NDU0MzE4XCIgfSxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIFwicnR4LTMwNjB0aVwiOiB7XHJcbiAgICAgICAgZGlzcGxheTogXCJbR3JhcGhpY3NdIEdlRm9yY2UgUlRYIDMwNjBUaVwiLFxyXG4gICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJBU1VTIEdlRm9yY2UgUlRYIDMwNjBUaSBUVUYgR0FNSU5HXCIsIFwiZGF0YVwiOiBcIjY0NzUyMzdcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiQVNVUyBHZUZvcmNlIFJUWCAzMDYwVGkgVFVGIEdBTUlOR1wiLCBcImRhdGFcIjogXCI2NDUyNTczXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkVWR0EgR2VGb3JjZSBSVFggMzA2MFRpIEZUVzMgR0FNSU5HIChLQilcIiwgXCJkYXRhXCI6IFwiNjQ0NDQ0NFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwNjBUaSBGVFczIEdBTUlORyAoS0gsIExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3OTUyNFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwVGkgQU9SVVMgRUFHTEUgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3OTY4NlwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwVGkgRUFHTEUgT0NcIiwgXCJkYXRhXCI6IFwiNjQ0MjQ4NVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwVGkgRUFHTEUgT0MgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3MTk1MVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDYwVGkgR0FNSU5HIE9DXCIsIFwiZGF0YVwiOiBcIjY0NzE5NTJcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA2MFRpIEdBTUlORyBPQyAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDc5Njg4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNjBUaSBHQU1JTkcgT0MgKExIUiBWMilcIiwgXCJkYXRhXCI6IFwiNjQ0MjQ4NFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA2MFRpIEdBTUlORyBYXCIsIFwiZGF0YVwiOiBcIjY0ODAyOTFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNjBUaSBHQU1JTkcgWlwiLCBcImRhdGFcIjogXCI2NDc2MjMwXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDYwVGkgVkVOVFVTIDJYIE9DXCIsIFwiZGF0YVwiOiBcIjY0NDExNzJcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNjBUaSBWRU5UVVMgMlggT0MgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3MTI4NlwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA2MFRpIFZFTlRVUyAzWCBPQ1wiLCBcImRhdGFcIjogXCI2NDgwMzA3XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk5WSURJQSBHZUZvcmNlIFJUWCAzMDYwVGkgRk9VTkRFUlNcIiwgXCJkYXRhXCI6IFwiNjQzOTQwMlwiIH0sXHJcbiAgICAgICAgXSxcclxuICAgIH0sXHJcbiAgICBcInJ0eC0zMDcwXCI6IHtcclxuICAgICAgICBkaXNwbGF5OiBcIltHcmFwaGljc10gR2VGb3JjZSBSVFggMzA3MFwiLFxyXG4gICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJBU1VTIEdlRm9yY2UgUlRYIDMwNzAgU1RSSVhcIiwgXCJkYXRhXCI6IFwiNjQzOTEyN1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJBU1VTIEdlRm9yY2UgUlRYIDMwNzAgU1RSSVggKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3NTIyOFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJBU1VTIEdlRm9yY2UgUlRYIDMwNzAgVFVGIEdBTUlOR1wiLCBcImRhdGFcIjogXCI2NDM5MTI4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA3MCBUVUYgR0FNSU5HIChMSFIpXCIsIFwiZGF0YVwiOiBcIjY0NzUyMjZcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiRVZHQSBHZUZvcmNlIFJUWCAzMDcwIFhDMyBVTFRSQSBHQU1JTkcgKEtMLCBMSFIpXCIsIFwiZGF0YVwiOiBcIjY0Nzk1MjhcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiRVZHQSBHZUZvcmNlIFJUWCAzMDcwIFhDMyBVTFRSQSBHQU1JTkcgKEtILCBMSFIpXCIsIFwiZGF0YVwiOiBcIjY0NzcwNzdcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiRVZHQSBHZUZvcmNlIFJUWCAzMDcwIFhDMyBVTFRSQSBHQU1JTkcgKEtCKVwiLCBcImRhdGFcIjogXCI2NDM5Mjk5XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNzAgQU9SVVMgTUFTVEVSXCIsIFwiZGF0YVwiOiBcIjY0MzkzODRcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MCBBT1JVUyBNQVNURVIgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3OTY4NVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDcwIEVBR0xFXCIsIFwiZGF0YVwiOiBcIjY0Mzc5MTJcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MCBFQUdMRSBPQyAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDcxOTU4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNzAgR0FNSU5HIE9DXCIsIFwiZGF0YVwiOiBcIjY0Mzc5MDlcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MCBWSVNJT04gT0NcIiwgXCJkYXRhXCI6IFwiNjQzOTM4NVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA3MCBHQU1JTkcgWiBUUklPXCIsIFwiZGF0YVwiOiBcIjY0NzEyODVcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNzAgVkVOVFVTIDJYIE9DXCIsIFwiZGF0YVwiOiBcIjY0NjIyNjZcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNzAgVkVOVFVTIDJYIE9DIChMSFIpXCIsIFwiZGF0YVwiOiBcIjY0ODAzMDhcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNzAgVkVOVFVTIDNYIE9DXCIsIFwiZGF0YVwiOiBcIjY0MzgyNzhcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwNzAgR0FNSU5HIFggVFJJT1wiLCBcImRhdGFcIjogXCI2NDM4Mjc5XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk5WSURJQSBHZUZvcmNlIFJUWCAzMDcwIEZPVU5ERVJTXCIsIFwiZGF0YVwiOiBcIjY0Mjk0NDJcIiB9LFxyXG4gICAgICAgIF0sXHJcbiAgICB9LFxyXG4gICAgXCJydHgtMzA3MHRpXCI6IHtcclxuICAgICAgICBkaXNwbGF5OiBcIltHcmFwaGljc10gR2VGb3JjZSBSVFggMzA3MFRpXCIsXHJcbiAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA3MFRpIFNUUklYXCIsIFwiZGF0YVwiOiBcIjY0Njc4MzhcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiQVNVUyBHZUZvcmNlIFJUWCAzMDcwVGkgVFVGIEdBTUlOR1wiLCBcImRhdGFcIjogXCI2NDY3ODQwXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwNzBUaSBBT1JVUyBNQVNURVJcIiwgXCJkYXRhXCI6IFwiNjQ2Nzc4OFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDcwVGkgR0FNSU5HIE9DXCIsIFwiZGF0YVwiOiBcIjY0Njc3NzlcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MFRpIEVBR0xFXCIsIFwiZGF0YVwiOiBcIjY0Njc3ODJcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MFRpIEVBR0xFIE9DXCIsIFwiZGF0YVwiOiBcIjY0Njc3ODFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA3MFRpIFZJU0lPTiBPQ1wiLCBcImRhdGFcIjogXCI2NDY3Nzg1XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDcwVGkgR0FNSU5HIFggVFJJT1wiLCBcImRhdGFcIjogXCI2NDY3NDk3XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDcwVGkgVkVOVFVTIDNYIE9DXCIsIFwiZGF0YVwiOiBcIjY0Njc1MDBcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTlZJRElBIEdlRm9yY2UgUlRYIDMwNzBUaSBGT1VOREVSU1wiLCBcImRhdGFcIjogXCI2NDY1Nzg5XCIgfSxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIFwicnR4LTMwODBcIjoge1xyXG4gICAgICAgIGRpc3BsYXk6IFwiW0dyYXBoaWNzXSBHZUZvcmNlIFJUWCAzMDgwXCIsXHJcbiAgICAgICAgaXRlbXM6IFtcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA4MCBTVFJJWFwiLCBcImRhdGFcIjogXCI2NDMyNDQ1XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA4MCBTVFJJWCAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDc1MjM4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkVWR0EgR2VGb3JjZSBSVFggMzA4MCBYQzMgVUxUUkEgR0FNSU5HIChLQilcIiwgXCJkYXRhXCI6IFwiNjQzMjQwMFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwODAgWEMzIFVMVFJBIEdBTUlORyAoS0gsIExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3MTYxNVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDgwIEFPUlVTIE1BU1RFUiAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDYyMTk4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwODAgQU9SVVMgWFRSRU1FXCIsIFwiZGF0YVwiOiBcIjY0MzYyMjNcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA4MCBBT1JVUyBYVFJFTUUgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3MTk1NFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDgwIEVBR0xFIE9DXCIsIFwiZGF0YVwiOiBcIjY0MzA2MjFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA4MCBHQU1JTkcgT0NcIiwgXCJkYXRhXCI6IFwiNjQzMDYyMFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDgwIEdBTUlORyBPQyAoTEhSKVwiLCBcImRhdGFcIjogXCI2NDcxOTYwXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwODAgVklTSU9OIE9DXCIsIFwiZGF0YVwiOiBcIjY0MzYyMTlcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA4MCBWSVNJT04gT0MgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ3MTk1N1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA4MCBHQU1JTkcgWiBUUklPXCIsIFwiZGF0YVwiOiBcIjY0ODAyODlcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwODAgVkVOVFVTIDNYIChMSFIpXCIsIFwiZGF0YVwiOiBcIjY0NzEyODdcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwODAgVkVOVFVTIDNYIE9DXCIsIFwiZGF0YVwiOiBcIjY0MzAxNzVcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTVNJIEdlRm9yY2UgUlRYIDMwODAgVkVOVFVTIDNYIFBMVVMgKExIUilcIiwgXCJkYXRhXCI6IFwiNjQ4MDMwNlwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJOVklESUEgR2VGb3JjZSBSVFggMzA4MCBGT1VOREVSU1wiLCBcImRhdGFcIjogXCI2NDI5NDQwXCIgfSxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIFwicnR4LTMwODB0aVwiOiB7XHJcbiAgICAgICAgZGlzcGxheTogXCJbR3JhcGhpY3NdIEdlRm9yY2UgUlRYIDMwODBUaVwiLFxyXG4gICAgICAgIGl0ZW1zOiBbXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJBU1VTIEdlRm9yY2UgUlRYIDMwODBUaSBTVFJJWFwiLCBcImRhdGFcIjogXCI2NDY2OTMxXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkFTVVMgR2VGb3JjZSBSVFggMzA4MFRpIFRVRiBHQU1JTkdcIiwgXCJkYXRhXCI6IFwiNjQ2NjkzMlwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwODBUaSBGVFczIFVMVFJBIEdBTUlORyAoS0IpXCIsIFwiZGF0YVwiOiBcIjY0Njc4MDhcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA4MFRpIEFPUlVTIE1BU1RFUlwiLCBcImRhdGFcIjogXCI2NDY4OTMyXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIkdJR0FCWVRFIEdlRm9yY2UgUlRYIDMwODBUaSBBT1JVUyBYVFJFTUVcIiwgXCJkYXRhXCI6IFwiNjQ2ODkzM1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDgwVGkgR0FNSU5HIE9DXCIsIFwiZGF0YVwiOiBcIjY0NjY1NjFcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA4MFRpIFZJU0lPTiBPQ1wiLCBcImRhdGFcIjogXCI2NDY2NTY0XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDgwVGkgR0FNSU5HIFggVFJJT1wiLCBcImRhdGFcIjogXCI2NDY1ODAzXCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDgwVGkgVkVOVFVTIDNYIE9DXCIsIFwiZGF0YVwiOiBcIjY0NzI2MzdcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiTlZJRElBIEdlRm9yY2UgUlRYIDMwODBUaSBGT1VOREVSU1wiLCBcImRhdGFcIjogXCI2NDYyOTU2XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIlBOWSBHZUZvcmNlIFJUWCAzMDgwVGkgWExSOCBHQU1JTkcgUkVWRUwgRVBJQy1YXCIsIFwiZGF0YVwiOiBcIjY0NjcyODlcIiB9LFxyXG4gICAgICAgIF0sXHJcbiAgICB9LFxyXG4gICAgXCJydHgtMzA5MFwiOiB7XHJcbiAgICAgICAgZGlzcGxheTogXCJbR3JhcGhpY3NdIEdlRm9yY2UgUlRYIDMwOTBcIixcclxuICAgICAgICBpdGVtczogW1xyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiQVNVUyBHZUZvcmNlIFJUWCAzMDkwIFNUUklYXCIsIFwiZGF0YVwiOiBcIjY0MzI0NDdcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiQVNVUyBHZUZvcmNlIFJUWCAzMDkwIFRVRiBHQU1JTkdcIiwgXCJkYXRhXCI6IFwiNjQzMjQ0NlwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJFVkdBIEdlRm9yY2UgUlRYIDMwOTAgWEMzIFVMVFJBIEdBTUlORyAoS0IpXCIsIFwiZGF0YVwiOiBcIjY0MzQxOThcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA5MCBBT1JVUyBNQVNURVJcIiwgXCJkYXRhXCI6IFwiNjQzNzkxMFwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDkwIEVBR0xFIE9DXCIsIFwiZGF0YVwiOiBcIjY0MzA2MjRcIiB9LFxyXG4gICAgICAgICAgICB7IGRpc3BsYXk6IFwiR0lHQUJZVEUgR2VGb3JjZSBSVFggMzA5MCBHQU1JTkcgT0NcIiwgXCJkYXRhXCI6IFwiNjQzMDYyM1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJHSUdBQllURSBHZUZvcmNlIFJUWCAzMDkwIFZJU0lPTiBPQ1wiLCBcImRhdGFcIjogXCI2NDQ1MTA4XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDkwIEdBTUlORyBYIFRSSU9cIiwgXCJkYXRhXCI6IFwiNjQ2ODg2M1wiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJNU0kgR2VGb3JjZSBSVFggMzA5MCBWRU5UVVMgM1ggT0NcIiwgXCJkYXRhXCI6IFwiU0tVOiA2NDcyNjQ2XCIgfSxcclxuICAgICAgICAgICAgeyBkaXNwbGF5OiBcIk1TSSBHZUZvcmNlIFJUWCAzMDkwIFZFTlRVUyAzWCBPQyAoPylcIiwgXCJkYXRhXCI6IFwiNjQzMDIxNVwiIH0sXHJcbiAgICAgICAgICAgIHsgZGlzcGxheTogXCJOVklESUEgR2VGb3JjZSBSVFggMzA5MCBGT1VOREVSU1wiLCBcImRhdGFcIjogXCI2NDI5NDM0XCIgfSxcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxufTtcclxuZXhwb3J0IGNvbnN0IGJlc3RCdXlEaXNwbGF5cyA9IE9iamVjdC5lbnRyaWVzKHJhd0Jlc3RCdXlJdGVtcykucmVkdWNlKChvYmosIFtfLCByYXdDYXRlZ29yeURhdGFdKSA9PiB7XHJcbiAgICBvYmogPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9iaiksIE9iamVjdC5lbnRyaWVzKHJhd0NhdGVnb3J5RGF0YS5pdGVtcykucmVkdWNlKChzdWJPYmosIFtfLCByYXdJdGVtRGF0YV0pID0+IHtcclxuICAgICAgICBzdWJPYmpbcmF3SXRlbURhdGEuZGF0YV0gPSByYXdJdGVtRGF0YS5kaXNwbGF5O1xyXG4gICAgICAgIHJldHVybiBzdWJPYmo7XHJcbiAgICB9LCB7fSkpO1xyXG4gICAgcmV0dXJuIG9iajtcclxufSwge30pO1xyXG4iLCI7IC8vIEN1cnJlbnRseSBxdWV1ZWQgcmVxdWVzdCB3aXRoaW4gc3RyZWFtbGluZSBiYWNrZ3JvdW5kIHNjcmlwdFxyXG47IC8vIE9yaWdpbmFsIGJyb2FkY2FzdGVyIGlkbGVzIHVudGlsIGV4ZWN1dGlvbiBmaW5pc2hlZCBhbmQgcmVzb2x2ZWRcclxuOyAvLyBSZXNwb25zZSBmcm9tIHF1ZXVlZCByZXF1ZXN0IHJldHVybmVkIHRvIG9yaWdpbmFsIGJyb2FkY2FzdGVyXHJcbjsgLy8gUmVxdWVzdCBwYXlsb2FkIGJyb2FkY2FzdGVkIHRvIHRhcmdldGVkIHRhYlxyXG47IC8vIFJlc3BvbnNlIHBheWxvYWQgZnJvbSB0YXJnZXRlZCB0YWIsIGluY2x1ZGVzIGV4dHJhIGluc3RydWN0aW9uc1xyXG47XHJcbi8vIFBpbmcgcmVxdWVzdCB0byBjaGVjayB0YWIgcmVhY3Rpdml0eVxyXG5leHBvcnQgY29uc3QgcGluZ1JlcXVlc3QgPSB7XHJcbiAgICBoYW5kbGVyOiBcInBpbmdcIixcclxuICAgIGFyZ3M6IFtdLFxyXG59O1xyXG4vLyBEZWZhdWx0IHBpbmcgcmVzcG9uc2UgZm9yIGNvbnRlbnQgc2NyaXB0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb250ZW50UGluZygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsdWU6IFwib2theVwiLFxyXG4gICAgfTtcclxufVxyXG4iLCJpbXBvcnQgQmFja2dyb3VuZCBmcm9tIFwiLi9jb21wb25lbnRzL0JhY2tncm91bmQuc3ZlbHRlXCI7XHJcbmNvbnN0IGFwcCA9IG5ldyBCYWNrZ3JvdW5kKHtcclxuICAgIHRhcmdldDogZG9jdW1lbnQuYm9keSxcclxuICAgIHByb3BzOiB7fSxcclxufSk7XHJcbmV4cG9ydCBkZWZhdWx0IGFwcDtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0bG9hZGVkOiBmYWxzZSxcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obWQgPSAobW9kdWxlKSA9PiB7XG5cdG1vZHVsZSA9IE9iamVjdC5jcmVhdGUobW9kdWxlKTtcblx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAnZXhwb3J0cycsIHtcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdHNldDogKCkgPT4ge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFUyBNb2R1bGVzIG1heSBub3QgYXNzaWduIG1vZHVsZS5leHBvcnRzIG9yIGV4cG9ydHMuKiwgVXNlIEVTTSBleHBvcnQgc3ludGF4LCBpbnN0ZWFkOiAnICsgbW9kdWxlLmlkKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbW9kdWxlO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gOTc5OyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQ5Nzk6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGlmKGNodW5rSWRzLnNvbWUoKGlkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2lkXSAhPT0gMCkpKSB7XG5cdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0fVxuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtha2l0b3NfYXV0b21hdGVkX3V0aWxpdGllc1wiXSA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtha2l0b3NfYXV0b21hdGVkX3V0aWxpdGllc1wiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzE1NF0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDY1MCkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJuYW1lcyI6WyJkZWZlcnJlZCIsImRvbWFpbk1hdGNoZXMiLCJleHRlbnNpb25Mb2ciLCJzZW5kZXIiLCJtZXNzYWdlIiwibGV2ZWwiLCJvdXRwdXQiLCJEYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsInN1YnN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJkZWJ1ZyIsIndhcm4iLCJlcnJvciIsImFzeW5jIiwiaW5pdGlhbGl6ZVN0b3JlIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwic3RvcmFnZVZhbHVlIiwic3RvcmFnZUNvbnRlbnQiLCJicm93c2VyIiwic3RvcmFnZSIsImxvY2FsIiwiZ2V0IiwidW5kZWZpbmVkIiwic3RvcmFnZUdldCIsInN0b3JlIiwicnVudGltZSIsIm9uTWVzc2FnZSIsImFkZExpc3RlbmVyIiwicmVxdWVzdCIsImhhbmRsZXIiLCJzdG9yZUtleSIsInNldEtleSIsInNldFZhbHVlIiwiYXJncyIsInVwZGF0ZSIsInZhbHVlIiwiZGVsS2V5Iiwic2V0Iiwic2VuZFJlcXVlc3RCYWNrZ3JvdW5kIiwiZGVsIiwicmVzcG9uc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNlbmRNZXNzYWdlIiwidGhlbiIsImNhdGNoIiwic2VuZE1lc3NhZ2VCYWNrZ3JvdW5kIiwibWVzc2FnZVByb2Nlc3NIYW5kbGVycyIsImNvbnRlbnRLZXkiLCJoYW5kbGVycyIsInZhbGlkU2VuZGVycyIsInJlc3VsdCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3JNZXNzYWdlIiwic2xlZXAiLCJtcyIsInNldFRpbWVvdXQiLCJkZWNvZGVRdWV1ZSIsInF1ZXVlQ29kZSIsInNwbGl0Q29kZSIsInNwbGl0IiwicGFyc2VkQ29kZSIsIm1hcCIsImNodW5rIiwicGFyc2VJbnQiLCJtaW51dGVzU2Vjb25kcyIsInRvdGFsTWlsbGlTZWNvbmRzIiwidHJ1bmNhdGUiLCJuZWdhdGl2ZSIsInRvdGFsU2Vjb25kcyIsIm1pbnV0ZXMiLCJNYXRoIiwiZmxvb3IiLCJzZWNvbmRzIiwic2V0dGluZ0xhYmVscyIsImRpc3BsYXkiLCJkZXNjcmlwdGlvbiIsInNldHRpbmdzIiwiZGVmYXVsdCIsImJlc3RCdXlEaXNwbGF5cyIsIk9iamVjdCIsImVudHJpZXMiLCJpdGVtcyIsInJlZHVjZSIsIm9iaiIsIl8iLCJyYXdDYXRlZ29yeURhdGEiLCJhc3NpZ24iLCJzdWJPYmoiLCJyYXdJdGVtRGF0YSIsImRhdGEiLCJwaW5nUmVxdWVzdCIsInRhcmdldCIsImRvY3VtZW50IiwiYm9keSIsInByb3BzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJPIiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiZnVsZmlsbGVkIiwiaiIsImtleXMiLCJldmVyeSIsInNwbGljZSIsInIiLCJkIiwiZGVmaW5pdGlvbiIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJobWQiLCJjcmVhdGUiLCJjaGlsZHJlbiIsIkVycm9yIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJzb21lIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsImZvckVhY2giLCJiaW5kIiwicHVzaCIsIl9fd2VicGFja19leHBvcnRzX18iXSwic291cmNlUm9vdCI6IiJ9
(()=>{"use strict";var e,t,r,o,n,a,s={270:(e,t,r)=>{r.a(e,(async o=>{r.d(t,{Z:()=>g});var n=r(234),a=r(655),s=r(568),i=r(54),c=r(169),u=r(357);r(434),r(374),e=r.hmd(e);var d=o([u,c]);function l(e){const t={c:n.ZTd,l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:n.ZTd,p:n.ZTd,i:n.ZTd,o:n.ZTd,d:n.ZTd};return(0,n.YyZ)("SvelteRegisterBlock",{block:t,id:l.name,type:"component",source:"",ctx:e}),t}[u,c]=d.then?await d:d;const f="background";function b(e,t,r){let{$$slots:o={},$$scope:d}=t;(0,n.KXV)("Background",o,[]),(0,s.H3)((function(){return(0,a.mG)(this,void 0,void 0,(function*(){yield(0,u.Oc)(),(0,c.Rl)(),(0,c.dO)();const e={"add-sync-request":u.ii,"create-tab-ready":u.uS,"sound-notification":u.Fy,"merge-product_queues":c.gD,"background-add_to_cart":c.IK};(0,i.Z0)(f,e)}))}));const l=[];return Object.keys(t).forEach((e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Background> was created with unknown prop '${e}'`)})),e.$capture_state=()=>({__awaiter:a.mG,onMount:s.H3,messageProcessHandlers:i.Z0,mergeProductQueues:c.gD,processAddToCart:c.IK,setupBestBuyInterval:c.dO,setupBestBuyRequestHandlers:c.Rl,addSyncRequest:u.ii,createTabReady:u.uS,mergeSettings:u.Oc,soundNotification:u.Fy,loggingSelf:f}),[]}class p extends n.Mjb{constructor(e){super(e),(0,n.S1n)(this,e,b,l,n.N8,{}),(0,n.YyZ)("SvelteRegisterComponent",{component:this,tagName:"Background",options:e,id:l.name})}}e&&e.hot;const g=p}))},650:(e,t,r)=>{r.a(e,(async e=>{var t=r(270),o=e([t]);new(t=(o.then?await o:o)[0]).Z({target:document.body,props:{}})}))},169:(e,t,r)=>{r.a(e,(async e=>{r.d(t,{Rl:()=>d,dO:()=>l,gD:()=>b,IK:()=>p});var o=r(261),n=r(309),a=r(54),s=r(357),i=e([s,n]);[s,n]=i.then?await i:i;const c="background_bestbuy",u="https://www.bestbuy.com/";function d(){(0,a.Vf)(c,"Setting-up webRequest interception for addToCart requests");const e={};chrome.webRequest.onBeforeRequest.addListener((function(t){if(void 0!==t.requestBody){const r=decodeURIComponent(String.fromCharCode.apply(null,new Uint8Array(t.requestBody.raw[0].bytes))),o=JSON.parse(r);e[t.requestId]=o;const n=o.items.map((e=>e.skuId)),s=JSON.stringify(n);(0,a.Vf)(c,`[webRequest.onBeforeRequest] Finished caching POST body for request ${t.requestId} with SKU(s) ${s}`,"debug")}}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["requestBody","blocking"]),chrome.webRequest.onBeforeSendHeaders.addListener((function(t){void 0!==e[t.requestId]||(0,a.Vf)(c,`[webRequest.onBeforeSendHeaders] Couldn't find cached POST body for request ${t.requestId}`,"error")}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["requestHeaders","blocking"]),chrome.webRequest.onHeadersReceived.addListener((function(t){var r;let i="",u="";for(const e of t.responseHeaders||[])"a2ctransactionreferenceid"===e.name?i=e.value:"a2ctransactioncode"===e.name&&(u=e.value);if((200!==t.statusCode||!0===(0,o.U2)(n.Xd.store).bestbuy.requeueSuccess)&&""!==i&&""!==u){const d=e[t.requestId];if(void 0===d)return void(0,a.Vf)(c,`[webRequest.onHeadersReceived] Couldn't find cached POST body for request ${t.requestId}`,"error");const l=null===(r=d.items[0])||void 0===r?void 0:r.skuId,b=(new Date).getTime(),p=(0,a.ul)(u),[g,y]=(0,a.OJ)(p),h={startTime:b,a2cTransactionReferenceId:i,a2cTransactionCode:u,queueTime:p};(0,a.Vf)(c,`[webRequest.onHeadersReceived] Queue response headers detected for request ${t.requestId} with time ${g}m ${y}s`);let m="";const w=n.D7[l];let v=(0,o.U2)(n.Ag.store)[l]||{};if(!0===(0,o.U2)(n.Xd.store).bestbuy.replaceQueue&&Object.keys(v).length>0){let e,t,r;[v,e,t,r]=f(v,h,b),m=!0===e?`[${w}] Queue replacement enabled, replacing with ${t}m ${r}s improvement`:`[${w}] Queue replacement enabled, not replacing because ${t}m ${r}s worse`}else m=`[${w}] Intercepted new queue with timer ${g}m ${y}s`,v[i]=h;n.Ag.set(l,v);const $="Best Buy - Queue Intercepted";(0,s.Fy)("queue",$,m,["bestbuy","notificationQueue"])}delete e[t.requestId]}),{urls:["*://*.bestbuy.com/cart/api/v1/addToCart"]},["responseHeaders","blocking"])}function l(){const e=new Set;setInterval((async function(){const t=(new Date).getTime();for(const[r,s]of Object.entries((0,o.U2)(n.Ag.store)))for(const[i,c]of Object.entries(s)){const u=c.startTime+c.queueTime-t;u<=0&&(u>-3e5?!0===(0,o.U2)(n.Xd.store).bestbuy.autoAddQueue&&!1===e.has(c.a2cTransactionReferenceId)?((0,a.Vf)("background-bestbuy",`Queue popped for SKU ${r}, broadcasting add-to-cart request`),e.add(c.a2cTransactionReferenceId),await p(r,c.a2cTransactionReferenceId,c.a2cTransactionCode)):(0,a.Vf)("background-bestbuy",`Queue popped for SKU ${r}, waiting for manual because of setting`):((0,a.Vf)("background-bestbuy",`Queue popped but expired for ${r}, silently deleting`),e.delete(c.a2cTransactionReferenceId),delete s[i],n.Ag.set(r,s)))}}),100)}function f(e,t,r){const o=Object.entries(e).map((([e,t])=>[t.startTime+t.queueTime-r,e,t]));o.sort(((e,t)=>e[0]-t[0]));const n=o[0][0],s=t.a2cTransactionReferenceId,i=t.startTime+t.queueTime-r;o.push([i,s,t]),o.sort(((e,t)=>e[0]-t[0]));const[c,u,d]=(0,a.OJ)(n-i,!0),l=o[0][1]===t.a2cTransactionReferenceId;e={};const f=o[0];return e[f[1]]=f[2],[e,l,c,u]}async function b(e){const t=(new Date).getTime();for(const[r,s]of Object.entries(e)){let e=(0,o.U2)(n.Ag.store)[r]||{};if(void 0===e[s[1]]){const[i,u,d]=s,l=(0,a.ul)(s[1]),b=i+l-t,[p,g,y]=(0,a.OJ)(b);if(b>-3e5){const t={startTime:i,a2cTransactionReferenceId:u,a2cTransactionCode:d,queueTime:l};if(!0===(0,o.U2)(n.Xd.store).bestbuy.replaceQueue&&Object.keys(e).length>0){let o,n,s;[e,o,n,s]=f(e,t,i),!0===o?(0,a.Vf)(c,`Importing queue for SKU ${r} has ${n}m ${s}s improvement, replacing`):(0,a.Vf)(c,`Importing queue for SKU ${r} worse by ${n}m ${s}s improvement, not replacing`)}else!1===y?(0,a.Vf)(c,`Importing queue for SKU ${r} with ${p}m ${g}s remaining`):(0,a.Vf)(c,`Importing queue for SKU ${r} already popped for ${p}m ${g}s`);n.Ag.set(r,e)}}}}async function p(e,t,r){const i={handler:"content-add_to_cart",args:[e,t,r]};let d;for(;;){(0,a.Vf)(c,"Broadcasting soon-queued synchronous add-to-cart request");let e=await(0,s.ii)(i,"bestbuy");if("error"===e.result)return void(0,a.Vf)(c,`Error performing streamlined add-to-cart request: ${e.payload}`);if("not-found"===e.result){if(!0===(0,o.U2)(n.Xd.store).global.autoOpenTab){(0,a.Vf)(c,`Matching tab not found, creating new tab with url ${u}`),await(0,s.uS)(u),(0,a.Vf)(c,"Tab creation finished, re-broadcasting initial request");continue}{(0,a.Vf)(c,"Matching tab not found, showing notification and exiting");const e=await(0,s.Fy)("error","Best Buy - Tab Not Found","Matching tab not found or content script not responding. Open a matching tab or try reloading the page.",["global","notificationNotFound"]);return void browser.notifications.onButtonClicked.addListener((async function(t,r){t===e&&0===r&&await(0,s.uS)(u,!1)}))}}d=e.payload.value;break}const l=n.D7[e];if(200===d){(0,a.Vf)(c,`Successfully added ${l} to cart`);const e=await(0,s.Fy)("success","Best Buy - Successful Cart",l,["bestbuy","notificationSuccess"],["Go to Cart Page"]);browser.notifications.onButtonClicked.addListener((async function(t,r){t===e&&0===r&&await(0,s.uS)("https://www.bestbuy.com/cart",!1)}))}else if(400===d)(0,a.Vf)(c,`Failed to cart ${l}, either invaild queue or unavailable`),await(0,s.Fy)("failure","Best Buy - Failed to Cart",l,["bestbuy","notificationFailure"]);else{let e;(0,a.Vf)(c,`Error carting ${l} with status ${status}`),e=!0===(0,o.U2)(n.Xd.store).bestbuy.autoReload?`Error carting ${l} - possible rate limiting, automatically reloading tab and retrying request`:`Error carting ${l} - possible rate limiting, not automatically reloading tab`,await(0,s.Fy)("error",`Best Buy - Error ${status}`,e,["bestbuy","notificationError"])}}}))},357:(e,t,r)=>{r.a(e,(async e=>{r.d(t,{Oc:()=>f,ii:()=>b,uS:()=>p,Fy:()=>g});var o=r(261),n=r(313),a=r(309),s=r(54),i=e([a]);a=(i.then?await i:i)[0];const c="background_main";let u={success:"../resources/notification_success.mp3",failure:"../resources/notification_queue.mp3",error:"../resources/notification_ratelimit.mp3",queue:"../resources/notification_queue.mp3"},d=[],l=!1;async function f(){(0,s.Vf)(c,"Merging stored settings with extension display values");for(const[e,t]of Object.entries(a.kA)){const r=(0,o.U2)(a.Xd.store)[e];if(void 0!==r){let o=!1;for(const[n,a]of Object.entries(t.settings)){const t=r[n];void 0!==t&&typeof t==typeof a.default||((0,s.Vf)(c,`Non-matching settings [${e}][${n}], merging`),r[n]=a.default,o=!0)}!0===o&&a.Xd.set(e,r)}else{(0,s.Vf)(c,`Stored settings category [${e}] not found, initializing`);const r=Object.entries(t.settings).reduce(((e,[t,r])=>(e[t]=r.default,e)),{});a.Xd.set(e,r)}}}async function b(e,t){return(0,s.Vf)(c,"Pushing request to back of queue for sync execution"),new Promise((r=>{const o=Object.assign(Object.assign({},e),{urlMatch:t,resolve:r});d.push(o),async function(){if(!0!==l){l=!0;try{for(;d.length>0;){const e=d.shift(),t={result:"not-found",payload:{value:void 0,execute:[]}},r=JSON.stringify(e);(0,s.Vf)(c,`Executing queued sequential request with body ${r}`);const o=n.$R[null==e?void 0:e.urlMatch],a=await browser.tabs.query({url:n.$R[null==e?void 0:e.urlMatch],discarded:!1});0===a.length&&((0,s.Vf)(c,`Couldn't find matching browser tabs with URL glob ${o}, resolving with not-found response`),e.resolve(t));let i=!1;for(const r of a){(0,s.Vf)(c,`Attempting to ping tab with ID ${r.id} and URL ${r.url}`);const o=await(0,s.No)(r.id,n.Au);if("error"===o.result){(0,s.Vf)(c,`Error pinging content script: ${o.payload.value}`);continue}(0,s.Vf)(c,"Received successful ping response, broadcasting request");const a={handler:e.handler,args:e.args},u=await(0,s.No)(r.id,a);if("error"===u.result)throw new Error(`error performing handler: ${u}`);t.result="ok",t.payload=u.payload,void 0!==u.payload.execute?((0,s.Vf)(c,`Response received, performing execution handlers ${u.payload.execute}`),u.payload.execute.includes("reload")&&((0,s.Vf)(c,`Executing reload for tab with ID ${r.id}`),await browser.tabs.reload(r.id),await(0,s._v)(2500),await(0,s.YG)(r.id,100)),u.payload.execute.includes("retry")&&((0,s.Vf)(c,"Executing retry, re-pushing request to back of queue"),d.push(e),i=!0)):(0,s.Vf)(c,"Response received, no execution handler necessary");break}if(!0===i)continue;const u=JSON.stringify(t);(0,s.Vf)(c,`Finished processing queued request, responding with body ${u}`),e.resolve(t)}}catch(e){throw l=!1,e}l=!1}}()}))}async function p(e,t=!0){const r=await browser.tabs.create({active:!1,url:e});!0===t&&await(0,s.YG)(r.id,100)}async function g(e,t,r,n,s){let i;return!0===(0,o.U2)(a.Xd.store)[n[0]][n[1]]&&(i=await new Promise((e=>{chrome.notifications.create({type:"basic",title:t,message:r,iconUrl:"../resources/icon_512_dark.png",buttons:null==s?void 0:s.map((e=>({title:e})))},(function(t){e(t)}))})),setTimeout((()=>{chrome.notifications.clear(i)}),(0,o.U2)(a.Xd.store).global.durationNotification)),!0===(0,o.U2)(a.Xd.store).global.playNotifications&&new Audio(u[e]).play(),i}}))},313:(e,t,r)=>{r.d(t,{$R:()=>o,Au:()=>n});const o={bestbuy:"https://*.bestbuy.com/*"},n={handler:"ping",args:[]}},309:(e,t,r)=>{r.a(e,(async e=>{r.d(t,{Xd:()=>a,Ag:()=>s,kA:()=>i,D7:()=>u});var o=r(261),n=r(54);(0,o.fZ)([]);const a=await(0,n.MO)("settings",{}),s=await(0,n.MO)("bestbuy-queues",{}),i=(await $.ajax("../resources/changelog.json",{data:"json"}),await $.ajax("../resources/settings.json",{data:"json"})),c=await $.ajax("../resources/items_bestbuy.json",{data:"json"}),u=(0,n.ep)(c);e()}),1)},54:(e,t,r)=>{r.d(t,{_v:()=>a,ep:()=>s,Vf:()=>i,Z0:()=>c,No:()=>d,MO:()=>l,YG:()=>f,OJ:()=>b,ul:()=>p});var o=r(261),n=r(313);function a(e){return new Promise((t=>setTimeout(t,e)))}function s(e){return Object.entries(e).reduce(((e,[t,r])=>Object.assign(Object.assign({},e),Object.entries(r.items).reduce(((e,[t,r])=>(e[r.data]=r.display,e)),{}))),{})}function i(e,t,r="info"){const o=`[${(new Date).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).substring(0,8)}]\t\t(${e})\t\t${t}`;"info"===r?console.log(o):"debug"===r?console.debug(o):"warn"===r?console.warn(o):"error"===r&&console.error(o)}function c(e,t){browser.runtime.onMessage.addListener((async(r,o)=>{const n=r;let a={result:"ok",payload:{value:void 0,execute:[]}};const s=t[n.handler];if(void 0!==s){i(e,`Processing handler ${n.handler} with arguments ${JSON.stringify(n.args)}`);try{const e=await s(...n.args||[]);a.result="ok",a.payload=e}catch(t){const r=t.message;a.result="error",a.payload={value:r,execute:[]},i(e,`Error processing handler ${n.handler}: ${r}`,"error")}}return a}))}async function u(e){return await new Promise((t=>{browser.runtime.sendMessage(e).then((e=>t(e))).catch((e=>t({result:"error",payload:{value:e.message,execute:[]}})))}))}async function d(e,t){return await new Promise((r=>{browser.tabs.sendMessage(e,t).then((e=>r(e))).catch((e=>r({result:"error",payload:{value:e.message,execute:[]}})))}))}async function l(e,t){const r=await async function(e,t){const r=await browser.storage.local.get(e);return void 0===r[e]&&(r[e]=t),r[e]}(e,t),n=(0,o.fZ)(r);return browser.runtime.onMessage.addListener((async(t,r)=>{const o=t;if("update-set"===o.handler){const[t,r,a]=o.args;t===e&&n.update((e=>(e[r]=a,e)))}else if("update-delete"===o.handler){const[t,r]=o.args;t===e&&n.update((e=>(delete e[r],e)))}})),{store:n,set:(t,r)=>{n.update((e=>(e[t]=r,e))),browser.storage.local.set({[e]:(0,o.U2)(n)}),u({handler:"update-set",args:[e,t,r]})},del:t=>{n.update((e=>(delete e[t],e))),browser.storage.local.set({[e]:(0,o.U2)(n)}),u({handler:"update-del",args:[e,t]})}}}async function f(e,t,r=!0){for(;!0===r&&"ok"!==(await d(e,n.Au)).result;)await a(t)}function b(e,t=!1){let r=!1;e<0&&(e*=-1,r=!0);const o=e/1e3;let n=Math.floor(o/60),a=o%60;return!0===t&&(n=Math.floor(n),a=Math.floor(a)),[n,a,r]}function p(e){const t=e.split("-"),r=t.map((e=>parseInt(e,16)));return 1e3*parseInt(t[2]+t[3],16)/r[1]}}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return s[e](r,r.exports,c),r.loaded=!0,r.exports}c.m=s,e="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r=e=>{e&&(e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o=e=>!--e.r&&e(),n=(e,t)=>e?e.push(t):o(t),c.a=(a,s,i)=>{var c,u,d,l=i&&[],f=a.exports,b=!0,p=!1,g=(t,r,o)=>{p||(p=!0,r.r+=t.length,t.map(((t,n)=>t[e](r,o))),p=!1)},y=new Promise(((e,t)=>{d=t,u=()=>(e(f),r(l),l=0)}));y[t]=f,y[e]=(e,t)=>{if(b)return o(e);c&&g(c,e,t),n(l,e),y.catch(t)},a.exports=y,s((a=>{if(!a)return u();var s,i;c=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var s=[];a.then((e=>{i[t]=e,r(s),s=0}));var i={};return i[e]=(e,t)=>(n(s,e),a.catch(t)),i}}var c={};return c[e]=e=>o(e),c[t]=a,c})))(a);var d=new Promise(((e,r)=>{(s=()=>e(i=c.map((e=>e[t])))).r=0,g(c,s,r)}));return s.r?d:i})).then(u,d),b=!1},a=[],c.O=(e,t,r,o)=>{if(!t){var n=1/0;for(d=0;d<a.length;d++){for(var[t,r,o]=a[d],s=!0,i=0;i<t.length;i++)(!1&o||n>=o)&&Object.keys(c.O).every((e=>c.O[e](t[i])))?t.splice(i--,1):(s=!1,o<n&&(n=o));if(s){a.splice(d--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var d=a.length;d>0&&a[d-1][2]>o;d--)a[d]=a[d-1];a[d]=[t,r,o]},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.j=979,(()=>{var e={979:0};c.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[a,s,i]=r,u=0;if(a.some((t=>0!==e[t]))){for(o in s)c.o(s,o)&&(c.m[o]=s[o]);if(i)var d=i(c)}for(t&&t(r);u<a.length;u++)n=a[u],c.o(e,n)&&e[n]&&e[n][0](),e[a[u]]=0;return c.O(d)},r=self.webpackChunkakitos_automated_utilities=self.webpackChunkakitos_automated_utilities||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var u=c.O(void 0,[154],(()=>c(650)));u=c.O(u)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CZ0MsT0FBRXZRLEVBQVcsQ0FBQyxNQUFNLElBQU91TyxFQUFvQixPQUM3RmtFLEVBQXNCbEUsRUFBb0JnQyxFQUFFa0MsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9hc3luYyBtb2R1bGUiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy8uL3NvdXJjZS9iYWNrZ3JvdW5kL2JhY2tncm91bmQudHMiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvLi9zb3VyY2UvYmFja2dyb3VuZC9tb2R1bGVfYmVzdGJ1eS50cyIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy8uL3NvdXJjZS9iYWNrZ3JvdW5kL21vZHVsZV9tYWluLnRzIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzLy4vc291cmNlL3NoYXJlZC9jb25zdGFudHMudHMiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvLi9zb3VyY2Uvc2hhcmVkL2luaXRpYWxpemF0aW9ucy50cyIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy8uL3NvdXJjZS9zaGFyZWQvdXRpbGl0aWVzLnRzIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9oYXJtb255IG1vZHVsZSBkZWNvcmF0b3IiLCJ3ZWJwYWNrOi8vYWtpdG9zLWF1dG9tYXRlZC11dGlsaXRpZXMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9ha2l0b3MtYXV0b21hdGVkLXV0aWxpdGllcy93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2FraXRvcy1hdXRvbWF0ZWQtdXRpbGl0aWVzL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2VicGFja1RoZW4gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2woXCJ3ZWJwYWNrIHRoZW5cIikgOiBcIl9fd2VicGFja190aGVuX19cIjtcbnZhciB3ZWJwYWNrRXhwb3J0cyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbChcIndlYnBhY2sgZXhwb3J0c1wiKSA6IFwiX193ZWJwYWNrX2V4cG9ydHNfX1wiO1xudmFyIGNvbXBsZXRlUXVldWUgPSAocXVldWUpID0+IHtcblx0aWYocXVldWUpIHtcblx0XHRxdWV1ZS5mb3JFYWNoKChmbikgPT4gKGZuLnItLSkpO1xuXHRcdHF1ZXVlLmZvckVhY2goKGZuKSA9PiAoZm4uci0tID8gZm4ucisrIDogZm4oKSkpO1xuXHR9XG59XG52YXIgY29tcGxldGVGdW5jdGlvbiA9IChmbikgPT4gKCEtLWZuLnIgJiYgZm4oKSk7XG52YXIgcXVldWVGdW5jdGlvbiA9IChxdWV1ZSwgZm4pID0+IChxdWV1ZSA/IHF1ZXVlLnB1c2goZm4pIDogY29tcGxldGVGdW5jdGlvbihmbikpO1xudmFyIHdyYXBEZXBzID0gKGRlcHMpID0+IChkZXBzLm1hcCgoZGVwKSA9PiB7XG5cdGlmKGRlcCAhPT0gbnVsbCAmJiB0eXBlb2YgZGVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0aWYoZGVwW3dlYnBhY2tUaGVuXSkgcmV0dXJuIGRlcDtcblx0XHRpZihkZXAudGhlbikge1xuXHRcdFx0dmFyIHF1ZXVlID0gW107XG5cdFx0XHRkZXAudGhlbigocikgPT4ge1xuXHRcdFx0XHRvYmpbd2VicGFja0V4cG9ydHNdID0gcjtcblx0XHRcdFx0Y29tcGxldGVRdWV1ZShxdWV1ZSk7XG5cdFx0XHRcdHF1ZXVlID0gMDtcblx0XHRcdH0pO1xuXHRcdFx0dmFyIG9iaiA9IHt9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvYmpbd2VicGFja1RoZW5dID0gKGZuLCByZWplY3QpID0+IChxdWV1ZUZ1bmN0aW9uKHF1ZXVlLCBmbiksIGRlcC5jYXRjaChyZWplY3QpKTtcblx0XHRcdHJldHVybiBvYmo7XG5cdFx0fVxuXHR9XG5cdHZhciByZXQgPSB7fTtcblx0XHRcdFx0XHRcdHJldFt3ZWJwYWNrVGhlbl0gPSAoZm4pID0+IChjb21wbGV0ZUZ1bmN0aW9uKGZuKSk7XG5cdFx0XHRcdFx0XHRyZXRbd2VicGFja0V4cG9ydHNdID0gZGVwO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJldDtcbn0pKTtcbl9fd2VicGFja19yZXF1aXJlX18uYSA9IChtb2R1bGUsIGJvZHksIGhhc0F3YWl0KSA9PiB7XG5cdHZhciBxdWV1ZSA9IGhhc0F3YWl0ICYmIFtdO1xuXHR2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXHR2YXIgY3VycmVudERlcHM7XG5cdHZhciBvdXRlclJlc29sdmU7XG5cdHZhciByZWplY3Q7XG5cdHZhciBpc0V2YWx1YXRpbmcgPSB0cnVlO1xuXHR2YXIgbmVzdGVkID0gZmFsc2U7XG5cdHZhciB3aGVuQWxsID0gKGRlcHMsIG9uUmVzb2x2ZSwgb25SZWplY3QpID0+IHtcblx0XHRpZiAobmVzdGVkKSByZXR1cm47XG5cdFx0bmVzdGVkID0gdHJ1ZTtcblx0XHRvblJlc29sdmUuciArPSBkZXBzLmxlbmd0aDtcblx0XHRkZXBzLm1hcCgoZGVwLCBpKSA9PiAoZGVwW3dlYnBhY2tUaGVuXShvblJlc29sdmUsIG9uUmVqZWN0KSkpO1xuXHRcdG5lc3RlZCA9IGZhbHNlO1xuXHR9O1xuXHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWopID0+IHtcblx0XHRyZWplY3QgPSByZWo7XG5cdFx0b3V0ZXJSZXNvbHZlID0gKCkgPT4gKHJlc29sdmUoZXhwb3J0cyksIGNvbXBsZXRlUXVldWUocXVldWUpLCBxdWV1ZSA9IDApO1xuXHR9KTtcblx0cHJvbWlzZVt3ZWJwYWNrRXhwb3J0c10gPSBleHBvcnRzO1xuXHRwcm9taXNlW3dlYnBhY2tUaGVuXSA9IChmbiwgcmVqZWN0Rm4pID0+IHtcblx0XHRpZiAoaXNFdmFsdWF0aW5nKSB7IHJldHVybiBjb21wbGV0ZUZ1bmN0aW9uKGZuKTsgfVxuXHRcdGlmIChjdXJyZW50RGVwcykgd2hlbkFsbChjdXJyZW50RGVwcywgZm4sIHJlamVjdEZuKTtcblx0XHRxdWV1ZUZ1bmN0aW9uKHF1ZXVlLCBmbik7XG5cdFx0cHJvbWlzZS5jYXRjaChyZWplY3RGbik7XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvbWlzZTtcblx0Ym9keSgoZGVwcykgPT4ge1xuXHRcdGlmKCFkZXBzKSByZXR1cm4gb3V0ZXJSZXNvbHZlKCk7XG5cdFx0Y3VycmVudERlcHMgPSB3cmFwRGVwcyhkZXBzKTtcblx0XHR2YXIgZm4sIHJlc3VsdDtcblx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGZuID0gKCkgPT4gKHJlc29sdmUocmVzdWx0ID0gY3VycmVudERlcHMubWFwKChkKSA9PiAoZFt3ZWJwYWNrRXhwb3J0c10pKSkpO1xuXHRcdFx0Zm4uciA9IDA7XG5cdFx0XHR3aGVuQWxsKGN1cnJlbnREZXBzLCBmbiwgcmVqZWN0KTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZm4uciA/IHByb21pc2UgOiByZXN1bHQ7XG5cdH0pLnRoZW4ob3V0ZXJSZXNvbHZlLCByZWplY3QpO1xuXHRpc0V2YWx1YXRpbmcgPSBmYWxzZTtcbn07IiwidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0IEJhY2tncm91bmQgZnJvbSBcIi4vQmFja2dyb3VuZC5zdmVsdGVcIjtcclxuY29uc3QgYXBwID0gbmV3IEJhY2tncm91bmQoe1xyXG4gICAgdGFyZ2V0OiBkb2N1bWVudC5ib2R5LFxyXG4gICAgcHJvcHM6IHt9LFxyXG59KTtcclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iLCJpbXBvcnQgeyBnZXQgfSBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL3N2ZWx0ZS9zdG9yZVwiO1xyXG5pbXBvcnQgeyBiZXN0QnV5RGlzcGxheXMsIGJlc3RCdXlRdWV1ZXMsIHNldHRpbmdzIH0gZnJvbSBcIi4uL3NoYXJlZC9pbml0aWFsaXphdGlvbnNcIjtcclxuaW1wb3J0IHsgYmVzdEJ1eURlY29kZVF1ZXVlLCBleHRlbnNpb25Mb2csIG1pbnV0ZXNTZWNvbmRzIH0gZnJvbSBcIi4uL3NoYXJlZC91dGlsaXRpZXNcIjtcclxuaW1wb3J0IHsgYWRkU3luY1JlcXVlc3QsIGNyZWF0ZVRhYlJlYWR5LCBzb3VuZE5vdGlmaWNhdGlvbiB9IGZyb20gXCIuL21vZHVsZV9tYWluXCI7XHJcbjsgLy8gQm9keSBzZW50IHdpdGggYWRkVG9DYXJ0IFBPU1QgcmVxdWVzdFxyXG5jb25zdCBsb2dnaW5nU2VsZiA9IFwiYmFja2dyb3VuZF9iZXN0YnV5XCI7XHJcbmNvbnN0IGJlc3RCdXlDYXJ0VVJMID0gXCJodHRwczovL3d3dy5iZXN0YnV5LmNvbS9jYXJ0XCI7XHJcbmNvbnN0IGJlc3RCdXlUYWJVUkwgPSBcImh0dHBzOi8vd3d3LmJlc3RidXkuY29tL1wiOyAvLyBGb3IgYXV0by1vcGVuaW5nIHRhYnNcclxuLy8gU2V0dXAgYWRkLXRvLWNhcnQgcmVxdWVzdCBpbnRlcmNlcHRpb24gaGFuZGxlcnMgdGhvcnVnaCB3ZWJSZXF1ZXN0IEFQSVxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBCZXN0QnV5UmVxdWVzdEhhbmRsZXJzKCkge1xyXG4gICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBcIlNldHRpbmctdXAgd2ViUmVxdWVzdCBpbnRlcmNlcHRpb24gZm9yIGFkZFRvQ2FydCByZXF1ZXN0c1wiKTtcclxuICAgIC8vIGJhY2tncm91bmQtYmVzdGJ1eTogUmVnaXN0ZXIgd2ViUmVxdWVzdCBsaXN0ZW5lcnMgZm9yIGludGVyY2VwdGluZyBCZXN0IEJ1eSBhZGQtdG8tY2FydCByZXF1ZXN0c1xyXG4gICAgY29uc3QgcmVxdWVzdEJvZHlDYWNoZSA9IHt9O1xyXG4gICAgY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZXF1ZXN0LmFkZExpc3RlbmVyKGZ1bmN0aW9uIChkZXRhaWxzKSB7XHJcbiAgICAgICAgLy8gSWdub3JlIGZvciBHRVQgcmVxdWVzdHMgd2hpY2ggc2hvdWxkIG5ldmVyIGhhcHBlblxyXG4gICAgICAgIGlmIChkZXRhaWxzLnJlcXVlc3RCb2R5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gQ29tcGxpY2F0ZWQgcHJvY2VzcyB0byBkZWNvZGUgcmVxdWVzdCBib2R5IHRvIHN0cmluZy4uLlxyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVkQm9keSA9IGRlY29kZVVSSUNvbXBvbmVudChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkoZGV0YWlscy5yZXF1ZXN0Qm9keS5yYXdbMF0uYnl0ZXMpKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZEJvZHkgPSBKU09OLnBhcnNlKGRlY29kZWRCb2R5KTtcclxuICAgICAgICAgICAgcmVxdWVzdEJvZHlDYWNoZVtkZXRhaWxzLnJlcXVlc3RJZF0gPSBwYXJzZWRCb2R5O1xyXG4gICAgICAgICAgICAvLyBQcmVwYXJlIGxpc3Qgb2YgU0tVKHMpIGZvciBvdXRwdXQgZnJvbSBwYXJzZWQgYm9keVxyXG4gICAgICAgICAgICBjb25zdCBza3VzID0gcGFyc2VkQm9keS5pdGVtcy5tYXAoaXRlbSA9PiBpdGVtLnNrdUlkKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFNLVXMgPSBKU09OLnN0cmluZ2lmeShza3VzKTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgW3dlYlJlcXVlc3Qub25CZWZvcmVSZXF1ZXN0XSBGaW5pc2hlZCBjYWNoaW5nIFBPU1QgYm9keSBmb3IgcmVxdWVzdCAke2RldGFpbHMucmVxdWVzdElkfSB3aXRoIFNLVShzKSAke3NlcmlhbGl6ZWRTS1VzfWAsIFwiZGVidWdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgeyB1cmxzOiBbXCIqOi8vKi5iZXN0YnV5LmNvbS9jYXJ0L2FwaS92MS9hZGRUb0NhcnRcIl0gfSwgW1wicmVxdWVzdEJvZHlcIiwgXCJibG9ja2luZ1wiXSk7XHJcbiAgICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVNlbmRIZWFkZXJzLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChkZXRhaWxzKSB7XHJcbiAgICAgICAgLy8gUGFyc2UgcGF5bG9hZCBmcm9tIGNhY2hlZCByZXF1ZXN0IGJvZHlcclxuICAgICAgICBjb25zdCBjYWNoZWRCb2R5ID0gcmVxdWVzdEJvZHlDYWNoZVtkZXRhaWxzLnJlcXVlc3RJZF07IC8vIEluIGNhc2UgaWYgc29tZWhvdyBub3QgY2FjaGVkXHJcbiAgICAgICAgaWYgKGNhY2hlZEJvZHkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBDYWNoZWQgYm9keSBkb2Vzbid0IGV4aXN0LCBzaG91bGRuJ3QgaGFwcGVuXHJcbiAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYFt3ZWJSZXF1ZXN0Lm9uQmVmb3JlU2VuZEhlYWRlcnNdIENvdWxkbid0IGZpbmQgY2FjaGVkIFBPU1QgYm9keSBmb3IgcmVxdWVzdCAke2RldGFpbHMucmVxdWVzdElkfWAsIFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9LCB7IHVybHM6IFtcIio6Ly8qLmJlc3RidXkuY29tL2NhcnQvYXBpL3YxL2FkZFRvQ2FydFwiXSB9LCBbXCJyZXF1ZXN0SGVhZGVyc1wiLCBcImJsb2NraW5nXCJdKTtcclxuICAgIGNocm9tZS53ZWJSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uIChkZXRhaWxzKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIFRyYWNrIHdoZXRoZXIgaGVhZGVycyBmb3VuZCBiZWZvcmUgYWRkaW5nXHJcbiAgICAgICAgbGV0IGEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQgPSBcIlwiO1xyXG4gICAgICAgIGxldCBhMmNUcmFuc2FjdGlvbkNvZGUgPSBcIlwiO1xyXG4gICAgICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIChkZXRhaWxzLnJlc3BvbnNlSGVhZGVycyB8fCBbXSkpIHtcclxuICAgICAgICAgICAgaWYgKGhlYWRlci5uYW1lID09PSBcImEyY3RyYW5zYWN0aW9ucmVmZXJlbmNlaWRcIikge1xyXG4gICAgICAgICAgICAgICAgYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCA9IGhlYWRlci52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChoZWFkZXIubmFtZSA9PT0gXCJhMmN0cmFuc2FjdGlvbmNvZGVcIikge1xyXG4gICAgICAgICAgICAgICAgYTJjVHJhbnNhY3Rpb25Db2RlID0gaGVhZGVyLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGJvdGggaGVhZGVycyBleGlzdCBhbmQgc2V0dGluZyBlbmFibGVkLCBhZGQgcXVldWUgdXNpbmcgc2t1IGZyb20gY2FjaGVkIGJvZHlcclxuICAgICAgICBpZiAoKGRldGFpbHMuc3RhdHVzQ29kZSAhPT0gMjAwIHx8IGdldChzZXR0aW5ncy5zdG9yZSlbXCJiZXN0YnV5XCJdW1wicmVxdWV1ZVN1Y2Nlc3NcIl0gPT09IHRydWUpXHJcbiAgICAgICAgICAgICYmIGEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQgIT09IFwiXCIgJiYgYTJjVHJhbnNhY3Rpb25Db2RlICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIC8vIFJldHJpZXZlIFNLVSBmcm9tIGNhY2hlZCByZXF1ZXN0IGJvZHksIGFzc3VtZSBTS1UgaXMgZGVzaXJlZFxyXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRCb2R5ID0gcmVxdWVzdEJvZHlDYWNoZVtkZXRhaWxzLnJlcXVlc3RJZF07IC8vIEluIGNhc2UgaWYgc29tZWhvdyBub3QgY2FjaGVkXHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRCb2R5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIENhY2hlZCBib2R5IGRvZXNuJ3QgZXhpc3QsIHNob3VsZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYFt3ZWJSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkXSBDb3VsZG4ndCBmaW5kIGNhY2hlZCBQT1NUIGJvZHkgZm9yIHJlcXVlc3QgJHtkZXRhaWxzLnJlcXVlc3RJZH1gLCBcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHNrdSA9IChfYSA9IGNhY2hlZEJvZHkuaXRlbXNbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5za3VJZDsgLy8gQXNzdW1lIGFsd2F5cyBkZWZpbmVkXHJcbiAgICAgICAgICAgIC8vIERlY29kZSByZW1haW5pbmcgcXVldWUgdGltZSBmcm9tIGEyY3RyYW5zYWN0aW9uY29kZVxyXG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy8gSW4gbWlsbGlzZWNvbmRzIGZyb20gZXBvY2hcclxuICAgICAgICAgICAgY29uc3QgcXVldWVUaW1lID0gYmVzdEJ1eURlY29kZVF1ZXVlKGEyY1RyYW5zYWN0aW9uQ29kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IFttaW51dGVzLCBzZWNvbmRzXSA9IG1pbnV0ZXNTZWNvbmRzKHF1ZXVlVGltZSk7IC8vIE9ubHkgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xyXG4gICAgICAgICAgICBjb25zdCBxdWV1ZURhdGEgPSB7IHN0YXJ0VGltZSwgYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCwgYTJjVHJhbnNhY3Rpb25Db2RlLCBxdWV1ZVRpbWUgfTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgW3dlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWRdIFF1ZXVlIHJlc3BvbnNlIGhlYWRlcnMgZGV0ZWN0ZWQgZm9yIHJlcXVlc3QgJHtkZXRhaWxzLnJlcXVlc3RJZH0gd2l0aCB0aW1lICR7bWludXRlc31tICR7c2Vjb25kc31zYCk7XHJcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCBhbmQgYnJvYWRjYXN0IHF1ZXVlIGRhdGEgdGhyb3VnaCBXcml0YWJsZVxyXG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IFwiXCI7IC8vIFRvIGJlIGZpbGxlZCB3aXRoaW4gc3RhdGVtZW50c1xyXG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0TmFtZSA9IGJlc3RCdXlEaXNwbGF5c1tza3VdO1xyXG4gICAgICAgICAgICBsZXQgZXhpc3RpbmdRdWV1ZXMgPSBnZXQoYmVzdEJ1eVF1ZXVlcy5zdG9yZSlbc2t1XSB8fCB7fTtcclxuICAgICAgICAgICAgLy8gRWl0aGVyIGFwcGVuZCB0byBleGlzdGluZyBvciByZXBsYWNlIHF1ZXVlIGRlcGVuZGluZyBvbiBzZXR0aW5nXHJcbiAgICAgICAgICAgIGlmIChnZXQoc2V0dGluZ3Muc3RvcmUpW1wiYmVzdGJ1eVwiXVtcInJlcGxhY2VRdWV1ZVwiXSA9PT0gdHJ1ZSAmJiBPYmplY3Qua2V5cyhleGlzdGluZ1F1ZXVlcykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSByZXBsYWNlbWVudCBhbmQgY2hlY2sgd2hldGhlciBuZXcgcXVldWUgaW1wcm92ZWRcclxuICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nUXVldWVzIHVwZGF0ZWQgd2l0aGluIHVwZGF0ZVJlcGxhY2VRdWV1ZXMgd2hlbiByYW5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBleGlzdGluZ1F1ZXVlcyBoYXMgdG8gYmUgcmUtc2V0IGJlY2F1c2Ugbm8gcGFzcyBieSB2YWx1ZSBiZXR3ZWVuIGZpbGVzXHJcbiAgICAgICAgICAgICAgICBsZXQgc2hvcnRlcjtcclxuICAgICAgICAgICAgICAgIGxldCBkaWZmTWludXRlcztcclxuICAgICAgICAgICAgICAgIGxldCBkaWZmU2Vjb25kcztcclxuICAgICAgICAgICAgICAgIChbZXhpc3RpbmdRdWV1ZXMsIHNob3J0ZXIsIGRpZmZNaW51dGVzLCBkaWZmU2Vjb25kc10gPSB1cGRhdGVSZXBsYWNlUXVldWVzKGV4aXN0aW5nUXVldWVzLCBxdWV1ZURhdGEsIHN0YXJ0VGltZSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNob3J0ZXIgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHF1ZXVlIGhhcyBpbXByb3ZlbWVudCwgc2hvdyBub3RpZmljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFske3Byb2R1Y3ROYW1lfV0gUXVldWUgcmVwbGFjZW1lbnQgZW5hYmxlZCwgcmVwbGFjaW5nIHdpdGggJHtkaWZmTWludXRlc31tICR7ZGlmZlNlY29uZHN9cyBpbXByb3ZlbWVudGA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBObyBpbXByb3ZlbWVudCwgY2xlYXIgc3RyYWdnbGVycyBhbmQgc2hvdyBub3RpZmljYXRpb25cclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFske3Byb2R1Y3ROYW1lfV0gUXVldWUgcmVwbGFjZW1lbnQgZW5hYmxlZCwgbm90IHJlcGxhY2luZyBiZWNhdXNlICR7ZGlmZk1pbnV0ZXN9bSAke2RpZmZTZWNvbmRzfXMgd29yc2VgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBbJHtwcm9kdWN0TmFtZX1dIEludGVyY2VwdGVkIG5ldyBxdWV1ZSB3aXRoIHRpbWVyICR7bWludXRlc31tICR7c2Vjb25kc31zYDtcclxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcGVyZm9ybSByZWd1bGFyIFwiYXBwZW5kaW5nXCIgdG8gcXVldWVzXHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ1F1ZXVlc1thMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkXSA9IHF1ZXVlRGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBiZXN0QnV5UXVldWVzLnNldChza3UsIGV4aXN0aW5nUXVldWVzKTtcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IGZvciBzZW5kaW5nIG5vdGlmaWNhdGlvbiB3aXRoIHNvdW5kXHJcbiAgICAgICAgICAgIC8vIENhbid0IGF3YWl0IHNvdW5kTm90aWZpY2F0aW9uIGJlY2F1c2UgYXN5bmMgbm90IGFsbG93ZWQ/XHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gXCJCZXN0IEJ1eSAtIFF1ZXVlIEludGVyY2VwdGVkXCI7XHJcbiAgICAgICAgICAgIHNvdW5kTm90aWZpY2F0aW9uKFwicXVldWVcIiwgdGl0bGUsIG1lc3NhZ2UsIFtcImJlc3RidXlcIiwgXCJub3RpZmljYXRpb25RdWV1ZVwiXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERlbGV0ZSBjYWNoZWQgYm9keSB3aXRoIHJlcXVlc3QgSUQgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcclxuICAgICAgICBkZWxldGUgcmVxdWVzdEJvZHlDYWNoZVtkZXRhaWxzLnJlcXVlc3RJZF07XHJcbiAgICB9LCB7IHVybHM6IFtcIio6Ly8qLmJlc3RidXkuY29tL2NhcnQvYXBpL3YxL2FkZFRvQ2FydFwiXSB9LCBbXCJyZXNwb25zZUhlYWRlcnNcIiwgXCJibG9ja2luZ1wiXSk7XHJcbn1cclxuLy8gU2V0dXAgcGVyaW9kIGludGVydmFsIGZvciBhdXRvbWF0aWNhbGx5IGFkZGluZyBhbmQgdHJpbW1pbmcgcXVldWVzXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cEJlc3RCdXlJbnRlcnZhbCgpIHtcclxuICAgIGNvbnN0IGJsYWNrbGlzdGVkID0gbmV3IFNldCgpOyAvLyBGYWlsZWQgcXVldWVzIHRvIGlnbm9yZSBmb3IgYXV0b21hdGljIGFkZGluZ1xyXG4gICAgc2V0SW50ZXJ2YWwoYXN5bmMgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBTS1UgZGF0YSBhbmQgaW5kaXZpZHVhbCBxdWV1ZXMgd2l0aGluIGNoZWNraW5nIGZvciByZWFkaW5lc3NcclxuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBJbiBtaWxsaXNlY29uZHMgZnJvbSBlcG9jaFxyXG4gICAgICAgIGZvciAoY29uc3QgW3NrdSwgc2t1UXVldWVEYXRhXSBvZiBPYmplY3QuZW50cmllcyhnZXQoYmVzdEJ1eVF1ZXVlcy5zdG9yZSkpKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2EyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQsIHF1ZXVlRGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoc2t1UXVldWVEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBxdWV1ZSBwb3BwZWQsIGlmIHNvIGJyb2FkY2FzdCBib3RoIGFkZC10by1jYXJ0IGFuZCBkZWxldGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGltZSA9IHF1ZXVlRGF0YS5zdGFydFRpbWUgKyBxdWV1ZURhdGEucXVldWVUaW1lIC0gY3VycmVudFRpbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nVGltZSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBhZGQgYW5kIG5vdGlmeSBpZiBub3QgZXhwaXJlZCwgb3RoZXJ3aXNlIHNpbGVudGx5IGRlbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lID4gLTUgKiA2MCAqIDEwMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2hldGhlciBzZXR0aW5nIHRvIGF1dG8tYWRkIGlzIGVuYWJsZWQgYmVmb3JlIHByb2NlZWRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldChzZXR0aW5ncy5zdG9yZSlbXCJiZXN0YnV5XCJdW1wiYXV0b0FkZFF1ZXVlXCJdID09PSB0cnVlICYmIGJsYWNrbGlzdGVkLmhhcyhxdWV1ZURhdGEuYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2coXCJiYWNrZ3JvdW5kLWJlc3RidXlcIiwgYFF1ZXVlIHBvcHBlZCBmb3IgU0tVICR7c2t1fSwgYnJvYWRjYXN0aW5nIGFkZC10by1jYXJ0IHJlcXVlc3RgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBibGFja2xpc3Qgc28gcXVldWUgaXNuJ3QgcmUtZXhlY3V0ZWQsIG90aGVyIGhhbmRsZXIgZGVhbHMgd2l0aCByZXRyeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0ZWQuYWRkKHF1ZXVlRGF0YS5hMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYWRkLXRvLWNhcnQgc2VxdWVudGlhbGx5IHdpdGggb3RoZXIgcmVxdWVzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NBZGRUb0NhcnQoc2t1LCBxdWV1ZURhdGEuYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCwgcXVldWVEYXRhLmEyY1RyYW5zYWN0aW9uQ29kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2coXCJiYWNrZ3JvdW5kLWJlc3RidXlcIiwgYFF1ZXVlIHBvcHBlZCBmb3IgU0tVICR7c2t1fSwgd2FpdGluZyBmb3IgbWFudWFsIGJlY2F1c2Ugb2Ygc2V0dGluZ2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2coXCJiYWNrZ3JvdW5kLWJlc3RidXlcIiwgYFF1ZXVlIHBvcHBlZCBidXQgZXhwaXJlZCBmb3IgJHtza3V9LCBzaWxlbnRseSBkZWxldGluZ2ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBzZXQgb2YgYmxhY2tsaXN0ZWQgaWYgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhY2tsaXN0ZWQuZGVsZXRlKHF1ZXVlRGF0YS5hMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSBkZWxldGlvbiB1c2luZyBjdXN0b20gbG9naWNcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNrdVF1ZXVlRGF0YVthMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEJ1eVF1ZXVlcy5zZXQoc2t1LCBza3VRdWV1ZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMCk7XHJcbn1cclxuLy8gVXBkYXRlIGFuZCByZXBsYWNlIHF1ZXVlcyBmb3IgZ2l2ZW4gZXhpc3RpbmcgcXVldWVzLCBrZWVwaW5nIHRoZSBzaG9ydGVzdFxyXG5mdW5jdGlvbiB1cGRhdGVSZXBsYWNlUXVldWVzKGV4aXN0aW5nUXVldWVzLCBuZXdRdWV1ZURhdGEsIGN1cnJlbnRUaW1lKSB7XHJcbiAgICAvLyBEZWNvbnN0cnVjdCBjdXJyZW50IHF1ZXVlcyBpbnRvIHJlbWFpbmluZyB0aW1lXHJcbiAgICBjb25zdCBleGlzdGluZ1F1ZXVlc01hcHBlZCA9IE9iamVjdC5lbnRyaWVzKGV4aXN0aW5nUXVldWVzKVxyXG4gICAgICAgIC5tYXAoKFtxdWV1ZUtleSwgcXVldWVEYXRhXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSBxdWV1ZURhdGEuc3RhcnRUaW1lICsgcXVldWVEYXRhLnF1ZXVlVGltZSAtIGN1cnJlbnRUaW1lO1xyXG4gICAgICAgIHJldHVybiBbcmVtYWluaW5nVGltZSwgcXVldWVLZXksIHF1ZXVlRGF0YV07XHJcbiAgICB9KTsgLy8gW3JlbWFpbmluZywgcXVldWVLZXksIHF1ZXVlRGF0YV1cclxuICAgIC8vIFNvcnQgYmVmb3JlIGFkZGluZyBuZXcgcXVldWUsIGluZWZmaWNpZW50IEkga25vd1xyXG4gICAgZXhpc3RpbmdRdWV1ZXNNYXBwZWQuc29ydCgocXVldWUxLCBxdWV1ZTIpID0+IHsgcmV0dXJuIHF1ZXVlMVswXSAtIHF1ZXVlMlswXTsgfSk7XHJcbiAgICBjb25zdCBwcmV2aW91c0Jlc3RSZW1haW5pbmcgPSBleGlzdGluZ1F1ZXVlc01hcHBlZFswXVswXTtcclxuICAgIC8vIENoZWNrIHdoZXRoZXIgcHJldmlvdXMgcXVldWUgdGltZShzKSBhcmUgc2hvcnRlciBcclxuICAgIGNvbnN0IG5ld1F1ZXVlS2V5ID0gbmV3UXVldWVEYXRhLmEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQ7XHJcbiAgICBjb25zdCBuZXdSZW1haW5pbmcgPSBuZXdRdWV1ZURhdGEuc3RhcnRUaW1lICsgbmV3UXVldWVEYXRhLnF1ZXVlVGltZSAtIGN1cnJlbnRUaW1lO1xyXG4gICAgZXhpc3RpbmdRdWV1ZXNNYXBwZWQucHVzaChbbmV3UmVtYWluaW5nLCBuZXdRdWV1ZUtleSwgbmV3UXVldWVEYXRhXSk7XHJcbiAgICAvLyBTb3J0IGFuZCBjaGVjayB3aGV0aGVyIElEIG9mIGZpcnN0IGluZGV4IHN3aXRjaGVzIHRvIG5ld1xyXG4gICAgZXhpc3RpbmdRdWV1ZXNNYXBwZWQuc29ydCgocXVldWUxLCBxdWV1ZTIpID0+IHsgcmV0dXJuIHF1ZXVlMVswXSAtIHF1ZXVlMlswXTsgfSk7XHJcbiAgICBjb25zdCBbZGlmZk1pbnV0ZXMsIGRpZmZTZWNvbmRzLCBkaWZmTmVnYXRpdmVdID0gbWludXRlc1NlY29uZHMocHJldmlvdXNCZXN0UmVtYWluaW5nIC0gbmV3UmVtYWluaW5nLCB0cnVlKTtcclxuICAgIGNvbnN0IHNob3J0ZXIgPSBleGlzdGluZ1F1ZXVlc01hcHBlZFswXVsxXSA9PT0gbmV3UXVldWVEYXRhLmEyY1RyYW5zYWN0aW9uUmVmZXJlbmNlSWQ7XHJcbiAgICAvLyBUcmltIGV2ZXJ5dGhpbmcgYnV0IHRoZSBzaG9ydGVzdCBxdWV1ZVxyXG4gICAgZXhpc3RpbmdRdWV1ZXMgPSB7fTtcclxuICAgIGNvbnN0IHNob3J0ZXN0UXVldWUgPSBleGlzdGluZ1F1ZXVlc01hcHBlZFswXTtcclxuICAgIGV4aXN0aW5nUXVldWVzW3Nob3J0ZXN0UXVldWVbMV1dID0gc2hvcnRlc3RRdWV1ZVsyXTtcclxuICAgIHJldHVybiBbZXhpc3RpbmdRdWV1ZXMsIHNob3J0ZXIsIGRpZmZNaW51dGVzLCBkaWZmU2Vjb25kc107XHJcbn1cclxuLy8gTWVyZ2UgcHJvZHVjdCBxdWV1ZXMgcmV0cmlldmVkIGZyb20gcGFnZSB3aXRoIGN1cnJlbnRseSB0cmFja2VkIHF1ZXVlc1xyXG4vLyBFaXRoZXIgYXBwZW5kIG9yIG1lcmdlIHRvIGtlZXAgc2hvcnRlc3QgZGVwZW5kaW5nIG9uIHNldHRpbmdcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1lcmdlUHJvZHVjdFF1ZXVlcyhtZXJnZVF1ZXVlRGF0YSkge1xyXG4gICAgLy8gSXRlcmF0ZSBvdmVyIGJyb3dzZXIgcXVldWUgZm9yIGVhY2ggU0tVLCBtZXJnaW5nIHVuc2VlbiB3aXRoIGN1cnJlbnRseSB0cmFja2VkXHJcbiAgICBjb25zdCBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvLyBJbiBtaWxsaXNlY29uZHMgZnJvbSBlcG9jaFxyXG4gICAgZm9yIChjb25zdCBbc2t1LCBza3VRdWV1ZURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKG1lcmdlUXVldWVEYXRhKSkge1xyXG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgcXVldWUgd2l0aCBnaXZlbiBJRCBpcyBiZWluZyB0cmFja2VkXHJcbiAgICAgICAgbGV0IGV4aXN0aW5nUXVldWVzID0gZ2V0KGJlc3RCdXlRdWV1ZXMuc3RvcmUpW3NrdV0gfHwge307XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nUXVldWVzW3NrdVF1ZXVlRGF0YVsxXV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBEZWNvZGUgcXVldWUgYW5kIHJlbWFpbmluZyB0aW1lIGZyb20gZGF0YVxyXG4gICAgICAgICAgICBjb25zdCBbc3RhcnRUaW1lLCBhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkLCBhMmNUcmFuc2FjdGlvbkNvZGVdID0gc2t1UXVldWVEYXRhO1xyXG4gICAgICAgICAgICBjb25zdCBxdWV1ZVRpbWUgPSBiZXN0QnV5RGVjb2RlUXVldWUoc2t1UXVldWVEYXRhWzFdKTtcclxuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGltZSA9IHN0YXJ0VGltZSArIHF1ZXVlVGltZSAtIGN1cnJlbnRUaW1lO1xyXG4gICAgICAgICAgICBjb25zdCBbcmVtYWluaW5nTWludXRlcywgcmVtYWluaW5nU2Vjb25kcywgbmVnYXRpdmVdID0gbWludXRlc1NlY29uZHMocmVtYWluaW5nVGltZSk7XHJcbiAgICAgICAgICAgIC8vIERvbid0IGJvdGhlciBhZGRpbmcgaWYgcXVldWUgYWxyZWFkeSBleHBpcmVkXHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lID4gLTUgKiA2MCAqIDEwMDApIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCBhbmQgc3RvcmUgcXVldWUgZGF0YSBmb3IgZ2l2ZW4gU0tVLCB0aGVuIGFwcGVuZCBvciByZXBsYWNlIGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBleGlzdGluZ1F1ZXVlcyB1cGRhdGVkIHdpdGhpbiB1cGRhdGVSZXBsYWNlUXVldWVzIHdoZW4gcmFuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdWV1ZURhdGEgPSB7IHN0YXJ0VGltZSwgYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCwgYTJjVHJhbnNhY3Rpb25Db2RlLCBxdWV1ZVRpbWUgfTtcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIEJlc3QgQnV5IHNldHRpbmcgdG8gc2VlIHdoZXRoZXIgcmVwbGFjZW1lbnQgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0KHNldHRpbmdzLnN0b3JlKVtcImJlc3RidXlcIl1bXCJyZXBsYWNlUXVldWVcIl0gPT09IHRydWUgJiYgT2JqZWN0LmtleXMoZXhpc3RpbmdRdWV1ZXMpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHVwZGF0ZSBhbmQgcmVwbGFjZW1lbnQgd2l0aCBpbXBvcnQgcXVldWVcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2hvcnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlmZk1pbnV0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpZmZTZWNvbmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIChbZXhpc3RpbmdRdWV1ZXMsIHNob3J0ZXIsIGRpZmZNaW51dGVzLCBkaWZmU2Vjb25kc10gPSB1cGRhdGVSZXBsYWNlUXVldWVzKGV4aXN0aW5nUXVldWVzLCBxdWV1ZURhdGEsIHN0YXJ0VGltZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG9ydGVyID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEltcG9ydGVkIHF1ZXVlIGltcHJvdmVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYEltcG9ydGluZyBxdWV1ZSBmb3IgU0tVICR7c2t1fSBoYXMgJHtkaWZmTWludXRlc31tICR7ZGlmZlNlY29uZHN9cyBpbXByb3ZlbWVudCwgcmVwbGFjaW5nYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JzZSBpbXBvcnRlZCBxdWV1ZSwgZG9uJ3QgcmVwbGFjZSBhbmQgaWdub3JlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYEltcG9ydGluZyBxdWV1ZSBmb3IgU0tVICR7c2t1fSB3b3JzZSBieSAke2RpZmZNaW51dGVzfW0gJHtkaWZmU2Vjb25kc31zIGltcHJvdmVtZW50LCBub3QgcmVwbGFjaW5nYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVyZm9ybSByZWd1bGFyIGFwcGVuZGluZyB0byBleGlzdGluZyBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lZ2F0aXZlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBRdWV1ZSBoYXNuJ3QgcG9wcGVkIHlldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBJbXBvcnRpbmcgcXVldWUgZm9yIFNLVSAke3NrdX0gd2l0aCAke3JlbWFpbmluZ01pbnV0ZXN9bSAke3JlbWFpbmluZ1NlY29uZHN9cyByZW1haW5pbmdgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1ZXVlIGFscmVhZHkgcG9wcGVkIGJ1dCBoYXNuJ3QgZXhwaXJlZCB5ZXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgSW1wb3J0aW5nIHF1ZXVlIGZvciBTS1UgJHtza3V9IGFscmVhZHkgcG9wcGVkIGZvciAke3JlbWFpbmluZ01pbnV0ZXN9bSAke3JlbWFpbmluZ1NlY29uZHN9c2ApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJlc3RCdXlRdWV1ZXMuc2V0KHNrdSwgZXhpc3RpbmdRdWV1ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIFdyYXBwZXIgZm9yIHByb2Nlc3NpbmcgYWRkLXRvLWNhcnQgYnkgYnJvYWRjYXN0aW5nIHRvIHN0cmVhbWxpbmUgaGFuZGxlclxyXG4vLyBEZXBlbmRpbmcgb24gc2V0dGluZ3MgYW5kIHJlc3VsdCBzdGF0dXMsIHBsYXlzIHNvdW5kIGFuZCBzaG93cyBub3RpZmljYXRpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQWRkVG9DYXJ0KHNrdSwgYTJjVHJhbnNhY3Rpb25SZWZlcmVuY2VJZCwgYTJjVHJhbnNhY3Rpb25Db2RlKSB7XHJcbiAgICAvLyBDb25zdHJ1Y3QgcmVxdWVzdCBmb3IgYnJvYWRjYXN0aW5nIHRvIHN0cmVhbWxpbmVkXHJcbiAgICBjb25zdCBzeW5jUmVxdWVzdCA9IHtcclxuICAgICAgICBoYW5kbGVyOiBcImNvbnRlbnQtYWRkX3RvX2NhcnRcIixcclxuICAgICAgICBhcmdzOiBbc2t1LCBhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkLCBhMmNUcmFuc2FjdGlvbkNvZGVdLFxyXG4gICAgfTtcclxuICAgIC8vIEtlZXAgYnJvYWRjYXN0aW5nIHJlcXVlc3QgdW50aWwgcmVzcG9uc2UgZ290dGVuXHJcbiAgICBsZXQgcHJvY2Vzc0FkZFN0YXR1cztcclxuICAgIGRvIHtcclxuICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIFwiQnJvYWRjYXN0aW5nIHNvb24tcXVldWVkIHN5bmNocm9ub3VzIGFkZC10by1jYXJ0IHJlcXVlc3RcIik7XHJcbiAgICAgICAgbGV0IHByb2Nlc3NBZGRSZXNwb25zZSA9IGF3YWl0IGFkZFN5bmNSZXF1ZXN0KHN5bmNSZXF1ZXN0LCBcImJlc3RidXlcIik7XHJcbiAgICAgICAgaWYgKHByb2Nlc3NBZGRSZXNwb25zZS5yZXN1bHQgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgICAgICAvLyBFcnJvciBwZXJmb3JtaW5nIHJlcXVlc3QgdG8gYmFja2dyb3VuZCwgc2hvdWxkIG5ldmVyIGhhcHBlblxyXG4gICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBFcnJvciBwZXJmb3JtaW5nIHN0cmVhbWxpbmVkIGFkZC10by1jYXJ0IHJlcXVlc3Q6ICR7cHJvY2Vzc0FkZFJlc3BvbnNlLnBheWxvYWR9YCk7XHJcbiAgICAgICAgICAgIHJldHVybjsgLy8gQWRkIG90aGVyIGhhbmRsZXIgZXZlbnR1YWxseVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwcm9jZXNzQWRkUmVzcG9uc2UucmVzdWx0ID09PSBcIm5vdC1mb3VuZFwiKSB7IC8vIEZhaWxlZCB0byBjb21tdW5pY2F0ZSB3aXRoIGJhY2tncm91bmRcclxuICAgICAgICAgICAgLy8gQ2hlY2sgcmVsZXZhbnQgZ2xvYmFsIHNldHRpbmcgZm9yIGFjdGlvblxyXG4gICAgICAgICAgICBpZiAoZ2V0KHNldHRpbmdzLnN0b3JlKVtcImdsb2JhbFwiXVtcImF1dG9PcGVuVGFiXCJdID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBNYXRjaGluZyB0YWIgbm90IGZvdW5kLCBjcmVhdGluZyBuZXcgdGFiIHdpdGggdXJsICR7YmVzdEJ1eVRhYlVSTH1gKTtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBtYXRjaGluZyB0YWIgYW5kIGlkbGUgdW50aWwgcmVhZHlcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZVRhYlJlYWR5KGJlc3RCdXlUYWJVUkwpO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgVGFiIGNyZWF0aW9uIGZpbmlzaGVkLCByZS1icm9hZGNhc3RpbmcgaW5pdGlhbCByZXF1ZXN0YCk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYE1hdGNoaW5nIHRhYiBub3QgZm91bmQsIHNob3dpbmcgbm90aWZpY2F0aW9uIGFuZCBleGl0aW5nYCk7XHJcbiAgICAgICAgICAgICAgICAvLyBQbGF5IHNvdW5kIG5vdGlmaWNhdGlvbiB3aXRoIGdpdmVuIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3RpZmljYXRpb25JZCA9IGF3YWl0IHNvdW5kTm90aWZpY2F0aW9uKFwiZXJyb3JcIiwgXCJCZXN0IEJ1eSAtIFRhYiBOb3QgRm91bmRcIiwgXCJNYXRjaGluZyB0YWIgbm90IGZvdW5kIG9yIGNvbnRlbnQgc2NyaXB0IG5vdCByZXNwb25kaW5nLiBPcGVuIGEgbWF0Y2hpbmcgdGFiIG9yIHRyeSByZWxvYWRpbmcgdGhlIHBhZ2UuXCIsIFtcImdsb2JhbFwiLCBcIm5vdGlmaWNhdGlvbk5vdEZvdW5kXCJdKTtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaCBvbmNsaWNrIGhhbmRsZXIgdG8gb3BlbiBtYXRjaGluZyB0YWIgd2hlbiBub3RpZmljYXRpb24gYnV0dG9uIGNsaWNrZWRcclxuICAgICAgICAgICAgICAgIC8vIEFyZSB0aGVyZSBpc3N1ZXMgd2l0aCBtZW1vcnkgbGVha3Mgd2hlbiBsaXN0ZW5lcnMgYXJlIGFkZGVkP1xyXG4gICAgICAgICAgICAgICAgYnJvd3Nlci5ub3RpZmljYXRpb25zLm9uQnV0dG9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihhc3luYyBmdW5jdGlvbiAoY2xpY2tlZElkLCBidXR0b25JbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIDAgaW5kZXggbWVhbnMgb3BlbiBjYXJ0IHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpY2tlZElkID09PSBub3RpZmljYXRpb25JZCAmJiBidXR0b25JbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGFiIGJ1dCBkb24ndCB3YXN0ZSB3YWl0aW5nIHRvIGxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlVGFiUmVhZHkoYmVzdEJ1eVRhYlVSTCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9ubHkgcmVtYWluaW5nIHJlc3VsdCBwb3NzaWJpbGl0eSBpcyBva1xyXG4gICAgICAgIHByb2Nlc3NBZGRTdGF0dXMgPSBwcm9jZXNzQWRkUmVzcG9uc2UucGF5bG9hZC52YWx1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgIH0gd2hpbGUgKHRydWUpOyAvLyBLZWVwIGxvb3BpbmcsIHVzdWFsbHkgb25seSByZXF1aXJlcyBzaW5nbGUgaXRlcmF0aW9uXHJcbiAgICAvLyBTaG93IG5vdGlmaWNhdGlvbiBhbmQgcGxheSBzb3VuZCBkZXBlbmRpbmcgb24gc3RhdHVzIGFuZCBzZXR0aW5ncyAgICAgICAgICAgIFxyXG4gICAgLy8gSW5pdGlhbGl6ZSB2YXJpYWJsZXMgaW4gYWR2YW5jZSB0byBwcmV2ZW50IGhhcmQtY29kaW5nP1xyXG4gICAgLy8gVE9ETyBzdHJlYW1saW5lIGNhbGxiYWNrcyBhbmQgc2VuZGluZyB1bmRlciBpZi9lbHNlIHN0YXRlbWVudHNcclxuICAgIGNvbnN0IHByb2R1Y3ROYW1lID0gYmVzdEJ1eURpc3BsYXlzW3NrdV07XHJcbiAgICAvLyBIYW5kbGVyIHJhbiBva2F5LCBwZWZvcm0gZGVmYXVsdCBhY3Rpb25zXHJcbiAgICBpZiAocHJvY2Vzc0FkZFN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IGNhcnRlZCAobWlnaHQgbm90IHNob3cgaW4gY2FydCB0aG91Z2gpXHJcbiAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgU3VjY2Vzc2Z1bGx5IGFkZGVkICR7cHJvZHVjdE5hbWV9IHRvIGNhcnRgKTtcclxuICAgICAgICAvLyBQbGF5IHNvdW5kIG5vdGlmaWNhdGlvbiB3aXRoIGdpdmVuIGluZm9ybWF0aW9uXHJcbiAgICAgICAgY29uc3Qgbm90aWZpY2F0aW9uSWQgPSBhd2FpdCBzb3VuZE5vdGlmaWNhdGlvbihcInN1Y2Nlc3NcIiwgXCJCZXN0IEJ1eSAtIFN1Y2Nlc3NmdWwgQ2FydFwiLCBwcm9kdWN0TmFtZSwgW1wiYmVzdGJ1eVwiLCBcIm5vdGlmaWNhdGlvblN1Y2Nlc3NcIl0sIFtcIkdvIHRvIENhcnQgUGFnZVwiXSk7XHJcbiAgICAgICAgLy8gQXR0YWNoIG9uY2xpY2sgaGFuZGxlciB0byBvcGVuIGNhcnQgdGFiIHdoZW4gbm90aWZpY2F0aW9uIGJ1dHRvbiBjbGlja2VkXHJcbiAgICAgICAgLy8gQXJlIHRoZXJlIGlzc3VlcyB3aXRoIG1lbW9yeSBsZWFrcyB3aGVuIGxpc3RlbmVycyBhcmUgYWRkZWQ/XHJcbiAgICAgICAgYnJvd3Nlci5ub3RpZmljYXRpb25zLm9uQnV0dG9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihhc3luYyBmdW5jdGlvbiAoY2xpY2tlZElkLCBidXR0b25JbmRleCkge1xyXG4gICAgICAgICAgICAvLyAwIGluZGV4IG1lYW5zIG9wZW4gY2FydCBwYWdlXHJcbiAgICAgICAgICAgIGlmIChjbGlja2VkSWQgPT09IG5vdGlmaWNhdGlvbklkICYmIGJ1dHRvbkluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGFiIGJ1dCBkb24ndCB3YXN0ZSB3YWl0aW5nIHRvIGxvYWRcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZVRhYlJlYWR5KGJlc3RCdXlDYXJ0VVJMLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByb2Nlc3NBZGRTdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgIC8vIEZhaWxlZCB0byBjYXJ0IChlaXRoZXIgaW52YWxpZCBxdWV1ZSBvciBub3QgYXZpYWxhYmxlKVxyXG4gICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYEZhaWxlZCB0byBjYXJ0ICR7cHJvZHVjdE5hbWV9LCBlaXRoZXIgaW52YWlsZCBxdWV1ZSBvciB1bmF2YWlsYWJsZWApO1xyXG4gICAgICAgIC8vIFBsYXkgc291bmQgbm90aWZpY2F0aW9uIHdpdGggZ2l2ZW4gaW5mb3JtYXRpb25cclxuICAgICAgICBhd2FpdCBzb3VuZE5vdGlmaWNhdGlvbihcImZhaWx1cmVcIiwgXCJCZXN0IEJ1eSAtIEZhaWxlZCB0byBDYXJ0XCIsIHByb2R1Y3ROYW1lLCBbXCJiZXN0YnV5XCIsIFwibm90aWZpY2F0aW9uRmFpbHVyZVwiXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBTZXJ2ZXIgZXJyb3IgKDUwMCByYXRlIGxpbWl0LCA0MDMgcmF0ZSBsaW1pdCBvciB1bmNhcnRhYmxlKVxyXG4gICAgICAgIC8vIENhbid0IHJlbG9hZCB0YWIgZnJvbSBub3RpZmljYXRpb24gYnV0dG9uIGJlY2F1c2UgdGFiIElEIG5vdCByZXR1cm5lZCwgVE9ETz9cclxuICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBFcnJvciBjYXJ0aW5nICR7cHJvZHVjdE5hbWV9IHdpdGggc3RhdHVzICR7c3RhdHVzfWApO1xyXG4gICAgICAgIC8vIENvbnN0cnVjdCBjdXN0b20gbWVzc2FnZSBmb3IgZXJyb3JcclxuICAgICAgICBsZXQgbWVzc2FnZTtcclxuICAgICAgICBpZiAoZ2V0KHNldHRpbmdzLnN0b3JlKVtcImJlc3RidXlcIl1bXCJhdXRvUmVsb2FkXCJdID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXJyb3IgY2FydGluZyAke3Byb2R1Y3ROYW1lfSAtIHBvc3NpYmxlIHJhdGUgbGltaXRpbmcsIGF1dG9tYXRpY2FsbHkgcmVsb2FkaW5nIHRhYiBhbmQgcmV0cnlpbmcgcmVxdWVzdGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gYEVycm9yIGNhcnRpbmcgJHtwcm9kdWN0TmFtZX0gLSBwb3NzaWJsZSByYXRlIGxpbWl0aW5nLCBub3QgYXV0b21hdGljYWxseSByZWxvYWRpbmcgdGFiYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUGxheSBzb3VuZCBub3RpZmljYXRpb24gd2l0aCBnaXZlbiBpbmZvcm1hdGlvblxyXG4gICAgICAgIGF3YWl0IHNvdW5kTm90aWZpY2F0aW9uKFwiZXJyb3JcIiwgYEJlc3QgQnV5IC0gRXJyb3IgJHtzdGF0dXN9YCwgbWVzc2FnZSwgW1wiYmVzdGJ1eVwiLCBcIm5vdGlmaWNhdGlvbkVycm9yXCJdKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBnZXQgfSBmcm9tIFwic3ZlbHRlL3N0b3JlXCI7XHJcbmltcG9ydCB7IGRvbWFpbk1hdGNoZXMsIHBpbmdSZXF1ZXN0IH0gZnJvbSBcIi4uL3NoYXJlZC9jb25zdGFudHNcIjtcclxuaW1wb3J0IHsgc2V0dGluZ3MsIHNldHRpbmdzRGlzcGxheXMgfSBmcm9tIFwiLi4vc2hhcmVkL2luaXRpYWxpemF0aW9uc1wiO1xyXG5pbXBvcnQgeyBleHRlbnNpb25Mb2csIHBpbmdUYWJSZWFkeSwgc2VuZFJlcXVlc3RDb250ZW50LCBzbGVlcCB9IGZyb20gXCIuLi9zaGFyZWQvdXRpbGl0aWVzXCI7XHJcbmNvbnN0IGxvZ2dpbmdTZWxmID0gXCJiYWNrZ3JvdW5kX21haW5cIjtcclxubGV0IG5vdGlmaWNhdGlvbnMgPSB7XHJcbiAgICBcInN1Y2Nlc3NcIjogXCIuLi9yZXNvdXJjZXMvbm90aWZpY2F0aW9uX3N1Y2Nlc3MubXAzXCIsXHJcbiAgICBcImZhaWx1cmVcIjogXCIuLi9yZXNvdXJjZXMvbm90aWZpY2F0aW9uX3F1ZXVlLm1wM1wiLFxyXG4gICAgXCJlcnJvclwiOiBcIi4uL3Jlc291cmNlcy9ub3RpZmljYXRpb25fcmF0ZWxpbWl0Lm1wM1wiLFxyXG4gICAgLy8gQmVzdCBCdXlcclxuICAgIFwicXVldWVcIjogXCIuLi9yZXNvdXJjZXMvbm90aWZpY2F0aW9uX3F1ZXVlLm1wM1wiLFxyXG59OyAvLyBOb3RpZmljYXRpb24gc291bmQgZmlsZSBwYXRoc1xyXG5sZXQgcXVldWVkUmVxdWVzdHMgPSBbXTtcclxubGV0IGV4ZWN1dGluZyA9IGZhbHNlOyAvLyBXaGV0aGVyIGV4ZWN1dGlvbiBpcyBjdXJyZW50bHkgaGFwcGVuaW5nXHJcbi8vIE1lcmdlIGN1cnJlbnRseSBzdG9yZWQgc2V0dGluZ3Mgd2l0aCBwb3NzaWJseSBuZXcgb3IgY2hhbmdlZCBleHRlbnNpb24gdmFsdWVzIFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWVyZ2VTZXR0aW5ncygpIHtcclxuICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgXCJNZXJnaW5nIHN0b3JlZCBzZXR0aW5ncyB3aXRoIGV4dGVuc2lvbiBkaXNwbGF5IHZhbHVlc1wiKTtcclxuICAgIC8vIFNvdXJjZSBvZiB0cnV0aDogbWVyZ2Ugc2V0dGluZ3Mgd2l0aCBkZWZhdWx0cyBhbmQgcG9zc2libHkgbmV3bHkgYWRkZWRcclxuICAgIC8vIERvZXNuJ3QgY3VycmVudGx5IGRlbGV0ZSBvYnNvbGV0ZSBzZXR0aW5ncyBidXQgd2hhdGV2ZXIgaG9uZXN0bHlcclxuICAgIGZvciAoY29uc3QgW2NhdGVnb3J5S2V5LCBjYXRlZ29yeURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHNldHRpbmdzRGlzcGxheXMpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGUgZ2l2ZW4gc2V0dGluZ3MgY2F0ZWdvcnkgZXhpc3RzXHJcbiAgICAgICAgY29uc3Qgc3RvcmVkQ2F0ZWdvcnlTZXR0aW5ncyA9IGdldChzZXR0aW5ncy5zdG9yZSlbY2F0ZWdvcnlLZXldO1xyXG4gICAgICAgIGlmIChzdG9yZWRDYXRlZ29yeVNldHRpbmdzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gQ2F0ZWdvcnkgZXhpc3RzLCBpdGVyYXRlIG92ZXIgYW5kIG1lcmdlIHNldHRpbmdzXHJcbiAgICAgICAgICAgIGxldCBjYXRlZ29yeU1vZGlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3NldHRpbmdLZXksIHNldHRpbmdEYXRhXSBvZiBPYmplY3QuZW50cmllcyhjYXRlZ29yeURhdGEuc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHdpdGggZGVmYXVsdCBpZiBzZXR0aW5nIGRvZXNuJ3QgZXhpc3Qgb3IgaXMgd3JvbmcgdHlwZVxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkU2V0dGluZ1ZhbHVlID0gc3RvcmVkQ2F0ZWdvcnlTZXR0aW5nc1tzZXR0aW5nS2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChzdG9yZWRTZXR0aW5nVmFsdWUgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2Ygc3RvcmVkU2V0dGluZ1ZhbHVlICE9PSB0eXBlb2Ygc2V0dGluZ0RhdGEuZGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYE5vbi1tYXRjaGluZyBzZXR0aW5ncyBbJHtjYXRlZ29yeUtleX1dWyR7c2V0dGluZ0tleX1dLCBtZXJnaW5nYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVkQ2F0ZWdvcnlTZXR0aW5nc1tzZXR0aW5nS2V5XSA9IHNldHRpbmdEYXRhLmRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlNb2RpZmllZCA9IHRydWU7IC8vIEZsYWcgZm9yIHNldHRlclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEludm9rZSBzZXR0ZXIgaWYgY2F0ZWdvcnkgc2V0dGluZ3MgaGF2ZSBiZWVuIG1vZGlmaWVkXHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeU1vZGlmaWVkID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5zZXQoY2F0ZWdvcnlLZXksIHN0b3JlZENhdGVnb3J5U2V0dGluZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBTdG9yZWQgc2V0dGluZ3MgY2F0ZWdvcnkgWyR7Y2F0ZWdvcnlLZXl9XSBub3QgZm91bmQsIGluaXRpYWxpemluZ2ApO1xyXG4gICAgICAgICAgICAvLyBDYXRlZ29yeSBkb2Vzbid0IGV4aXN0LCBwb3B1bGF0ZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3NcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdENhdGVnb3J5U2V0dGluZ3MgPSBPYmplY3QuZW50cmllcyhjYXRlZ29yeURhdGEuc2V0dGluZ3MpLnJlZHVjZSgob2JqLCBbc2V0dGluZ0tleSwgc2V0dGluZ0RhdGFdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvYmpbc2V0dGluZ0tleV0gPSBzZXR0aW5nRGF0YS5kZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfSwge30pO1xyXG4gICAgICAgICAgICBzZXR0aW5ncy5zZXQoY2F0ZWdvcnlLZXksIGRlZmF1bHRDYXRlZ29yeVNldHRpbmdzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8gRXhlY3V0ZSBxdWV1ZWQgcmVxdWVzdHMgc3luYyBvbiBzdGltdWx1cyBmcm9tIG1lc3NhZ2UgaGFuZGxlclxyXG5hc3luYyBmdW5jdGlvbiBwZXJmb3JtU3luY1JlcXVlc3RzKCkge1xyXG4gICAgLy8gT25seSB3YW50IG9uZSBpbnN0YW5jZSBydW5uaW5nIGF0IGEgdGltZSwgdXNlIHBzZXVkby1sb2NrXHJcbiAgICBpZiAoZXhlY3V0aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0aW5nID0gdHJ1ZTsgLy8gTG9jayBydW5uaW5nIGluc3RhbmNlXHJcbiAgICAvLyBJbiBjYXNlIG9mIGNyaXRpY2FsIGVycm9yLCBzdGlsbCBiZSBhYmxlIHRvIGNhbmNlbCBleGVjdXRpb25cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUGVyZm9ybSBxdWV1ZWQgcmVxdWVzdHMgc3luYyB3aGlsZSB0aGV5IGV4aXN0LCBhbmQgcmVzb2x2ZSBlYWNoXHJcbiAgICAgICAgd2hpbGUgKHF1ZXVlZFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBxdWV1ZWQgcmVxdWVzdCBhbmQgZGVmYXVsdCByZXNwb25zZSBmb3IgZ2l2ZW4gcmVxdWVzdFxyXG4gICAgICAgICAgICBjb25zdCBxdWV1ZWRSZXF1ZXN0ID0gcXVldWVkUmVxdWVzdHMuc2hpZnQoKTtcclxuICAgICAgICAgICAgY29uc3QgcXVldWVkUmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQ6IFwibm90LWZvdW5kXCIsXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiBbXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gSlNPTi5zdHJpbmdpZnkocXVldWVkUmVxdWVzdCk7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYEV4ZWN1dGluZyBxdWV1ZWQgc2VxdWVudGlhbCByZXF1ZXN0IHdpdGggYm9keSAke3NlcmlhbGl6ZWRSZXF1ZXN0fWApO1xyXG4gICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRhYnMgbWF0Y2hpbmcgZ2l2ZW4gVVJMIG1hdGNoIGV4aXN0XHJcbiAgICAgICAgICAgIGNvbnN0IHVybEdsb2IgPSBkb21haW5NYXRjaGVzW3F1ZXVlZFJlcXVlc3QgPT09IG51bGwgfHwgcXVldWVkUmVxdWVzdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcXVldWVkUmVxdWVzdC51cmxNYXRjaF07XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nVGFicyA9IGF3YWl0IGJyb3dzZXIudGFicy5xdWVyeSh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IGRvbWFpbk1hdGNoZXNbcXVldWVkUmVxdWVzdCA9PT0gbnVsbCB8fCBxdWV1ZWRSZXF1ZXN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBxdWV1ZWRSZXF1ZXN0LnVybE1hdGNoXSxcclxuICAgICAgICAgICAgICAgIGRpc2NhcmRlZDogZmFsc2UsIC8vIENhbid0IGNvbW11bmljYXRlIHdpdGggdW5sb2FkZWQgdGFiXHJcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXM6IFwibG9hZGluZ1wiIC8vIENhbid0IGNvbW11bmljYXRlIHdpdGggbG9hZGluZyB0YWJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ1RhYnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBDb3VsZG4ndCBmaW5kIG1hdGNoaW5nIGJyb3dzZXIgdGFicyB3aXRoIFVSTCBnbG9iICR7dXJsR2xvYn0sIHJlc29sdmluZyB3aXRoIG5vdC1mb3VuZCByZXNwb25zZWApO1xyXG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSBleGVjdXRpb24gZGVwZW5kaW5nIG9uIHNldHRpbmdcclxuICAgICAgICAgICAgICAgIC8vIEZvciBub3csIHJlc29sdmUgd2l0aCB1bmRlZmluZWQgYnV0IG1heWJlIG9wZW4gdGFiP1xyXG4gICAgICAgICAgICAgICAgcXVldWVkUmVxdWVzdC5yZXNvbHZlKHF1ZXVlZFJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIG92ZXIgdGFicyBhbmQgYXR0ZW1wdCBjb21tdW5pY2F0aW9uXHJcbiAgICAgICAgICAgIGxldCByZXRyeVJlcXVlc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0YWIgb2YgbWF0Y2hpbmdUYWJzKSB7XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBBdHRlbXB0aW5nIHRvIHBpbmcgdGFiIHdpdGggSUQgJHt0YWIuaWR9IGFuZCBVUkwgJHt0YWIudXJsfWApO1xyXG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSBwaW5nIGFuZCBjaGVjayB3aGV0aGVyIHRhYiByZXNwb25kc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGluZ1Jlc3BvbnNlID0gYXdhaXQgc2VuZFJlcXVlc3RDb250ZW50KHRhYi5pZCwgcGluZ1JlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBpbmdSZXNwb25zZS5yZXN1bHQgPT09IFwiZXJyb3JcIikgeyAvLyBGYWlsZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB0YWJcclxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBFcnJvciBwaW5naW5nIGNvbnRlbnQgc2NyaXB0OiAke3BpbmdSZXNwb25zZS5wYXlsb2FkLnZhbHVlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGxvZ2dpbmdTZWxmLCBgUmVjZWl2ZWQgc3VjY2Vzc2Z1bCBwaW5nIHJlc3BvbnNlLCBicm9hZGNhc3RpbmcgcmVxdWVzdGApO1xyXG4gICAgICAgICAgICAgICAgLy8gVGFiIHByb3Blcmx5IHJlc3BvbmRlZCB0byBwaW5nLCBzZW5kIGFjdHVhbCByZXF1ZXN0XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHF1ZXVlZFJlcXVlc3QuaGFuZGxlcixcclxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBxdWV1ZWRSZXF1ZXN0LmFyZ3MsXHJcbiAgICAgICAgICAgICAgICB9OyAvLyBNaXJyb3IgcmVxdWVzdCBmcm9tIHF1ZXVlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRSZXF1ZXN0Q29udGVudCh0YWIuaWQsIHJlcXVlc3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdCA9PT0gXCJlcnJvclwiKSB7IC8vIEZhaWxlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHRhYlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3VsZCBuZXZlciBoYXBwZW4gc2luY2UgcGluZyB3YXMgc3VjY2Vzc2Z1bFxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXJyb3IgcGVyZm9ybWluZyBoYW5kbGVyOiAke3Jlc3BvbnNlfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVldWVkUmVzcG9uc2UucmVzdWx0ID0gXCJva1wiO1xyXG4gICAgICAgICAgICAgICAgcXVldWVkUmVzcG9uc2UucGF5bG9hZCA9IHJlc3BvbnNlLnBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRhYiByZXNwb25kZWQgd2l0aCByZXF1ZXN0IGZvciBleGVjdXRpb25cclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5wYXlsb2FkLmV4ZWN1dGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYFJlc3BvbnNlIHJlY2VpdmVkLCBwZXJmb3JtaW5nIGV4ZWN1dGlvbiBoYW5kbGVycyAke3Jlc3BvbnNlLnBheWxvYWQuZXhlY3V0ZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucGF5bG9hZC5leGVjdXRlLmluY2x1ZGVzKFwicmVsb2FkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbkxvZyhsb2dnaW5nU2VsZiwgYEV4ZWN1dGluZyByZWxvYWQgZm9yIHRhYiB3aXRoIElEICR7dGFiLmlkfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxvYWQgY3VycmVudCB0YWIsIGlkbGUgdW50aWwgcmVsb2FkaW5nIGNvbXBsZXRlIChwaW5nIHN1Y2Nlc3NmdWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGJyb3dzZXIudGFicy5yZWxvYWQodGFiLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2xlZXAoMjUwMCk7IC8vIEdpdmUgYSBmZXcgc2Vjb25kcyBmb3IgdGhlIHJlbG9hZCB0byBpbml0aWFsaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHBpbmdUYWJSZWFkeSh0YWIuaWQsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5wYXlsb2FkLmV4ZWN1dGUuaW5jbHVkZXMoXCJyZXRyeVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBFeGVjdXRpbmcgcmV0cnksIHJlLXB1c2hpbmcgcmVxdWVzdCB0byBiYWNrIG9mIHF1ZXVlYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFB1c2ggcXVldWVkIHJlcXVlc3QgdG8gYmFjayBmb3IgcmV0cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVkUmVxdWVzdHMucHVzaChxdWV1ZWRSZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlSZXF1ZXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBSZXNwb25zZSByZWNlaXZlZCwgbm8gZXhlY3V0aW9uIGhhbmRsZXIgbmVjZXNzYXJ5YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gU3RvcCBzZW5kaW5nIHJlcXVlc3RzIGFmdGVyIHN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBNb3ZlZCByZXRyeSBoYW5kbGVyIGRvd24gc2luY2UgSlMvVFMgZG9lc24ndCBoYXZlIGdvdG9cclxuICAgICAgICAgICAgaWYgKHJldHJ5UmVxdWVzdCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFJlc3BvbnNlID0gSlNPTi5zdHJpbmdpZnkocXVldWVkUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBGaW5pc2hlZCBwcm9jZXNzaW5nIHF1ZXVlZCByZXF1ZXN0LCByZXNwb25kaW5nIHdpdGggYm9keSAke3NlcmlhbGl6ZWRSZXNwb25zZX1gKTtcclxuICAgICAgICAgICAgLy8gUmVzb2x2ZSB3aXRoIGVpdGhlciBwYXlsb2FkIG9yIG5vdCBmb3VuZFxyXG4gICAgICAgICAgICBxdWV1ZWRSZXF1ZXN0LnJlc29sdmUocXVldWVkUmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAvLyBEb2VzIHRoZSBiZWxvdyBzdGlsbCBydW4/IGlka1xyXG4gICAgICAgIGV4ZWN1dGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgIH1cclxuICAgIGV4ZWN1dGluZyA9IGZhbHNlOyAvLyBVbmxvY2sgcnVubmluZyBpbnN0YW5jZVxyXG59XHJcbi8vIEFkZCBhIHN5bmMgcmVxdWVzdCB0byBxdWV1ZWQgYW5kIGlkbGUgdW50aWwgcmVzcG9uc2VcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFN5bmNSZXF1ZXN0KHJlcXVlc3QsIHVybE1hdGNoKSB7XHJcbiAgICBleHRlbnNpb25Mb2cobG9nZ2luZ1NlbGYsIGBQdXNoaW5nIHJlcXVlc3QgdG8gYmFjayBvZiBxdWV1ZSBmb3Igc3luYyBleGVjdXRpb25gKTtcclxuICAgIC8vIFB1c2ggbmV3IHJlcXVlc3QgdG8gZXhpc3RpbmcgcXVldWUgYW5kIHdhaXQgZm9yIGNvbXBsZXRpb25cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIC8vIENvbnN0cnVjdCBhbmQgYWRkIHF1ZXVlZCByZXF1ZXN0XHJcbiAgICAgICAgY29uc3QgcXVldWVkUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgdXJsTWF0Y2gsIHJlc29sdmUgfSk7IC8vIFdpbGwgYmxvY2sgdW50aWwgcmVzb2x1dGlvblxyXG4gICAgICAgIHF1ZXVlZFJlcXVlc3RzLnB1c2gocXVldWVkUmVxdWVzdCk7XHJcbiAgICAgICAgcGVyZm9ybVN5bmNSZXF1ZXN0cygpOyAvLyBSdW5zIGFzeW5jaHJvbm91c2x5LCB3YWl0IGZvciByZXNvbHZlXHJcbiAgICB9KTtcclxufVxyXG4vLyBDcmVhdGVzIG5ldyB0YWIgd2l0aCBzcGVjaWZpZWQgVVJMIGFuZCBibG9jayB1bnRpbCByZWFkeVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVGFiUmVhZHkodXJsLCB3YWl0ID0gdHJ1ZSkge1xyXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmQgcGVyaW9kaWNhbGx5IHBpbmcgdW50aWwgcmVzcG9uc2VcclxuICAgIGNvbnN0IHRhYiA9IGF3YWl0IGJyb3dzZXIudGFicy5jcmVhdGUoe1xyXG4gICAgICAgIGFjdGl2ZTogZmFsc2UsXHJcbiAgICAgICAgdXJsLFxyXG4gICAgfSk7XHJcbiAgICAvLyBPbmx5IHdhaXQgZm9yIGxvYWQgY29tcGxldGUgaWYgZGVzaXJlZFxyXG4gICAgaWYgKHdhaXQgPT09IHRydWUpIHtcclxuICAgICAgICBhd2FpdCBwaW5nVGFiUmVhZHkodGFiLmlkLCAxMDApO1xyXG4gICAgfVxyXG59XHJcbi8vIFBsYXkgY29ycmVzcG9uZGluZyBub3RpZmljYXRpb24gc291bmQgYW5kIHNob3cgbm90aWZpY2F0aW9uXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzb3VuZE5vdGlmaWNhdGlvbihzb3VuZEtleSwgdGl0bGUsIG1lc3NhZ2UsIHNldHRpbmdLZXlzLCBidXR0b25zKSB7XHJcbiAgICAvLyBTaG93IGRlc2t0b3Agbm90aWZpY2F0aW9uIHRocm91Z2ggQVBJIGlmIGRlc2lyZWRcclxuICAgIGxldCBub3RpZmljYXRpb25JZDtcclxuICAgIGlmIChnZXQoc2V0dGluZ3Muc3RvcmUpW3NldHRpbmdLZXlzWzBdXVtzZXR0aW5nS2V5c1sxXV0gPT09IHRydWUpIHtcclxuICAgICAgICAvLyBDYW4ndCB1c2Ugd2ViZXh0ZW5zaW9uLXBvbHlmaWxsIGJlY2F1c2Ugb2YgbGFjayBvZiBwcm9taXNlIHN1cHBvcnRcclxuICAgICAgICBub3RpZmljYXRpb25JZCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIE9mIGNvdXJzZSBDaHJvbWUgZG9lc24ndCBzdXBwb3J0IGFzeW5jL2F3YWl0IFxyXG4gICAgICAgICAgICBjaHJvbWUubm90aWZpY2F0aW9ucy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJiYXNpY1wiLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIGljb25Vcmw6IFwiLi4vcmVzb3VyY2VzL2ljb25fNTEyX2RhcmsucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBidXR0b25zOiBidXR0b25zID09PSBudWxsIHx8IGJ1dHRvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJ1dHRvbnMubWFwKHRpdGxlID0+ICh7IHRpdGxlOiB0aXRsZSB9KSksXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShpZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY2xlYXIgYWZ0ZXIgc2V0dGluZ3MgZHVyYXRpb25cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY2xlYXIobm90aWZpY2F0aW9uSWQpO1xyXG4gICAgICAgIH0sIGdldChzZXR0aW5ncy5zdG9yZSlbXCJnbG9iYWxcIl1bXCJkdXJhdGlvbk5vdGlmaWNhdGlvblwiXSk7XHJcbiAgICB9XHJcbiAgICAvLyBBbHdheXMgcGxheSBub3RpZmljYXRpb24gc291bmQgd2l0aCBnaXZlbiBrZXkgaWYgZGVzaXJlZFxyXG4gICAgLy8gUmUtaW5pdGlhbGl6ZSBmcm9tIGZpbGUgdnMuIHVzaW5nIGV4aXN0aW5nIEF1ZGlvIGZvciBzaW11bHRhbmVvdXMgcGxheWluZ1xyXG4gICAgaWYgKGdldChzZXR0aW5ncy5zdG9yZSlbXCJnbG9iYWxcIl1bXCJwbGF5Tm90aWZpY2F0aW9uc1wiXSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblNvdW5kID0gbmV3IEF1ZGlvKG5vdGlmaWNhdGlvbnNbc291bmRLZXldKTtcclxuICAgICAgICBub3RpZmljYXRpb25Tb3VuZC5wbGF5KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm90aWZpY2F0aW9uSWQ7XHJcbn1cclxuIiwiLy8gQWdncmVnYXRlIHNlbGYtaWRlbnRpZmljYXRpb24ga2V5c1xyXG5leHBvcnQgY29uc3QgYmFja2dyb3VuZFNlbGYgPSBcImJhY2tncm91bmRcIjtcclxuZXhwb3J0IGNvbnN0IGNvbnRlbnRTZWxmID0gXCJjb250ZW50XCI7XHJcbmV4cG9ydCBjb25zdCBleHRlbnNpb25TZWxmID0gXCJleHRlbnNpb25cIjtcclxuZXhwb3J0IGNvbnN0IGRvbWFpbk1hdGNoZXMgPSB7XHJcbiAgICBcImJlc3RidXlcIjogXCJodHRwczovLyouYmVzdGJ1eS5jb20vKlwiLFxyXG59OyAvLyBEb21haW4gbWF0Y2hlcyBmb3Igc2VuZGluZyBtZXNzYWdlcyBmcm9tIGJhY2tncm91bmQgb3IgZXh0ZW5zaW9uXHJcbmV4cG9ydCBjb25zdCBwaW5nUmVxdWVzdCA9IHtcclxuICAgIGhhbmRsZXI6IFwicGluZ1wiLFxyXG4gICAgYXJnczogW10sXHJcbn07IC8vIFBpbmcgcmVxdWVzdCB0byBjaGVjayB0YWIgcmVhY3Rpdml0eVxyXG4iLCJpbXBvcnQgeyB3cml0YWJsZSB9IGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvc3ZlbHRlL3N0b3JlXCI7XHJcbmltcG9ydCB7IGluaXRpYWxpemVTdG9yZSwgcmVkdWNlRGlzcGxheXMgfSBmcm9tIFwiLi91dGlsaXRpZXNcIjtcclxuLy8gQW55IGltcG9ydHMgdGhhdCBhcmUgQ0FMTEVEIG9uIGluaXRpYWxpemF0aW9uIG11c3QgYmUgZGVjbGFyZWQgd2l0aGluIGEgc2VwYXJhdGUgZmlsZVxyXG5leHBvcnQgY29uc3QgdGFiVVJMcyA9IHdyaXRhYmxlKFtdKTsgLy8gdGFiIFVSTHMgc2hhcmVkIGJldHdlZW4gY29tcG9uZW50c1xyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBpbml0aWFsaXplU3RvcmUoXCJzZXR0aW5nc1wiLCB7fSk7XHJcbmV4cG9ydCBjb25zdCBiZXN0QnV5UXVldWVzID0gYXdhaXQgaW5pdGlhbGl6ZVN0b3JlKFwiYmVzdGJ1eS1xdWV1ZXNcIiwge30pO1xyXG5leHBvcnQgY29uc3QgY2hhbmdlbG9ncyA9IGF3YWl0ICQuYWpheChcIi4uL3Jlc291cmNlcy9jaGFuZ2Vsb2cuanNvblwiLCB7IGRhdGE6IFwianNvblwiIH0pO1xyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3NEaXNwbGF5cyA9IGF3YWl0ICQuYWpheChcIi4uL3Jlc291cmNlcy9zZXR0aW5ncy5qc29uXCIsIHsgZGF0YTogXCJqc29uXCIgfSk7XHJcbmV4cG9ydCBjb25zdCByYXdCZXN0QnV5SXRlbXMgPSBhd2FpdCAkLmFqYXgoXCIuLi9yZXNvdXJjZXMvaXRlbXNfYmVzdGJ1eS5qc29uXCIsIHsgZGF0YTogXCJqc29uXCIgfSk7XHJcbmV4cG9ydCBjb25zdCBiZXN0QnV5RGlzcGxheXMgPSByZWR1Y2VEaXNwbGF5cyhyYXdCZXN0QnV5SXRlbXMpO1xyXG4iLCJpbXBvcnQgeyBnZXQsIHdyaXRhYmxlIH0gZnJvbSBcIi4uLy4uL25vZGVfbW9kdWxlcy9zdmVsdGUvc3RvcmVcIjtcclxuaW1wb3J0IHsgcGluZ1JlcXVlc3QgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTUxMDIxL3doYXQtaXMtdGhlLWphdmFzY3JpcHQtdmVyc2lvbi1vZi1zbGVlcFxyXG5leHBvcnQgZnVuY3Rpb24gc2xlZXAobXMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxufVxyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDU1ODQ0Mi9pcy10aGVyZS1zb21ldGhpbmctbGlrZS1nbG9iLWJ1dC1mb3ItdXJscy1pbi1qYXZhc2NyaXB0XHJcbmV4cG9ydCBmdW5jdGlvbiB1cmxHbG9iKHBhdHRlcm4sIGlucHV0KSB7XHJcbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKHBhdHRlcm4ucmVwbGFjZSgvKFsuPyteJFtcXF1cXFxcKCl7fXxcXC8tXSkvZywgXCJcXFxcJDFcIikucmVwbGFjZSgvXFwqL2csICcuKicpKTtcclxuICAgIHJldHVybiByZS50ZXN0KGlucHV0KTtcclxufVxyXG4vLyBSZWR1Y2VzIHJhdyBhY2NvcmRpb24gZGF0YSB0byB0aGVpciByZXNwZWN0aXZlIGRpc3BsYXlzXHJcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2VEaXNwbGF5cyhpbnB1dCkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGlucHV0KS5yZWR1Y2UoKG9iaiwgW18sIHJhd0NhdGVnb3J5RGF0YV0pID0+IHtcclxuICAgICAgICBvYmogPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9iaiksIE9iamVjdC5lbnRyaWVzKHJhd0NhdGVnb3J5RGF0YS5pdGVtcykucmVkdWNlKChzdWJPYmosIFtfLCByYXdJdGVtRGF0YV0pID0+IHtcclxuICAgICAgICAgICAgc3ViT2JqW3Jhd0l0ZW1EYXRhLmRhdGFdID0gcmF3SXRlbURhdGEuZGlzcGxheTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1Yk9iajtcclxuICAgICAgICB9LCB7fSkpO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9LCB7fSk7XHJcbn1cclxuLy8gU29tZXdoYXQgZmFuY3kgbG9nZ2luZyBmcm9tIGV4dGVuc2lvbiBiYWNrZ3JvdW5kXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbnNpb25Mb2coc2VuZGVyLCBtZXNzYWdlLCBsZXZlbCA9IFwiaW5mb1wiKSB7XHJcbiAgICAvLyBHZW5lcmF0ZSB0aW1lc3RtYXAgZm9yIGxvZ2dpbmcgaW4gMjQtaG91ciBISDpNTTpTUyBmb3JtYXRcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IChuZXcgRGF0ZSgpKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUdCJywge1xyXG4gICAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxyXG4gICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXHJcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcclxuICAgIH0pLnN1YnN0cmluZygwLCA4KTtcclxuICAgIC8vIExvZyBvciBlcnJvciB0byBjb25zb2xlIChjdXJyZW50bHkgd2l0aG91dCBmb3JtYXR0aW5nKVxyXG4gICAgY29uc3Qgb3V0cHV0ID0gYFske3RpbWVzdGFtcH1dXFx0XFx0KCR7c2VuZGVyfSlcXHRcXHQke21lc3NhZ2V9YDtcclxuICAgIGlmIChsZXZlbCA9PT0gXCJpbmZvXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZGVidWdcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZGVidWcob3V0cHV0KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGxldmVsID09PSBcIndhcm5cIikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihvdXRwdXQpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAobGV2ZWwgPT09IFwiZXJyb3JcIikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3Iob3V0cHV0KTtcclxuICAgIH1cclxufVxyXG4vLyBEZWZhdWx0IHBpbmcgcmVzcG9uc2UgZm9yIGNvbnRlbnQgc2NyaXB0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb250ZW50UGluZygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdWx0OiBcIm9rXCIsXHJcbiAgICAgICAgcGF5bG9hZDoge1xyXG4gICAgICAgICAgICB2YWx1ZTogXCJwaW5nIVwiLFxyXG4gICAgICAgICAgICBleGVjdXRlOiBbXSxcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8vIEluaXRpYWxpemVzIG1lc3NhZ2UgcmVjZWl2aW5nIGZvciBnaXZlbiBjb250ZW50IHNjcmlwdCB3aXRoIGtleSBhbmQgaGFuZGxlcnNcclxuZXhwb3J0IGZ1bmN0aW9uIG1lc3NhZ2VQcm9jZXNzSGFuZGxlcnMoY29udGVudEtleSwgaGFuZGxlcnMpIHtcclxuICAgIC8vIFNldHVwIGxpc3RlbmVyIGZvciBzbm9vcGluZyBtZXNzYWdlcyBhbmQgZXhlY3V0aW5nIG1hdGNoaW5nIGhhbmRsZXJzXHJcbiAgICBicm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIChtZXNzYWdlLCBzZW5kZXIpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbWVzc2FnZTtcclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSB7XHJcbiAgICAgICAgICAgIHJlc3VsdDogXCJva1wiLFxyXG4gICAgICAgICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgZXhlY3V0ZTogW10sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTsgLy8gUGxhY2Vob2xkZXIgcmVzcG9uc2UgYmVmb3JlIGNvbnN0cnVjdGlvblxyXG4gICAgICAgIC8vIENoZWNrIHdoZXRoZXIgaGFuZGxlciBleGlzdHMsIG1lc3NhZ2VzIGFyZSB0YXJnZXRlZFxyXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBoYW5kbGVyc1tyZXF1ZXN0LmhhbmRsZXJdO1xyXG4gICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uTG9nKGNvbnRlbnRLZXksIGBQcm9jZXNzaW5nIGhhbmRsZXIgJHtyZXF1ZXN0LmhhbmRsZXJ9IHdpdGggYXJndW1lbnRzICR7SlNPTi5zdHJpbmdpZnkocmVxdWVzdC5hcmdzKX1gKTtcclxuICAgICAgICAgICAgLy8gSGFuZGxlciBleGlzdHMsIGF0dGVtcHQgdG8gZXhlY3V0ZVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGhhbmRsZXIoLi4ucmVxdWVzdC5hcmdzIHx8IFtdKTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdCA9IFwib2tcIjtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnBheWxvYWQgPSBwYXlsb2FkOyAvLyBOb24tc2VyaWFsaXplZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdCA9IFwiZXJyb3JcIjtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnBheWxvYWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVycm9yTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiBbXSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb25Mb2coY29udGVudEtleSwgYEVycm9yIHByb2Nlc3NpbmcgaGFuZGxlciAke3JlcXVlc3QuaGFuZGxlcn06ICR7ZXJyb3JNZXNzYWdlfWAsIFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbn1cclxuLy8gUmVzb2x2ZS9yZWplY3Qgd3JhcHBlciBmb3Igc2VuZGluZyByZXF1ZXN0cyB0byBiYWNrZ3JvdW5kXHJcbi8vIEN1cnJlbnRseSBkb2Vzbid0IGltcGxlbWVudCB0aW1lb3V0IGJ1dCBtYXliZSBsYXRlcj9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRSZXF1ZXN0QmFja2dyb3VuZChyZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBicm93c2VyLnJ1bnRpbWUuc2VuZE1lc3NhZ2UocmVxdWVzdClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzb2x2ZShyZXNwb25zZSkpIC8vIFN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICByZXN1bHQ6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgcGF5bG9hZDoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBbXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KSk7IC8vIEZhaWxlZCwgcHJvYmFibHkgbm8gbWVzc2FnZSBsaW5rXHJcbiAgICB9KTtcclxufVxyXG4vLyBSZXNvbHZlL3JlamVjdCB3cmFwcGVyIGZvciBzZW5kaW5nIHJlcXVlc3RzIHRvIHRhYlxyXG4vLyBDdXJyZW50bHkgZG9lc24ndCBpbXBsZW1lbnQgdGltZW91dCBidXQgbWF5YmUgbGF0ZXI/XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUmVxdWVzdENvbnRlbnQodGFiSWQsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGJyb3dzZXIudGFicy5zZW5kTWVzc2FnZSh0YWJJZCwgcmVxdWVzdClcclxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzb2x2ZShyZXNwb25zZSkpIC8vIFN1Y2Nlc3NmdWxcclxuICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHJlc29sdmUoe1xyXG4gICAgICAgICAgICByZXN1bHQ6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgcGF5bG9hZDoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBbXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KSk7IC8vIEZhaWxlZCwgcHJvYmFibHkgbm8gbWVzc2FnZSBsaW5rXHJcbiAgICB9KTtcclxufVxyXG4vLyBSZXRyaWV2ZSB2YWx1ZSB3aXRoIGdpdmVuIGtleSBmcm9tIFN0b3JhZ2UgQVBJIG9yIHJldHVybiBkZWZhdWx0XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9yYWdlR2V0KGtleSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAvLyBSZXRyaWV2ZSBmcm9tIHN0b3JhZ2UgYW5kIFwib3ZlcndyaXRlXCIgd2l0aCBkZWZhdWx0IGlmIG5vdCBmb3VuZFxyXG4gICAgY29uc3Qgc3RvcmFnZUNvbnRlbnQgPSBhd2FpdCBicm93c2VyLnN0b3JhZ2UubG9jYWwuZ2V0KGtleSk7XHJcbiAgICBpZiAoc3RvcmFnZUNvbnRlbnRba2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgc3RvcmFnZUNvbnRlbnRba2V5XSA9IGRlZmF1bHRWYWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdG9yYWdlQ29udGVudFtrZXldO1xyXG59XHJcbi8vIFN0b3JlIHdpdGggdGhlIGdpdmVuIGtleSB0aGUgdmFsdWUgdGhyb3VnaCB0aGUgU3RvcmFnZSBBUElcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0b3JhZ2VTZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgLy8gU3RvcmUgdXNpbmcgdGhlIGdpdmVuIGtleSBhbmQgdmFsdWVcclxuICAgIGF3YWl0IGJyb3dzZXIuc3RvcmFnZS5sb2NhbC5zZXQoeyBba2V5XTogdmFsdWUgfSk7XHJcbn1cclxuLy8gSW5pdGlhbGl6ZSB3cml0YWJsZSBzdG9yZSBmcm9tIFN0b3JhZ2UgQVBJIGFuZCBtYWludGFpbiB2YWx1ZSB1c2luZyBzdWJzY3JpcHRpb25zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU3RvcmUoa2V5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIC8vIEluaXRpYWxpemUgd3JpdGFibGUgc3RvcmUgZnJvbSBzdG9yYWdlIHZhbHVlXHJcbiAgICBjb25zdCBzdG9yYWdlVmFsdWUgPSBhd2FpdCBzdG9yYWdlR2V0KGtleSwgZGVmYXVsdFZhbHVlKTtcclxuICAgIGNvbnN0IHN0b3JlID0gd3JpdGFibGUoc3RvcmFnZVZhbHVlKTtcclxuICAgIC8vIEluc3RhbnRpYXRlIHNldHRlciBhbmQgZ2V0dGVyIGZvciBicm9hZGNhc3RpbmcgdXBkYXRlc1xyXG4gICAgLy8gQXNzdW1lIHRoYXQgYm90aCBrZXkgYW5kIHZhbHVlIGFyZSBpbmRleGFibGUgYnkgc3RyaW5nXHJcbiAgICBjb25zdCBzZXQgPSAoc2V0S2V5LCBzZXRWYWx1ZSkgPT4ge1xyXG4gICAgICAgIC8vIFVwZGF0ZSB3cml0YWJsZSBzdG9yZSBhbmQgU3RvcmFnZSBBUElcclxuICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyB2YWx1ZVtzZXRLZXldID0gc2V0VmFsdWU7IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiBnZXQoc3RvcmUpIH0pO1xyXG4gICAgICAgIC8vIFRocm93IGFuZCBmb3JnZXQgdXBkYXRlIGJyb2FkY2FzdFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6IFwidXBkYXRlLXNldFwiLFxyXG4gICAgICAgICAgICBhcmdzOiBba2V5LCBzZXRLZXksIHNldFZhbHVlXSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNlbmRSZXF1ZXN0QmFja2dyb3VuZCh1cGRhdGVSZXF1ZXN0KTtcclxuICAgIH07IC8vIFNldHRlciB0byBicm9hZGNhc3Qga2V5IHNldCB1cGRhdGVcclxuICAgIGNvbnN0IGRlbCA9IChkZWxLZXkpID0+IHtcclxuICAgICAgICAvLyBVcGRhdGUgd3JpdGFibGUgc3RvcmUgYW5kIFN0b3JhZ2UgQVBJXHJcbiAgICAgICAgc3RvcmUudXBkYXRlKHZhbHVlID0+IHsgZGVsZXRlIHZhbHVlW2RlbEtleV07IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtrZXldOiBnZXQoc3RvcmUpIH0pO1xyXG4gICAgICAgIC8vIFRocm93IGFuZCBmb3JnZXQgdXBkYXRlIGJyb2FkY2FzdFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXI6IFwidXBkYXRlLWRlbFwiLFxyXG4gICAgICAgICAgICBhcmdzOiBba2V5LCBkZWxLZXldLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2VuZFJlcXVlc3RCYWNrZ3JvdW5kKHVwZGF0ZVJlcXVlc3QpO1xyXG4gICAgfTsgLy8gRGVsZXRlciB0byBicm9hZGNhc3Qga2V5IGRlbGV0ZSB1cGRhdGVcclxuICAgIC8vIEF0dGFjaCBhZGRpdGlvbmFsIG1lc3NhZ2UgbGlzdGVuZXIgdG8gbGlzdGVuIGZvciB1cGRhdGVzXHJcbiAgICBicm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGFzeW5jIChtZXNzYWdlLCBzZW5kZXIpID0+IHtcclxuICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGtleSBtYXRjaGVzIGFuZCBwZXJmb3JtIHVwZGF0ZSBvciBkZWxldGlvblxyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBtZXNzYWdlO1xyXG4gICAgICAgIGlmIChyZXF1ZXN0LmhhbmRsZXIgPT09IFwidXBkYXRlLXNldFwiKSB7XHJcbiAgICAgICAgICAgIC8vIERlY29uc3RydWN0IGFyZ3VtZW50cyBhbmQgc2V0L3JlcGxhY2Uga2V5IGluIHN0b3JlXHJcbiAgICAgICAgICAgIGNvbnN0IFtzdG9yZUtleSwgc2V0S2V5LCBzZXRWYWx1ZV0gPSByZXF1ZXN0LmFyZ3M7XHJcbiAgICAgICAgICAgIGlmIChzdG9yZUtleSA9PT0ga2V5KSB7IC8vIEVuc3VyZSBrZXkgbWF0Y2hlcyBiZWZvcmUgc2V0dGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gRE8gTk9UIHVzZSBzZXR0ZXIsIG90aGVyd2lzZSB1cGRhdGUgYnJvYWRjYXN0cyBpbiBsb29wXHJcbiAgICAgICAgICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyB2YWx1ZVtzZXRLZXldID0gc2V0VmFsdWU7IHJldHVybiB2YWx1ZTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocmVxdWVzdC5oYW5kbGVyID09PSBcInVwZGF0ZS1kZWxldGVcIikge1xyXG4gICAgICAgICAgICAvLyBEZWNvbnN0cnVjdCBhcmd1bWVudHMgYW5kIGRlbGV0ZSBrZXkgZnJvbSBzdG9yZVxyXG4gICAgICAgICAgICBjb25zdCBbc3RvcmVLZXksIGRlbEtleV0gPSByZXF1ZXN0LmFyZ3M7XHJcbiAgICAgICAgICAgIGlmIChzdG9yZUtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBETyBOT1QgdXNlIGRlbGV0ZXIsIG90aGVyd2lzZSB1cGRhdGUgYnJvYWRjYXN0cyBpbiBsb29wXHJcbiAgICAgICAgICAgICAgICBzdG9yZS51cGRhdGUodmFsdWUgPT4geyBkZWxldGUgdmFsdWVbZGVsS2V5XTsgcmV0dXJuIHZhbHVlOyB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHsgc3RvcmUsIHNldCwgZGVsIH07XHJcbn1cclxuLy8gUGVyaW9kaWNhbGx5IHBpbmcgdGFiIHVudGlsIHJlc3BvbnNlIChyZWFkeSlcclxuLy8gTm90ZSB0aGF0IHVucmVzcG9uc2l2ZSB0YWJzIHdpbGwgZ2V0IHBpbmdlZCBmb3JldmVyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwaW5nVGFiUmVhZHkodGFiSWQsIHBvbGxpbmdJbnRlcnZhbCwgcmVhZHkgPSB0cnVlKSB7XHJcbiAgICAvLyBLZWVwIHBpbmdpbmcgdW50aWwgdGFiIHJlc3BvbmRzXHJcbiAgICB3aGlsZSAocmVhZHkgPT09IHRydWUpIHtcclxuICAgICAgICBjb25zdCBwaW5nUmVzcG9uc2UgPSBhd2FpdCBzZW5kUmVxdWVzdENvbnRlbnQodGFiSWQsIHBpbmdSZXF1ZXN0KTtcclxuICAgICAgICBpZiAocGluZ1Jlc3BvbnNlLnJlc3VsdCA9PT0gXCJva1wiKSB7IC8vIFN1Y2Nlc3NmdWxseSBjb21tdW5pY2F0ZWQgd2l0aCB0YWJcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHNsZWVwKHBvbGxpbmdJbnRlcnZhbCk7XHJcbiAgICB9XHJcbn1cclxuLy8gQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIG1pbnV0ZXMgYW5kIHNlY29uZHMgZnJvbSBtaWxsaXNlY29uZHNcclxuZXhwb3J0IGZ1bmN0aW9uIG1pbnV0ZXNTZWNvbmRzKHRvdGFsTWlsbGlTZWNvbmRzLCB0cnVuY2F0ZSA9IGZhbHNlKSB7XHJcbiAgICAvLyBCeXBhc3MgZnVuY3Rpb25hbGl0eSBmb3IgbmVnYXRpdmUgdGltZXNcclxuICAgIGxldCBuZWdhdGl2ZSA9IGZhbHNlO1xyXG4gICAgaWYgKHRvdGFsTWlsbGlTZWNvbmRzIDwgMCkge1xyXG4gICAgICAgIHRvdGFsTWlsbGlTZWNvbmRzID0gdG90YWxNaWxsaVNlY29uZHMgKiAtMTtcclxuICAgICAgICBuZWdhdGl2ZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0b3RhbFNlY29uZHMgPSB0b3RhbE1pbGxpU2Vjb25kcyAvIDEwMDA7XHJcbiAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApO1xyXG4gICAgbGV0IHNlY29uZHMgPSB0b3RhbFNlY29uZHMgJSA2MDtcclxuICAgIC8vIFRydW5jYXRlIG51bWJlcnMgaWYgZGVzaXJlZFxyXG4gICAgaWYgKHRydW5jYXRlID09PSB0cnVlKSB7XHJcbiAgICAgICAgbWludXRlcyA9IE1hdGguZmxvb3IobWludXRlcyk7XHJcbiAgICAgICAgc2Vjb25kcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gW21pbnV0ZXMsIHNlY29uZHMsIG5lZ2F0aXZlXTtcclxufVxyXG4vLyBEZWNvZGVzIHRoZSBxdWV1ZSBjb2RlIHRvIHRoZSBxdWV1ZSB0aW1lIGluIG1pbGxpc2Vjb25kc1xyXG5leHBvcnQgZnVuY3Rpb24gYmVzdEJ1eURlY29kZVF1ZXVlKHF1ZXVlQ29kZSkge1xyXG4gICAgY29uc3Qgc3BsaXRDb2RlID0gcXVldWVDb2RlLnNwbGl0KFwiLVwiKTtcclxuICAgIGNvbnN0IHBhcnNlZENvZGUgPSBzcGxpdENvZGUubWFwKGNodW5rID0+IHBhcnNlSW50KGNodW5rLCAxNikpO1xyXG4gICAgLy8gaWYocGFyc2VkQ29kZVsxXSAqIHBhcnNlZENvZGVbMl0gKiBwYXJzZWRDb2RlWzNdID09PSBwYXJzZWRDb2RlWzRdKVxyXG4gICAgY29uc3Qgd2FpdER1cmF0aW9uID0gMTAwICogMTAgKiBwYXJzZUludChzcGxpdENvZGVbMl0gKyBzcGxpdENvZGVbM10sIDE2KSAvIHBhcnNlZENvZGVbMV07XHJcbiAgICByZXR1cm4gd2FpdER1cmF0aW9uO1xyXG59XHJcbi8vIE9wZW4gYSBwYWdlIHdpdGggdGhlIGdpdmVuIFVSTCBhbmQgd2hldGhlciB0byBtYWtlIGFjdGl2ZVxyXG5leHBvcnQgZnVuY3Rpb24gb3BlblBhZ2UodXJsLCBhY3RpdmUgPSBmYWxzZSkge1xyXG4gICAgYnJvd3Nlci50YWJzLmNyZWF0ZSh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgYWN0aXZlOiBhY3RpdmUsXHJcbiAgICB9KTtcclxufVxyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmhtZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlID0gT2JqZWN0LmNyZWF0ZShtb2R1bGUpO1xuXHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsICdleHBvcnRzJywge1xuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0c2V0OiAoKSA9PiB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0VTIE1vZHVsZXMgbWF5IG5vdCBhc3NpZ24gbW9kdWxlLmV4cG9ydHMgb3IgZXhwb3J0cy4qLCBVc2UgRVNNIGV4cG9ydCBzeW50YXgsIGluc3RlYWQ6ICcgKyBtb2R1bGUuaWQpO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBtb2R1bGU7XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSA5Nzk7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDk3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0aWYoY2h1bmtJZHMuc29tZSgoaWQpID0+IChpbnN0YWxsZWRDaHVua3NbaWRdICE9PSAwKSkpIHtcblx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHR9XG5cdGlmKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKSBwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbihkYXRhKTtcblx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcblx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiYgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG5cdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0oKTtcblx0XHR9XG5cdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRzW2ldXSA9IDA7XG5cdH1cblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uTyhyZXN1bHQpO1xufVxuXG52YXIgY2h1bmtMb2FkaW5nR2xvYmFsID0gc2VsZltcIndlYnBhY2tDaHVua2FraXRvc19hdXRvbWF0ZWRfdXRpbGl0aWVzXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2FraXRvc19hdXRvbWF0ZWRfdXRpbGl0aWVzXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbMTU0XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oNjUwKSkpXG5fX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKF9fd2VicGFja19leHBvcnRzX18pO1xuIl0sIm5hbWVzIjpbIndlYnBhY2tUaGVuIiwid2VicGFja0V4cG9ydHMiLCJjb21wbGV0ZVF1ZXVlIiwiY29tcGxldGVGdW5jdGlvbiIsInF1ZXVlRnVuY3Rpb24iLCJkZWZlcnJlZCIsInRhcmdldCIsImRvY3VtZW50IiwiYm9keSIsInByb3BzIiwibG9nZ2luZ1NlbGYiLCJiZXN0QnV5VGFiVVJMIiwic2V0dXBCZXN0QnV5UmVxdWVzdEhhbmRsZXJzIiwicmVxdWVzdEJvZHlDYWNoZSIsImNocm9tZSIsIndlYlJlcXVlc3QiLCJvbkJlZm9yZVJlcXVlc3QiLCJhZGRMaXN0ZW5lciIsImRldGFpbHMiLCJ1bmRlZmluZWQiLCJyZXF1ZXN0Qm9keSIsImRlY29kZWRCb2R5IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYXBwbHkiLCJVaW50OEFycmF5IiwicmF3IiwiYnl0ZXMiLCJwYXJzZWRCb2R5IiwiSlNPTiIsInBhcnNlIiwicmVxdWVzdElkIiwic2t1cyIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInNrdUlkIiwic2VyaWFsaXplZFNLVXMiLCJzdHJpbmdpZnkiLCJ1cmxzIiwib25CZWZvcmVTZW5kSGVhZGVycyIsIm9uSGVhZGVyc1JlY2VpdmVkIiwiX2EiLCJhMmNUcmFuc2FjdGlvblJlZmVyZW5jZUlkIiwiYTJjVHJhbnNhY3Rpb25Db2RlIiwiaGVhZGVyIiwicmVzcG9uc2VIZWFkZXJzIiwibmFtZSIsInZhbHVlIiwic3RhdHVzQ29kZSIsImNhY2hlZEJvZHkiLCJza3UiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInF1ZXVlVGltZSIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwicXVldWVEYXRhIiwibWVzc2FnZSIsInByb2R1Y3ROYW1lIiwiZXhpc3RpbmdRdWV1ZXMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwic2hvcnRlciIsImRpZmZNaW51dGVzIiwiZGlmZlNlY29uZHMiLCJ1cGRhdGVSZXBsYWNlUXVldWVzIiwidGl0bGUiLCJzZXR1cEJlc3RCdXlJbnRlcnZhbCIsImJsYWNrbGlzdGVkIiwiU2V0Iiwic2V0SW50ZXJ2YWwiLCJhc3luYyIsImN1cnJlbnRUaW1lIiwic2t1UXVldWVEYXRhIiwiZW50cmllcyIsInJlbWFpbmluZ1RpbWUiLCJoYXMiLCJhZGQiLCJwcm9jZXNzQWRkVG9DYXJ0IiwiZGVsZXRlIiwibmV3UXVldWVEYXRhIiwiZXhpc3RpbmdRdWV1ZXNNYXBwZWQiLCJxdWV1ZUtleSIsInNvcnQiLCJxdWV1ZTEiLCJxdWV1ZTIiLCJwcmV2aW91c0Jlc3RSZW1haW5pbmciLCJuZXdRdWV1ZUtleSIsIm5ld1JlbWFpbmluZyIsInB1c2giLCJkaWZmTmVnYXRpdmUiLCJzaG9ydGVzdFF1ZXVlIiwibWVyZ2VQcm9kdWN0UXVldWVzIiwibWVyZ2VRdWV1ZURhdGEiLCJyZW1haW5pbmdNaW51dGVzIiwicmVtYWluaW5nU2Vjb25kcyIsIm5lZ2F0aXZlIiwic3luY1JlcXVlc3QiLCJoYW5kbGVyIiwiYXJncyIsInByb2Nlc3NBZGRTdGF0dXMiLCJwcm9jZXNzQWRkUmVzcG9uc2UiLCJyZXN1bHQiLCJwYXlsb2FkIiwibm90aWZpY2F0aW9uSWQiLCJicm93c2VyIiwibm90aWZpY2F0aW9ucyIsIm9uQnV0dG9uQ2xpY2tlZCIsImNsaWNrZWRJZCIsImJ1dHRvbkluZGV4Iiwic3RhdHVzIiwicXVldWVkUmVxdWVzdHMiLCJleGVjdXRpbmciLCJtZXJnZVNldHRpbmdzIiwiY2F0ZWdvcnlLZXkiLCJjYXRlZ29yeURhdGEiLCJzdG9yZWRDYXRlZ29yeVNldHRpbmdzIiwiY2F0ZWdvcnlNb2RpZmllZCIsInNldHRpbmdLZXkiLCJzZXR0aW5nRGF0YSIsInNldHRpbmdzIiwic3RvcmVkU2V0dGluZ1ZhbHVlIiwiZGVmYXVsdCIsInNldCIsImRlZmF1bHRDYXRlZ29yeVNldHRpbmdzIiwicmVkdWNlIiwib2JqIiwiYWRkU3luY1JlcXVlc3QiLCJyZXF1ZXN0IiwidXJsTWF0Y2giLCJQcm9taXNlIiwicmVzb2x2ZSIsInF1ZXVlZFJlcXVlc3QiLCJhc3NpZ24iLCJzaGlmdCIsInF1ZXVlZFJlc3BvbnNlIiwiZXhlY3V0ZSIsInNlcmlhbGl6ZWRSZXF1ZXN0IiwidXJsR2xvYiIsIm1hdGNoaW5nVGFicyIsInRhYnMiLCJxdWVyeSIsInVybCIsImRpc2NhcmRlZCIsInJldHJ5UmVxdWVzdCIsInRhYiIsImlkIiwicGluZ1Jlc3BvbnNlIiwicmVzcG9uc2UiLCJFcnJvciIsImluY2x1ZGVzIiwicmVsb2FkIiwic2VyaWFsaXplZFJlc3BvbnNlIiwiZXJyIiwicGVyZm9ybVN5bmNSZXF1ZXN0cyIsImNyZWF0ZVRhYlJlYWR5Iiwid2FpdCIsImNyZWF0ZSIsImFjdGl2ZSIsInNvdW5kTm90aWZpY2F0aW9uIiwic291bmRLZXkiLCJzZXR0aW5nS2V5cyIsImJ1dHRvbnMiLCJ0eXBlIiwiaWNvblVybCIsInNldFRpbWVvdXQiLCJjbGVhciIsIkF1ZGlvIiwicGxheSIsImRvbWFpbk1hdGNoZXMiLCJwaW5nUmVxdWVzdCIsImJlc3RCdXlRdWV1ZXMiLCJzZXR0aW5nc0Rpc3BsYXlzIiwiJCIsImFqYXgiLCJkYXRhIiwicmF3QmVzdEJ1eUl0ZW1zIiwiYmVzdEJ1eURpc3BsYXlzIiwic2xlZXAiLCJtcyIsInJlZHVjZURpc3BsYXlzIiwiaW5wdXQiLCJfIiwicmF3Q2F0ZWdvcnlEYXRhIiwic3ViT2JqIiwicmF3SXRlbURhdGEiLCJkaXNwbGF5IiwiZXh0ZW5zaW9uTG9nIiwic2VuZGVyIiwibGV2ZWwiLCJvdXRwdXQiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwic3Vic3RyaW5nIiwiY29uc29sZSIsImxvZyIsImRlYnVnIiwid2FybiIsImVycm9yIiwibWVzc2FnZVByb2Nlc3NIYW5kbGVycyIsImNvbnRlbnRLZXkiLCJoYW5kbGVycyIsInJ1bnRpbWUiLCJvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJzZW5kUmVxdWVzdEJhY2tncm91bmQiLCJzZW5kTWVzc2FnZSIsInRoZW4iLCJjYXRjaCIsInNlbmRSZXF1ZXN0Q29udGVudCIsInRhYklkIiwiaW5pdGlhbGl6ZVN0b3JlIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwic3RvcmFnZVZhbHVlIiwic3RvcmFnZUNvbnRlbnQiLCJzdG9yYWdlIiwibG9jYWwiLCJnZXQiLCJzdG9yYWdlR2V0Iiwic3RvcmUiLCJzdG9yZUtleSIsInNldEtleSIsInNldFZhbHVlIiwidXBkYXRlIiwiZGVsS2V5IiwiZGVsIiwicGluZ1RhYlJlYWR5IiwicG9sbGluZ0ludGVydmFsIiwicmVhZHkiLCJtaW51dGVzU2Vjb25kcyIsInRvdGFsTWlsbGlTZWNvbmRzIiwidHJ1bmNhdGUiLCJ0b3RhbFNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJiZXN0QnV5RGVjb2RlUXVldWUiLCJxdWV1ZUNvZGUiLCJzcGxpdENvZGUiLCJzcGxpdCIsInBhcnNlZENvZGUiLCJjaHVuayIsInBhcnNlSW50IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZSIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJtIiwiU3ltYm9sIiwicXVldWUiLCJmb3JFYWNoIiwiZm4iLCJyIiwiYSIsImhhc0F3YWl0IiwiY3VycmVudERlcHMiLCJvdXRlclJlc29sdmUiLCJyZWplY3QiLCJpc0V2YWx1YXRpbmciLCJuZXN0ZWQiLCJ3aGVuQWxsIiwiZGVwcyIsIm9uUmVzb2x2ZSIsIm9uUmVqZWN0IiwiZGVwIiwiaSIsInByb21pc2UiLCJyZWoiLCJyZWplY3RGbiIsInJldCIsIndyYXBEZXBzIiwiZCIsIk8iLCJjaHVua0lkcyIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJmdWxmaWxsZWQiLCJqIiwiZXZlcnkiLCJzcGxpY2UiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsImhtZCIsImNoaWxkcmVuIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwibW9yZU1vZHVsZXMiLCJzb21lIiwiY2h1bmtMb2FkaW5nR2xvYmFsIiwic2VsZiIsImJpbmQiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==
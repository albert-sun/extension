(()=>{"use strict";var e,t={8681:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettings=t.changelogs=void 0,t.changelogs=[{version:"b0.2.1",bulletpoints:["Fixed empty blacklist disqualifying all saved items",'Replaced icon which said "AQU" instead of "AGU" (original extension name was AutoQueueUtilities)',"<b>TODO:</b> Fix notification sound not playing if user hasn't interacted with document, maybe play from background instead?"]},{version:"b0.2.0",bulletpoints:["Added About tab showing some information and usage instructions","Changed extension icon to something somewhat more presentable","Removed placeholder logging tab pending further development","Added blacklisted keywords functionality to script (still no test buttons)","Other minor edits to extension popup styling, nothing too major"]},{version:"b0.1.0",bulletpoints:["Added changelog (this tab here) and placeholder logging tab for testing","Changed extension script loading to work somewhat more dynamically"]},{version:"b0.0.1",bulletpoints:['Ported most functionality from Tampermonkey script located <a href="https://github.com/albert-sun/tamper-scripts/">here</a>',"<b>Features not yet implemented</b>: blacklisted keywords and buttons for testing wtihin settings (removed until settings structure finalized)","<b>Improvements from Tampermonkey script</b>: Instant settings propogation and no refresh required for cart addition or removal"]}],t.defaultSettings={bestbuy:[{key:"automaticQueueFix",description:"Attempt to automatically fix broken queues",type:"slideSwitch",value:!0},{key:"autoClickWhitelisted",description:"Automatically click whitelisted ATC buttons",type:"slideSwitch",value:!0},{key:"stopClickCartOccupied",description:"Stop automatic clicking when cart occupied",type:"slideSwitch",value:!0},{key:"globalPollingInterval",description:"Global content script polling interval",type:"number",extraText:"ms",value:100},{key:"successiveClickTimeout",description:"Timeout between clicking unique buttons",type:"number",extraText:"ms",value:2500},{key:"notificationSoundURL",description:"Notification sound URL (mp3 hotlink)",type:"text",value:"https://github.com/albert-sun/tamper-scripts/blob/main/resources/notification.mp3?raw=true"},{key:"whitelistedKeywords",description:"Whitelisted keywords (comma-separated)",type:"text",value:"3060,3060ti,3060 ti,3070,3070ti,3070 ti,3080,3080ti,3080 ti,3090"},{key:"blacklistedKeywords",description:"Blacklisted keywords (comma-separated)",type:"text",value:""}]}},735:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(8197)),s=n(9416),a=n(1209),c=n(8681);function l(e,t,n=!0){return o(this,void 0,void 0,(function*(){if(yield s.browser.storage.local.set({[`setting-${e}`]:t}),!0===n){const n=yield s.browser.tabs.query({}),o={instruction:"updatedSetting",arguments:[e,t]};for(const e of n)s.browser.tabs.sendMessage(e.id,o)}}))}const d=$(".settings")[0];new r.default(d,{autoHide:!1}),$(d).find(".content-main").load("/pages/settings.html",(function(){!function(){o(this,void 0,void 0,(function*(){const e=c.defaultSettings;for(const[t,n]of Object.entries(e))e[t]=yield a.retrieveSettings(t);for(const[t,n]of Object.entries(c.defaultSettings)){const n=$(`#settings-${t}`)[0];for(const o of e[t]){const e=document.createElement("tr");e.classList.add("table-row"),n.appendChild(e);const i=document.createElement("td");i.classList.add("table-element-left"),e.appendChild(i);const r=document.createElement("td");r.classList.add("table-element-right"),e.appendChild(r),i.innerText=o.description;const s=`${t}-${o.key}`;let a;if("slideSwitch"===o.type){a=document.createElement("label"),a.classList.add("switch");const e=document.createElement("input");a.appendChild(e),e.type="checkbox",e.checked=o.value,$(e).change((function(){l(s,e.checked)}));const t=document.createElement("span");t.classList.add("slider"),t.classList.add("round"),a.appendChild(t)}else a=document.createElement("input"),a.classList.add("table-input"),a.type=o.type,a.value=o.value,$(a).change((function(){l(s,a.value)}));if(r.appendChild(a),"button"!==o.type&&"checkbox"!==o.type&&o.extraText){const e=document.createElement("p");e.classList.add("table-extra"),e.textContent=o.extraText,r.appendChild(e)}}}}))}()}))},1209:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveSettingsKV=t.retrieveSettings=t.storageGet=t.elementColor=t.sleep=void 0;const i=n(9416),r=n(8681);t.sleep=function(e){return new Promise((t=>setTimeout(t,e)))};const s=[{color:"yellow",r:255,g:224,b:0},{color:"blue",r:0,g:30,b:115},{color:"grey",r:197,g:203,b:213},{color:"white",r:255,g:255,b:255}];function a(e,t){return o(this,void 0,void 0,(function*(){const n=yield i.browser.storage.local.get(e);return void 0!==n[e]?n[e]:t}))}function c(e){return o(this,void 0,void 0,(function*(){const t=r.defaultSettings[e];for(const n of t){if(void 0===n.value)continue;const t=`setting-${e}-${n.key}`;n.value=yield a(t,n.value)}return t}))}t.elementColor=function(e){const t=getComputedStyle(e,null).getPropertyValue("background-color");if(t.includes("rgb(0, 0, 0"))return"transparent";const n={r:0,g:0,b:0},o=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);n.r=Number(o[1]),n.g=Number(o[2]),n.b=Number(o[3]);const i={color:"",distance:442};for(const e of s){const t=Math.sqrt(Math.pow(n.r-e.r,2)+Math.pow(n.g-e.g,2)+(n.b-e.b));t<i.distance&&(i.color=e.color,i.distance=t)}return i.color},t.storageGet=a,t.retrieveSettings=c,t.retrieveSettingsKV=function(e){return o(this,void 0,void 0,(function*(){const t={},n=yield c(e);for(const e of n)void 0!==e.value&&(t[e.key]=e);return t}))}}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var s=1/0;for(l=0;l<e.length;l++){for(var[n,i,r]=e[l],a=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(a=!1,r<s&&(s=r));a&&(e.splice(l--,1),t=i())}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[n,i,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=436,(()=>{var e={436:0,533:0,386:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,a,c]=n,l=0;for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(c)var d=c(o);for(t&&t(n);l<s.length;l++)r=s[l],o.o(e,r)&&e[r]&&e[r][0](),e[s[l]]=0;return o.O(d)},n=self.webpackChunkextension=self.webpackChunkextension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[736],(()=>o(735)));i=o.O(i)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9leHRlbnNpb24vLi9zb3VyY2UvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2V4dGVuc2lvbi8uL3NvdXJjZS9wYWdlX3NldHRpbmdzLnRzIiwid2VicGFjazovL2V4dGVuc2lvbi8uL3NvdXJjZS91dGlsaXRpZXMudHMiLCJ3ZWJwYWNrOi8vZXh0ZW5zaW9uL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImRlZmVycmVkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkZWZhdWx0U2V0dGluZ3MiLCJjaGFuZ2Vsb2dzIiwia2V5IiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiZXh0cmFUZXh0IiwiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsInNpbXBsZWJhcl8xIiwid2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEiLCJ1dGlsaXRpZXNfMSIsImNvbnN0YW50c18xIiwidXBkYXRlU2V0dGluZyIsInNldHRpbmdLZXkiLCJzZXR0aW5nVmFsdWUiLCJub3RpZnkiLCJicm93c2VyIiwic3RvcmFnZSIsImxvY2FsIiwic2V0IiwidGFicyIsInF1ZXJ5IiwibWVzc2FnZSIsInRhYiIsInNlbmRNZXNzYWdlIiwiaWQiLCJwYWdlV3JhcHBlciIsIiQiLCJkZWZhdWx0IiwiYXV0b0hpZGUiLCJmaW5kIiwibG9hZCIsImN1cnJlbnRTZXR0aW5ncyIsInNldHRpbmdzQ2F0ZWdvcnkiLCJfIiwiZW50cmllcyIsInJldHJpZXZlU2V0dGluZ3MiLCJzZXR0aW5nc1RhYmxlIiwic2V0dGluZyIsInNldHRpbmdSb3ciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImxlZnREZXNjcmlwdGlvbiIsInJpZ2h0RGVzY3JpcHRpb24iLCJpbm5lclRleHQiLCJzZXR0aW5nUmlnaHQiLCJ1bmRlckNoZWNrIiwiY2hlY2tlZCIsImNoYW5nZSIsInVuZGVyU3BhbiIsInRleHRDb250ZW50IiwicG9wdWxhdGVTZXR0aW5ncyIsInJldHJpZXZlU2V0dGluZ3NLViIsInN0b3JhZ2VHZXQiLCJlbGVtZW50Q29sb3IiLCJzbGVlcCIsIm1zIiwic2V0VGltZW91dCIsImNvbG9ycyIsImNvbG9yIiwiciIsImciLCJiIiwic3RvcmFnZUtleSIsImRlZmF1bHRWYWx1ZSIsInN0b3JhZ2VSZXN1bHQiLCJnZXQiLCJ1bmRlZmluZWQiLCJjYXRlZ29yeVNldHRpbmdzIiwiZWxlbWVudCIsImNvbG9yVGV4dCIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaW5jbHVkZXMiLCJwYXJzZWRDb2xvciIsIm1hdGNoZWRDb2xvciIsIm1hdGNoIiwiTnVtYmVyIiwiY2xvc2VzdCIsImRpc3RhbmNlIiwiY2hlY2tDb2xvciIsIk1hdGgiLCJzcXJ0IiwicG93IiwiY2F0ZWdvcnlTZXR0aW5nc0tWIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwiTyIsImNodW5rSWRzIiwiZm4iLCJwcmlvcml0eSIsIm5vdEZ1bGZpbGxlZCIsIkluZmluaXR5IiwiaSIsImxlbmd0aCIsImoiLCJrZXlzIiwiZXZlcnkiLCJzcGxpY2UiLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImVudW1lcmFibGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJmb3JFYWNoIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sIm1hcHBpbmdzIjoidUJBQUlBLEUsZ0JDQ0pDLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRRSxnQkFBa0JGLEVBQVFHLGdCQUFhLEVBRS9DSCxFQUFRRyxXQUFhLENBQ2pCLENBQ0ksUUFBVyxTQUNYLGFBQWdCLENBQ1osc0RBQ0EsbUdBQ0EsaUlBRUwsQ0FDQyxRQUFXLFNBQ1gsYUFBZ0Is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SCxFQUFtQkksS0FBT1QsRUFBcUJRLEtBQUssS0FBTUgsRUFBbUJJLEtBQUtELEtBQUtILEssR0M3Q3ZGLElBQUlLLEVBQXNCL0MsRUFBb0JPLE9BQUUxQixFQUFXLENBQUMsTUFBTSxJQUFPbUIsRUFBb0IsT0FDN0YrQyxFQUFzQi9DLEVBQW9CTyxFQUFFd0MsSSIsImZpbGUiOiJzb3VyY2UvcGFnZV9zZXR0aW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHJlc3VsdCA9IGZuKCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZGVmYXVsdFNldHRpbmdzID0gZXhwb3J0cy5jaGFuZ2Vsb2dzID0gdm9pZCAwO1xyXG4vLyBDaGFuZ2Vsb2cgZnJvbSBwcmV2aW91cyB2ZXJzaW9uc1xyXG5leHBvcnRzLmNoYW5nZWxvZ3MgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMi4xXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgRml4ZWQgZW1wdHkgYmxhY2tsaXN0IGRpc3F1YWxpZnlpbmcgYWxsIHNhdmVkIGl0ZW1zYCxcclxuICAgICAgICAgICAgYFJlcGxhY2VkIGljb24gd2hpY2ggc2FpZCBcIkFRVVwiIGluc3RlYWQgb2YgXCJBR1VcIiAob3JpZ2luYWwgZXh0ZW5zaW9uIG5hbWUgd2FzIEF1dG9RdWV1ZVV0aWxpdGllcylgLFxyXG4gICAgICAgICAgICBgPGI+VE9ETzo8L2I+IEZpeCBub3RpZmljYXRpb24gc291bmQgbm90IHBsYXlpbmcgaWYgdXNlciBoYXNuJ3QgaW50ZXJhY3RlZCB3aXRoIGRvY3VtZW50LCBtYXliZSBwbGF5IGZyb20gYmFja2dyb3VuZCBpbnN0ZWFkP2BcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMi4wXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgQWRkZWQgQWJvdXQgdGFiIHNob3dpbmcgc29tZSBpbmZvcm1hdGlvbiBhbmQgdXNhZ2UgaW5zdHJ1Y3Rpb25zYCxcclxuICAgICAgICAgICAgYENoYW5nZWQgZXh0ZW5zaW9uIGljb24gdG8gc29tZXRoaW5nIHNvbWV3aGF0IG1vcmUgcHJlc2VudGFibGVgLFxyXG4gICAgICAgICAgICBgUmVtb3ZlZCBwbGFjZWhvbGRlciBsb2dnaW5nIHRhYiBwZW5kaW5nIGZ1cnRoZXIgZGV2ZWxvcG1lbnRgLFxyXG4gICAgICAgICAgICBgQWRkZWQgYmxhY2tsaXN0ZWQga2V5d29yZHMgZnVuY3Rpb25hbGl0eSB0byBzY3JpcHQgKHN0aWxsIG5vIHRlc3QgYnV0dG9ucylgLFxyXG4gICAgICAgICAgICBgT3RoZXIgbWlub3IgZWRpdHMgdG8gZXh0ZW5zaW9uIHBvcHVwIHN0eWxpbmcsIG5vdGhpbmcgdG9vIG1ham9yYCxcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMS4wXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgQWRkZWQgY2hhbmdlbG9nICh0aGlzIHRhYiBoZXJlKSBhbmQgcGxhY2Vob2xkZXIgbG9nZ2luZyB0YWIgZm9yIHRlc3RpbmdgLFxyXG4gICAgICAgICAgICBgQ2hhbmdlZCBleHRlbnNpb24gc2NyaXB0IGxvYWRpbmcgdG8gd29yayBzb21ld2hhdCBtb3JlIGR5bmFtaWNhbGx5YCxcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMC4xXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgUG9ydGVkIG1vc3QgZnVuY3Rpb25hbGl0eSBmcm9tIFRhbXBlcm1vbmtleSBzY3JpcHQgbG9jYXRlZCA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2FsYmVydC1zdW4vdGFtcGVyLXNjcmlwdHMvXCI+aGVyZTwvYT5gLFxyXG4gICAgICAgICAgICBgPGI+RmVhdHVyZXMgbm90IHlldCBpbXBsZW1lbnRlZDwvYj46IGJsYWNrbGlzdGVkIGtleXdvcmRzIGFuZCBidXR0b25zIGZvciB0ZXN0aW5nIHd0aWhpbiBzZXR0aW5ncyAocmVtb3ZlZCB1bnRpbCBzZXR0aW5ncyBzdHJ1Y3R1cmUgZmluYWxpemVkKWAsXHJcbiAgICAgICAgICAgIGA8Yj5JbXByb3ZlbWVudHMgZnJvbSBUYW1wZXJtb25rZXkgc2NyaXB0PC9iPjogSW5zdGFudCBzZXR0aW5ncyBwcm9wb2dhdGlvbiBhbmQgbm8gcmVmcmVzaCByZXF1aXJlZCBmb3IgY2FydCBhZGRpdGlvbiBvciByZW1vdmFsYFxyXG4gICAgICAgIF1cclxuICAgIH1cclxuXTtcclxuLy8gU2V0dGluZ3MgYWNyb3NzIGFsbCBjYXRlZ29yaWVzIGZvciBleHRlbnNpb25cclxuZXhwb3J0cy5kZWZhdWx0U2V0dGluZ3MgPSB7XHJcbiAgICBcImJlc3RidXlcIjogW1xyXG4gICAgICAgIHsga2V5OiBcImF1dG9tYXRpY1F1ZXVlRml4XCIsIGRlc2NyaXB0aW9uOiBcIkF0dGVtcHQgdG8gYXV0b21hdGljYWxseSBmaXggYnJva2VuIHF1ZXVlc1wiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwiYXV0b0NsaWNrV2hpdGVsaXN0ZWRcIiwgZGVzY3JpcHRpb246IFwiQXV0b21hdGljYWxseSBjbGljayB3aGl0ZWxpc3RlZCBBVEMgYnV0dG9uc1wiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwic3RvcENsaWNrQ2FydE9jY3VwaWVkXCIsIGRlc2NyaXB0aW9uOiBcIlN0b3AgYXV0b21hdGljIGNsaWNraW5nIHdoZW4gY2FydCBvY2N1cGllZFwiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwiZ2xvYmFsUG9sbGluZ0ludGVydmFsXCIsIGRlc2NyaXB0aW9uOiBcIkdsb2JhbCBjb250ZW50IHNjcmlwdCBwb2xsaW5nIGludGVydmFsXCIsIHR5cGU6IFwibnVtYmVyXCIsIGV4dHJhVGV4dDogXCJtc1wiLCB2YWx1ZTogMTAwIH0sXHJcbiAgICAgICAgeyBrZXk6IFwic3VjY2Vzc2l2ZUNsaWNrVGltZW91dFwiLCBkZXNjcmlwdGlvbjogXCJUaW1lb3V0IGJldHdlZW4gY2xpY2tpbmcgdW5pcXVlIGJ1dHRvbnNcIiwgdHlwZTogXCJudW1iZXJcIiwgZXh0cmFUZXh0OiBcIm1zXCIsIHZhbHVlOiAyNTAwIH0sXHJcbiAgICAgICAgeyBrZXk6IFwibm90aWZpY2F0aW9uU291bmRVUkxcIiwgZGVzY3JpcHRpb246IFwiTm90aWZpY2F0aW9uIHNvdW5kIFVSTCAobXAzIGhvdGxpbmspXCIsIHR5cGU6IFwidGV4dFwiLCB2YWx1ZTogXCJodHRwczovL2dpdGh1Yi5jb20vYWxiZXJ0LXN1bi90YW1wZXItc2NyaXB0cy9ibG9iL21haW4vcmVzb3VyY2VzL25vdGlmaWNhdGlvbi5tcDM/cmF3PXRydWVcIiB9LFxyXG4gICAgICAgIHsga2V5OiBcIndoaXRlbGlzdGVkS2V5d29yZHNcIiwgZGVzY3JpcHRpb246IFwiV2hpdGVsaXN0ZWQga2V5d29yZHMgKGNvbW1hLXNlcGFyYXRlZClcIiwgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiBcIjMwNjAsMzA2MHRpLDMwNjAgdGksMzA3MCwzMDcwdGksMzA3MCB0aSwzMDgwLDMwODB0aSwzMDgwIHRpLDMwOTBcIiB9LFxyXG4gICAgICAgIHsga2V5OiBcImJsYWNrbGlzdGVkS2V5d29yZHNcIiwgZGVzY3JpcHRpb246IFwiQmxhY2tsaXN0ZWQga2V5d29yZHMgKGNvbW1hLXNlcGFyYXRlZClcIiwgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiBcIlwiIH0sXHJcbiAgICAgICAgLy8geyBrZXk6IFwidGVzdE5vdGlmaWNhdGlvblNvdW5kXCIsIGRlc2NyaXB0aW9uOiBcIlBsYXkgY3VycmVudCBub3RpZmljYXRpb24gc291bmRcIiwgdHlwZTogXCJidXR0b25cIiwgaW5zdHJ1Y3Rpb246IFwidGVzdE5vdGlmaWNhdGlvblNvdW5kXCIgfSxcclxuICAgIF1cclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5jb25zdCBzaW1wbGViYXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwic2ltcGxlYmFyXCIpKTtcclxuY29uc3Qgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEgPSByZXF1aXJlKFwid2ViZXh0ZW5zaW9uLXBvbHlmaWxsLXRzXCIpO1xyXG5jb25zdCB1dGlsaXRpZXNfMSA9IHJlcXVpcmUoXCIuL3V0aWxpdGllc1wiKTtcclxuY29uc3QgY29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHNcIik7XHJcbi8vIEFzeW5jaHJvbm91c2x5IHVwZGF0ZXMgZXh0ZW5zaW9uIHN0b3JhZ2Ugd2l0aCBnaXZlbiBzZXR0aW5nIGFuZCBub3RpZnkgdGFicyBvZiB1cGRhdGVcclxuLy8gSXNzdWUgd2l0aCBub3RpZnlpbmcgdG8gcGFnZXMgbm90IHJlbG9hZGVkIHdoZW4gdXBkYXRpbmcgZXh0ZW5zaW9uIHNvdXJjZT9cclxuZnVuY3Rpb24gdXBkYXRlU2V0dGluZyhzZXR0aW5nS2V5LCBzZXR0aW5nVmFsdWUsIG5vdGlmeSA9IHRydWUpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgeWllbGQgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEuYnJvd3Nlci5zdG9yYWdlLmxvY2FsLnNldCh7IFtgc2V0dGluZy0ke3NldHRpbmdLZXl9YF06IHNldHRpbmdWYWx1ZSB9KTtcclxuICAgICAgICBpZiAobm90aWZ5ID09PSB0cnVlKSB7IC8vIEVuYWJsZWQgYnkgZGVmYXVsdCBmb3IgY29udmVuaWVuY2VcclxuICAgICAgICAgICAgY29uc3QgdGFicyA9IHlpZWxkIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF90c18xLmJyb3dzZXIudGFicy5xdWVyeSh7fSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7IFwiaW5zdHJ1Y3Rpb25cIjogXCJ1cGRhdGVkU2V0dGluZ1wiLCBcImFyZ3VtZW50c1wiOiBbc2V0dGluZ0tleSwgc2V0dGluZ1ZhbHVlXSB9O1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhYiBvZiB0YWJzKSB7IC8vIE5vdGlmeSBpbmRpdmlkdWFsIHRhYnMgb2YgdXBkYXRlZCBzZXR0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBQb2x5ZmlsbCB0aHJvd3MgZXJyb3IgaWYgbWlzc2luZyBsaXN0ZW5lciwgaWdub3JlXHJcbiAgICAgICAgICAgICAgICB3ZWJleHRlbnNpb25fcG9seWZpbGxfdHNfMS5icm93c2VyLnRhYnMuc2VuZE1lc3NhZ2UodGFiLmlkLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbi8vIEZyb20gc2V0dGluZ3MgYnV0dG9ucywgYnJvYWRjYXN0IGdpdmVuIGluc3RydWN0aW9uIHRvIHRhYnNcclxuZnVuY3Rpb24gYnJvYWRjYXN0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24sIGFyZ3MgPSBbXSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCB0YWJzID0geWllbGQgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEuYnJvd3Nlci50YWJzLnF1ZXJ5KHt9KTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0geyBcImluc3RydWN0aW9uXCI6IGluc3RydWN0aW9uLCBcImFyZ3VtZW50c1wiOiBhcmdzIH07XHJcbiAgICAgICAgZm9yIChjb25zdCB0YWIgb2YgdGFicykge1xyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciByZXNwb25zZSBhbmQgcmV0dXJuIHdpdGggdGFicz9cclxuICAgICAgICAgICAgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEuYnJvd3Nlci50YWJzLnNlbmRNZXNzYWdlKHRhYi5pZCwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8gUmV0cmlldmUgZXhpc3Rpbmcgc2V0dGluZ3MgZnJvbSBzdG9yYWdlIGFuZCBwb3B1bGF0ZSBzZXR0aW5ncyB0YWJsZSBmb3IgY2F0ZWdvcnlcclxuZnVuY3Rpb24gcG9wdWxhdGVTZXR0aW5ncygpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFNldHRpbmdzID0gY29uc3RhbnRzXzEuZGVmYXVsdFNldHRpbmdzOyAvLyBCZWZvcmUgbW9kaWZpY2F0aW9uXHJcbiAgICAgICAgZm9yIChjb25zdCBbc2V0dGluZ3NDYXRlZ29yeSwgX10gb2YgT2JqZWN0LmVudHJpZXMoY3VycmVudFNldHRpbmdzKSkge1xyXG4gICAgICAgICAgICBjdXJyZW50U2V0dGluZ3Nbc2V0dGluZ3NDYXRlZ29yeV0gPSB5aWVsZCB1dGlsaXRpZXNfMS5yZXRyaWV2ZVNldHRpbmdzKHNldHRpbmdzQ2F0ZWdvcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3B1bGF0ZSBhbGwgc2V0dGluZ3MgY2F0ZWdvcmllcyB0YWJsZXMgd2l0aGluIHNldHRpbmdzIHBhZ2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtzZXR0aW5nc0NhdGVnb3J5LCBfXSBvZiBPYmplY3QuZW50cmllcyhjb25zdGFudHNfMS5kZWZhdWx0U2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZmFuY3kgdGFibGUgcm93cyBhbmQgc3R1ZmYsIGhhcyB0byBiZSBhIGNsZWFuZXIgd2F5P1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nc1RhYmxlID0gJChgI3NldHRpbmdzLSR7c2V0dGluZ3NDYXRlZ29yeX1gKVswXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzZXR0aW5nIG9mIGN1cnJlbnRTZXR0aW5nc1tzZXR0aW5nc0NhdGVnb3J5XSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSByZWxldmFudCBlbGVtZW50cyBmb3Igc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nUm93LmNsYXNzTGlzdC5hZGQoXCJ0YWJsZS1yb3dcIik7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1RhYmxlLmFwcGVuZENoaWxkKHNldHRpbmdSb3cpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGVmdERlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJ0YWJsZS1lbGVtZW50LWxlZnRcIik7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nUm93LmFwcGVuZENoaWxkKGxlZnREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmlnaHREZXNjcmlwdGlvbi5jbGFzc0xpc3QuYWRkKFwidGFibGUtZWxlbWVudC1yaWdodFwiKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdSb3cuYXBwZW5kQ2hpbGQocmlnaHREZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBkZXNjcmlwdGlvbiBhbmQgaW5mb3JtYXRpb24gZnJvbSBzZXR0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBBbHNvIGF0dGFjaCBvbmNsaWNrIC8gb25jaGFuZ2UgY2FsbGJhY2tzIHRvIGNoYW5nZSBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgbGVmdERlc2NyaXB0aW9uLmlubmVyVGV4dCA9IHNldHRpbmcuZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5nS2V5ID0gYCR7c2V0dGluZ3NDYXRlZ29yeX0tJHtzZXR0aW5nLmtleX1gO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNldHRpbmdSaWdodDtcclxuICAgICAgICAgICAgICAgIC8qaWYoc2V0dGluZy50eXBlID09PSBcImJ1dHRvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQnV0dG9uIHVzdWFsbHkgZm9yIHRlc3RpbmcsIGJyb2FkY2FzdHMgc3BlY2lmaWMgaW5zdHJ1Y3Rpb24gKGVtcHR5IGFyZ3VtZW50cylcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nUmlnaHQuY2xhc3NMaXN0LmFkZChcInRhYmxlLWJ1dHRvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nUmlnaHQuaHJlZiA9IFwiI1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodC5pbm5lclRleHQgPSBcIkNsaWNrIG1lIVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyb2FkY2FzdEluc3RydWN0aW9uKHNldHRpbmcuaW5zdHJ1Y3Rpb24gYXMgc3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UqLyBpZiAoc2V0dGluZy50eXBlID09PSBcInNsaWRlU3dpdGNoXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVja2JveCwgYWN0cyBtdWNoIGxpa2UgcmVndWxhciBpbnB1dCB3LyBkaWZmZXJlbnQgYXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nUmlnaHQuY2xhc3NMaXN0LmFkZChcInN3aXRjaFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmRlckNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodC5hcHBlbmRDaGlsZCh1bmRlckNoZWNrKTtcclxuICAgICAgICAgICAgICAgICAgICB1bmRlckNoZWNrLnR5cGUgPSBcImNoZWNrYm94XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kZXJDaGVjay5jaGVja2VkID0gc2V0dGluZy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHVuZGVyQ2hlY2spLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNldHRpbmcoc2V0dGluZ0tleSwgdW5kZXJDaGVjay5jaGVja2VkKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmRlclNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB1bmRlclNwYW4uY2xhc3NMaXN0LmFkZChcInNsaWRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB1bmRlclNwYW4uY2xhc3NMaXN0LmFkZChcInJvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodC5hcHBlbmRDaGlsZCh1bmRlclNwYW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIHRleHQgLyBudW1iZXIgLyBldGMuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVndWxhciBpbnB1dCwgYXNzdW1lIHZhbHVlcyBhcmUgcGFyc2VkIHByb3Blcmx5XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ1JpZ2h0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdSaWdodC5jbGFzc0xpc3QuYWRkKFwidGFibGUtaW5wdXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ1JpZ2h0LnR5cGUgPSBzZXR0aW5nLnR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ1JpZ2h0LnZhbHVlID0gc2V0dGluZy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkKHNldHRpbmdSaWdodCkuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2V0dGluZyhzZXR0aW5nS2V5LCBzZXR0aW5nUmlnaHQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmlnaHREZXNjcmlwdGlvbi5hcHBlbmRDaGlsZChzZXR0aW5nUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGV4dHJhIHRleHQgdG8gaW5wdXQgKHRleHQsIG51bWJlciwgZXRjLikgdXNpbmcgYSBwYXJhZ3JhcGggZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgaWYgKChzZXR0aW5nLnR5cGUgIT09IFwiYnV0dG9uXCIgJiYgc2V0dGluZy50eXBlICE9PSBcImNoZWNrYm94XCIpICYmIHNldHRpbmcuZXh0cmFUZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0cmFUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFUZXh0LmNsYXNzTGlzdC5hZGQoXCJ0YWJsZS1leHRyYVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBleHRyYVRleHQudGV4dENvbnRlbnQgPSBzZXR0aW5nLmV4dHJhVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICByaWdodERlc2NyaXB0aW9uLmFwcGVuZENoaWxkKGV4dHJhVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBwYWdlTmFtZSA9IFwic2V0dGluZ3NcIjtcclxuLy8gUGFnZSBzdGFydHVwIHdyYXBwZXIgZm9yIGxvYWRpbmcgY29udGVudCBhbmQgc2NyaXB0aW5nXHJcbmNvbnN0IHBhZ2VXcmFwcGVyID0gJChgLiR7cGFnZU5hbWV9YClbMF07XHJcbm5ldyBzaW1wbGViYXJfMS5kZWZhdWx0KHBhZ2VXcmFwcGVyLCB7IGF1dG9IaWRlOiBmYWxzZSB9KTtcclxuY29uc3QgcGFnZUNvbnRlbnQgPSAkKHBhZ2VXcmFwcGVyKS5maW5kKFwiLmNvbnRlbnQtbWFpblwiKTtcclxucGFnZUNvbnRlbnQubG9hZChgL3BhZ2VzLyR7cGFnZU5hbWV9Lmh0bWxgLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBwb3B1bGF0ZVNldHRpbmdzKCk7XHJcbn0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMucmV0cmlldmVTZXR0aW5nc0tWID0gZXhwb3J0cy5yZXRyaWV2ZVNldHRpbmdzID0gZXhwb3J0cy5zdG9yYWdlR2V0ID0gZXhwb3J0cy5lbGVtZW50Q29sb3IgPSBleHBvcnRzLnNsZWVwID0gdm9pZCAwO1xyXG5jb25zdCB3ZWJleHRlbnNpb25fcG9seWZpbGxfdHNfMSA9IHJlcXVpcmUoXCJ3ZWJleHRlbnNpb24tcG9seWZpbGwtdHNcIik7XHJcbmNvbnN0IGNvbnN0YW50c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzXCIpO1xyXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy85NTEwMjEvd2hhdC1pcy10aGUtamF2YXNjcmlwdC12ZXJzaW9uLW9mLXNsZWVwXHJcbi8vIFBvc3NpYmx5IGhhcyBpc3N1ZXMgcmVzb2x2aW5nIG9uIEZpcmVmb3g/IFN0YWNrT3ZlcmZsb3cgc3VyZSBkb2Vzbid0IHRoaW5rIHNvLi4uXHJcbmZ1bmN0aW9uIHNsZWVwKG1zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbn1cclxuZXhwb3J0cy5zbGVlcCA9IHNsZWVwO1xyXG4vLyBBcHByb3hpbWF0ZXMgdGhlIHJlbmRlcmVkIGJhY2tncm91bmQgY29sb3Igb2YgYSBnaXZlbiBlbGVtZW50IHRvIGEgZ2l2ZW4gc2V0IG9mIGNvbG9ycy5cclxuLy8gQ2hlY2tzIHdoZXRoZXIgdGhlIFwiZGlzdGFuY2VcIiBmcm9tIHRoZSBlbGVtZW50IGNvbG9yIGlzIHRyYW5zcGFyZW50IG9yIGNsb3Nlc3QgdG8gZWl0aGVyIHllbGxvdy93aGl0ZS9ibHVlLlxyXG5jb25zdCBjb2xvcnMgPSBbXHJcbiAgICB7IGNvbG9yOiBcInllbGxvd1wiLCByOiAyNTUsIGc6IDIyNCwgYjogMCB9LFxyXG4gICAgeyBjb2xvcjogXCJibHVlXCIsIHI6IDAsIGc6IDMwLCBiOiAxMTUgfSxcclxuICAgIHsgY29sb3I6IFwiZ3JleVwiLCByOiAxOTcsIGc6IDIwMywgYjogMjEzIH0sXHJcbiAgICB7IGNvbG9yOiBcIndoaXRlXCIsIHI6IDI1NSwgZzogMjU1LCBiOiAyNTUgfSxcclxuXTtcclxuZnVuY3Rpb24gZWxlbWVudENvbG9yKGVsZW1lbnQpIHtcclxuICAgIC8vIEdldCB0aGUgcmVuZGVyZWQgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgZWxlbWVudFxyXG4gICAgY29uc3QgY29sb3JUZXh0ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiYmFja2dyb3VuZC1jb2xvclwiKTtcclxuICAgIGlmIChjb2xvclRleHQuaW5jbHVkZXMoXCJyZ2IoMCwgMCwgMFwiKSkgeyAvLyBlbGVtZW50IGhhcyBubyBjb2xvciA9IHRyYW5zcGFyZW50XHJcbiAgICAgICAgcmV0dXJuIFwidHJhbnNwYXJlbnRcIjtcclxuICAgIH1cclxuICAgIC8vIFBhcnNlIFJHQiB2YWx1ZSBhbmQgdXNlIGZhbmN5IG1hdGhzIHRvIGZpbmQgY2xvc2VzdCBjb2xvclxyXG4gICAgY29uc3QgcGFyc2VkQ29sb3IgPSB7IHI6IDAsIGc6IDAsIGI6IDAgfTtcclxuICAgIGNvbnN0IG1hdGNoZWRDb2xvciA9IGNvbG9yVGV4dC5tYXRjaCgvXnJnYlxccypcXChcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKixcXHMqKFxcZCspXFxzKlxcKSQvaSk7XHJcbiAgICBwYXJzZWRDb2xvci5yID0gTnVtYmVyKG1hdGNoZWRDb2xvclsxXSk7XHJcbiAgICBwYXJzZWRDb2xvci5nID0gTnVtYmVyKG1hdGNoZWRDb2xvclsyXSk7XHJcbiAgICBwYXJzZWRDb2xvci5iID0gTnVtYmVyKG1hdGNoZWRDb2xvclszXSk7XHJcbiAgICBjb25zdCBjbG9zZXN0ID0geyBjb2xvcjogXCJcIiwgZGlzdGFuY2U6IDQ0MiB9OyAvLyBEZWZhdWx0IGRpc3RhbmNlIGp1c3Qgc2xpZ2h0bHkgbGFyZ2VyIHRoYW4gbWF4XHJcbiAgICBmb3IgKGNvbnN0IGNoZWNrQ29sb3Igb2YgY29sb3JzKSB7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coKHBhcnNlZENvbG9yLnIgLSBjaGVja0NvbG9yLnIpLCAyKSArIE1hdGgucG93KChwYXJzZWRDb2xvci5nIC0gY2hlY2tDb2xvci5nKSwgMikgKyAocGFyc2VkQ29sb3IuYiAtIGNoZWNrQ29sb3IuYikpO1xyXG4gICAgICAgIGlmIChkaXN0YW5jZSA8IGNsb3Nlc3QuZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgY2xvc2VzdC5jb2xvciA9IGNoZWNrQ29sb3IuY29sb3I7XHJcbiAgICAgICAgICAgIGNsb3Nlc3QuZGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xvc2VzdC5jb2xvcjtcclxufVxyXG5leHBvcnRzLmVsZW1lbnRDb2xvciA9IGVsZW1lbnRDb2xvcjtcclxuLy8gV3JhcHBlciBmb3IgcmV0cmlldmluZyBmcm9tIHN0b3JhZ2Ugd2l0aCBkZWZhdWx0IHZhbHVlIGlmIHVuZGVmaW5lZFxyXG5mdW5jdGlvbiBzdG9yYWdlR2V0KHN0b3JhZ2VLZXksIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICBjb25zdCBzdG9yYWdlUmVzdWx0ID0geWllbGQgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEuYnJvd3Nlci5zdG9yYWdlLmxvY2FsLmdldChzdG9yYWdlS2V5KTtcclxuICAgICAgICByZXR1cm4gc3RvcmFnZVJlc3VsdFtzdG9yYWdlS2V5XSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gc3RvcmFnZVJlc3VsdFtzdG9yYWdlS2V5XSA6IGRlZmF1bHRWYWx1ZTtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMuc3RvcmFnZUdldCA9IHN0b3JhZ2VHZXQ7XHJcbi8vIFdyYXBwZXIgZm9yIHJldHJpZXZpbmcgc2V0dGluZ3MgZm9yIGdpdmVuIGNhdGVnb3J5IGJ5IHVwZGF0aW5nIGZyb20gU3RvcmFnZSBBUElcclxuZnVuY3Rpb24gcmV0cmlldmVTZXR0aW5ncyhzZXR0aW5nc0NhdGVnb3J5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIC8vIEdldCBkZWZhdWx0IHNldHRpbmdzLCB0aGVuIHVwZGF0ZSBpbmRpdmlkdWFsIHNldHRpbmdzIGZyb20gU3RvcmFnZSBBUElcclxuICAgICAgICBjb25zdCBjYXRlZ29yeVNldHRpbmdzID0gY29uc3RhbnRzXzEuZGVmYXVsdFNldHRpbmdzW3NldHRpbmdzQ2F0ZWdvcnldO1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2V0dGluZyBvZiBjYXRlZ29yeVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBzZXR0aW5ncyB3aXRob3V0IGEgdmFsdWUgKGJ1dHRvbnMgbWFpbmx5KVxyXG4gICAgICAgICAgICBpZiAoc2V0dGluZy52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBSZXBsYWNlIHdpdGggdmFsdWUgZnJvbSBzdG9yYWdlIGlmIG1vZGlmaWVkIGV4aXN0cywgb3RoZXJ3aXNlIGtlZXAgZGVmYXVsdFxyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nS2V5ID0gYHNldHRpbmctJHtzZXR0aW5nc0NhdGVnb3J5fS0ke3NldHRpbmcua2V5fWA7XHJcbiAgICAgICAgICAgIHNldHRpbmcudmFsdWUgPSB5aWVsZCBzdG9yYWdlR2V0KHNldHRpbmdLZXksIHNldHRpbmcudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2F0ZWdvcnlTZXR0aW5ncztcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMucmV0cmlldmVTZXR0aW5ncyA9IHJldHJpZXZlU2V0dGluZ3M7XHJcbi8vIFdyYXBwZXIgZm9yIGZvcm1hdHRpbmcgdGhlIHNldHRpbmdzIGludG8ga2V5LXZhbHVlIGluc3RlYWQgb2YgYXJyYXlcclxuZnVuY3Rpb24gcmV0cmlldmVTZXR0aW5nc0tWKHNldHRpbmdzQ2F0ZWdvcnkpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlTZXR0aW5nc0tWID0ge307XHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlTZXR0aW5ncyA9IHlpZWxkIHJldHJpZXZlU2V0dGluZ3Moc2V0dGluZ3NDYXRlZ29yeSk7IC8vIEdldCBzZXR0aW5ncyBiZWZvcmUgcmVmb3JtYXR0aW5nXHJcbiAgICAgICAgZm9yIChjb25zdCBzZXR0aW5nIG9mIGNhdGVnb3J5U2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIHNldHRpbmdzIHdpdGhvdXQgYSB2YWx1ZSAoYnV0dG9ucyBtYWlubHkpXHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5nLnZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGVnb3J5U2V0dGluZ3NLVltzZXR0aW5nLmtleV0gPSBzZXR0aW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2F0ZWdvcnlTZXR0aW5nc0tWO1xyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0cy5yZXRyaWV2ZVNldHRpbmdzS1YgPSByZXRyaWV2ZVNldHRpbmdzS1Y7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmogPSA0MzY7IiwiLy8gbm8gYmFzZVVSSVxuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDQzNjogMCxcblx0NTMzOiAwLFxuXHQzODY6IDBcbn07XG5cbi8vIG5vIGNodW5rIG9uIGRlbWFuZCBsb2FkaW5nXG5cbi8vIG5vIHByZWZldGNoaW5nXG5cbi8vIG5vIHByZWxvYWRlZFxuXG4vLyBubyBITVJcblxuLy8gbm8gSE1SIG1hbmlmZXN0XG5cbl9fd2VicGFja19yZXF1aXJlX18uTy5qID0gKGNodW5rSWQpID0+IChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApO1xuXG4vLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbnZhciB3ZWJwYWNrSnNvbnBDYWxsYmFjayA9IChwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiwgZGF0YSkgPT4ge1xuXHR2YXIgW2NodW5rSWRzLCBtb3JlTW9kdWxlcywgcnVudGltZV0gPSBkYXRhO1xuXHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcblx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG5cdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDA7XG5cdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSB2YXIgcmVzdWx0ID0gcnVudGltZShfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZHNbaV1dID0gMDtcblx0fVxuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHJlc3VsdCk7XG59XG5cbnZhciBjaHVua0xvYWRpbmdHbG9iYWwgPSBzZWxmW1wid2VicGFja0NodW5rZXh0ZW5zaW9uXCJdID0gc2VsZltcIndlYnBhY2tDaHVua2V4dGVuc2lvblwiXSB8fCBbXTtcbmNodW5rTG9hZGluZ0dsb2JhbC5mb3JFYWNoKHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgMCkpO1xuY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIGNodW5rTG9hZGluZ0dsb2JhbC5wdXNoLmJpbmQoY2h1bmtMb2FkaW5nR2xvYmFsKSk7IiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBkZXBlbmRzIG9uIG90aGVyIGxvYWRlZCBjaHVua3MgYW5kIGV4ZWN1dGlvbiBuZWVkIHRvIGJlIGRlbGF5ZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXy5PKHVuZGVmaW5lZCwgWzczNl0sICgpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fKDczNSkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=
(()=>{"use strict";var e,t={8681:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettings=t.changelogs=void 0,t.changelogs=[{version:"b0.2.1",bulletpoints:["Fixed empty blacklist disqualifying all saved items",'Replaced icon which said "AQU" instead of "AGU" (original extension name was AutoQueueUtilities)',"<b>TODO:</b> Fix notification sound not playing if user hasn't interacted with document, maybe play from background instead?"]},{version:"b0.2.0",bulletpoints:["Added About tab showing some information and usage instructions","Changed extension icon to something somewhat more presentable","Removed placeholder logging tab pending further development","Added blacklisted keywords functionality to script (still no test buttons)","Other minor edits to extension popup styling, nothing too major"]},{version:"b0.1.0",bulletpoints:["Added changelog (this tab here) and placeholder logging tab for testing","Changed extension script loading to work somewhat more dynamically"]},{version:"b0.0.1",bulletpoints:['Ported most functionality from Tampermonkey script located <a href="https://github.com/albert-sun/tamper-scripts/">here</a>',"<b>Features not yet implemented</b>: blacklisted keywords and buttons for testing wtihin settings (removed until settings structure finalized)","<b>Improvements from Tampermonkey script</b>: Instant settings propogation and no refresh required for cart addition or removal"]}],t.defaultSettings={bestbuy:[{key:"automaticQueueFix",description:"Attempt to automatically fix broken queues",type:"slideSwitch",value:!0},{key:"autoClickWhitelisted",description:"Automatically click whitelisted ATC buttons",type:"slideSwitch",value:!0},{key:"stopClickCartOccupied",description:"Stop automatic clicking when cart occupied",type:"slideSwitch",value:!0},{key:"globalPollingInterval",description:"Global content script polling interval",type:"number",extraText:"ms",value:100},{key:"successiveClickTimeout",description:"Timeout between clicking unique buttons",type:"number",extraText:"ms",value:2500},{key:"notificationSoundURL",description:"Notification sound URL (mp3 hotlink)",type:"text",value:"https://github.com/albert-sun/tamper-scripts/blob/main/resources/notification.mp3?raw=true"},{key:"whitelistedKeywords",description:"Whitelisted keywords (comma-separated)",type:"text",value:"3060,3060ti,3060 ti,3070,3070ti,3070 ti,3080,3080ti,3080 ti,3090"},{key:"blacklistedKeywords",description:"Blacklisted keywords (comma-separated)",type:"text",value:""}]}},1209:function(e,t,o){var i=this&&this.__awaiter||function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveSettingsKV=t.retrieveSettings=t.storageGet=t.elementColor=t.sleep=void 0;const n=o(9416),r=o(8681);t.sleep=function(e){return new Promise((t=>setTimeout(t,e)))};const s=[{color:"yellow",r:255,g:224,b:0},{color:"blue",r:0,g:30,b:115},{color:"grey",r:197,g:203,b:213},{color:"white",r:255,g:255,b:255}];function a(e,t){return i(this,void 0,void 0,(function*(){const o=yield n.browser.storage.local.get(e);return void 0!==o[e]?o[e]:t}))}function l(e){return i(this,void 0,void 0,(function*(){const t=r.defaultSettings[e];for(const o of t){if(void 0===o.value)continue;const t=`setting-${e}-${o.key}`;o.value=yield a(t,o.value)}return t}))}t.elementColor=function(e){const t=getComputedStyle(e,null).getPropertyValue("background-color");if(t.includes("rgb(0, 0, 0"))return"transparent";const o={r:0,g:0,b:0},i=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);o.r=Number(i[1]),o.g=Number(i[2]),o.b=Number(i[3]);const n={color:"",distance:442};for(const e of s){const t=Math.sqrt(Math.pow(o.r-e.r,2)+Math.pow(o.g-e.g,2)+(o.b-e.b));t<n.distance&&(n.color=e.color,n.distance=t)}return n.color},t.storageGet=a,t.retrieveSettings=l,t.retrieveSettingsKV=function(e){return i(this,void 0,void 0,(function*(){const t={},o=yield l(e);for(const e of o)void 0!==e.value&&(t[e.key]=e);return t}))}}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,o,n,r)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,n,r]=e[c],a=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(i.O).every((e=>i.O[e](o[l])))?o.splice(l--,1):(a=!1,r<s&&(s=r));a&&(e.splice(c--,1),t=n())}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=386,(()=>{var e={386:0,533:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[s,a,l]=o,c=0;for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var u=l(i);for(t&&t(o);c<s.length;c++)r=s[c],i.o(e,r)&&e[r]&&e[r][0](),e[s[c]]=0;return i.O(u)},o=self.webpackChunkextension=self.webpackChunkextension||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=i.O(void 0,[736],(()=>i(1209)));n=i.O(n)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9leHRlbnNpb24vLi9zb3VyY2UvY29uc3RhbnRzLnRzIiwid2VicGFjazovL2V4dGVuc2lvbi8uL3NvdXJjZS91dGlsaXRpZXMudHMiLCJ3ZWJwYWNrOi8vZXh0ZW5zaW9uL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvcnVudGltZUlkIiwid2VicGFjazovL2V4dGVuc2lvbi93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9leHRlbnNpb24vd2VicGFjay9zdGFydHVwIl0sIm5hbWVzIjpbImRlZmVycmVkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJkZWZhdWx0U2V0dGluZ3MiLCJjaGFuZ2Vsb2dzIiwia2V5IiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiZXh0cmFUZXh0IiwiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwicmV0cmlldmVTZXR0aW5nc0tWIiwicmV0cmlldmVTZXR0aW5ncyIsInN0b3JhZ2VHZXQiLCJlbGVtZW50Q29sb3IiLCJzbGVlcCIsIndlYmV4dGVuc2lvbl9wb2x5ZmlsbF90c18xIiwiY29uc3RhbnRzXzEiLCJtcyIsInNldFRpbWVvdXQiLCJjb2xvcnMiLCJjb2xvciIsInIiLCJnIiwiYiIsInN0b3JhZ2VLZXkiLCJkZWZhdWx0VmFsdWUiLCJzdG9yYWdlUmVzdWx0IiwiYnJvd3NlciIsInN0b3JhZ2UiLCJsb2NhbCIsImdldCIsInVuZGVmaW5lZCIsInNldHRpbmdzQ2F0ZWdvcnkiLCJjYXRlZ29yeVNldHRpbmdzIiwic2V0dGluZyIsInNldHRpbmdLZXkiLCJlbGVtZW50IiwiY29sb3JUZXh0IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJpbmNsdWRlcyIsInBhcnNlZENvbG9yIiwibWF0Y2hlZENvbG9yIiwibWF0Y2giLCJOdW1iZXIiLCJjbG9zZXN0IiwiZGlzdGFuY2UiLCJjaGVja0NvbG9yIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJjYXRlZ29yeVNldHRpbmdzS1YiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJPIiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiSW5maW5pdHkiLCJpIiwibGVuZ3RoIiwiaiIsImtleXMiLCJldmVyeSIsInNwbGljZSIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImVudW1lcmFibGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImluc3RhbGxlZENodW5rcyIsImNodW5rSWQiLCJ3ZWJwYWNrSnNvbnBDYWxsYmFjayIsInBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uIiwiZGF0YSIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJmb3JFYWNoIiwiYmluZCIsInB1c2giLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sIm1hcHBpbmdzIjoidUJBQUlBLEUsZ0JDQ0pDLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRRSxnQkFBa0JGLEVBQVFHLGdCQUFhLEVBRS9DSCxFQUFRRyxXQUFhLENBQ2pCLENBQ0ksUUFBVyxTQUNYLGFBQWdCLENBQ1osc0RBQ0EsbUdBQ0EsaUlBRUwsQ0FDQyxRQUFXLFNBQ1gsYUFBZ0IsQ0FDWixrRUFDQSxnRUFDQSw4REFDQSw2RUFDQSxvRUFFTCxDQUNDLFFBQVcsU0FDWCxhQUFnQixDQUNaLDBFQUNBLHVFQUVMLENBQ0MsUUFBVyxTQUNYLGFBQWdCLENBQ1osOEhBQ0EsaUpBQ0EscUlBS1pILEVBQVFFLGdCQUFrQixDQUN0QixRQUFXLENBQ1AsQ0FBRUUsSUFBSyxvQkFBcUJDLFlBQWEsNkNBQThDQyxLQUFNLGNBQWVMLE9BQU8sR0FDbkgsQ0FBRUcsSUFBSyx1QkFBd0JDLFlBQWEsOENBQStDQyxLQUFNLGNBQWVMLE9BQU8sR0FDdkgsQ0FBRUcsSUFBSyx3QkFBeUJDLFlBQWEsNkNBQThDQyxLQUFNLGNBQWVMLE9BQU8sR0FDdkgsQ0FBRUcsSUFBSyx3QkFBeUJDLFlBQWEseUNBQTBDQyxLQUFNLFNBQVVDLFVBQVcsS0FBTU4sTUFBTyxLQUMvSCxDQUFFRyxJQUFLLHlCQUEwQkMsWUFBYSwwQ0FBMkNDLEtBQU0sU0FBVUMsVUFBVyxLQUFNTixNQUFPLE1BQ2pJLENBQUVHLElBQUssdUJBQXdCQyxZQUFhLHVDQUF3Q0MsS0FBTSxPQUFRTCxNQUFPLDhGQUN6RyxDQUFFRyxJQUFLLHNCQUF1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cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkZWZlcnJlZCA9IFtdO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5PID0gKHJlc3VsdCwgY2h1bmtJZHMsIGZuLCBwcmlvcml0eSkgPT4ge1xuXHRpZihjaHVua0lkcykge1xuXHRcdHByaW9yaXR5ID0gcHJpb3JpdHkgfHwgMDtcblx0XHRmb3IodmFyIGkgPSBkZWZlcnJlZC5sZW5ndGg7IGkgPiAwICYmIGRlZmVycmVkW2kgLSAxXVsyXSA+IHByaW9yaXR5OyBpLS0pIGRlZmVycmVkW2ldID0gZGVmZXJyZWRbaSAtIDFdO1xuXHRcdGRlZmVycmVkW2ldID0gW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldO1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgbm90RnVsZmlsbGVkID0gSW5maW5pdHk7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWQubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgW2NodW5rSWRzLCBmbiwgcHJpb3JpdHldID0gZGVmZXJyZWRbaV07XG5cdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG5cdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjaHVua0lkcy5sZW5ndGg7IGorKykge1xuXHRcdFx0aWYgKChwcmlvcml0eSAmIDEgPT09IDAgfHwgbm90RnVsZmlsbGVkID49IHByaW9yaXR5KSAmJiBPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLk8pLmV2ZXJ5KChrZXkpID0+IChfX3dlYnBhY2tfcmVxdWlyZV9fLk9ba2V5XShjaHVua0lkc1tqXSkpKSkge1xuXHRcdFx0XHRjaHVua0lkcy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZ1bGZpbGxlZCA9IGZhbHNlO1xuXHRcdFx0XHRpZihwcmlvcml0eSA8IG5vdEZ1bGZpbGxlZCkgbm90RnVsZmlsbGVkID0gcHJpb3JpdHk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKGZ1bGZpbGxlZCkge1xuXHRcdFx0ZGVmZXJyZWQuc3BsaWNlKGktLSwgMSlcblx0XHRcdHJlc3VsdCA9IGZuKCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59OyIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZGVmYXVsdFNldHRpbmdzID0gZXhwb3J0cy5jaGFuZ2Vsb2dzID0gdm9pZCAwO1xyXG4vLyBDaGFuZ2Vsb2cgZnJvbSBwcmV2aW91cyB2ZXJzaW9uc1xyXG5leHBvcnRzLmNoYW5nZWxvZ3MgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMi4xXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgRml4ZWQgZW1wdHkgYmxhY2tsaXN0IGRpc3F1YWxpZnlpbmcgYWxsIHNhdmVkIGl0ZW1zYCxcclxuICAgICAgICAgICAgYFJlcGxhY2VkIGljb24gd2hpY2ggc2FpZCBcIkFRVVwiIGluc3RlYWQgb2YgXCJBR1VcIiAob3JpZ2luYWwgZXh0ZW5zaW9uIG5hbWUgd2FzIEF1dG9RdWV1ZVV0aWxpdGllcylgLFxyXG4gICAgICAgICAgICBgPGI+VE9ETzo8L2I+IEZpeCBub3RpZmljYXRpb24gc291bmQgbm90IHBsYXlpbmcgaWYgdXNlciBoYXNuJ3QgaW50ZXJhY3RlZCB3aXRoIGRvY3VtZW50LCBtYXliZSBwbGF5IGZyb20gYmFja2dyb3VuZCBpbnN0ZWFkP2BcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMi4wXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgQWRkZWQgQWJvdXQgdGFiIHNob3dpbmcgc29tZSBpbmZvcm1hdGlvbiBhbmQgdXNhZ2UgaW5zdHJ1Y3Rpb25zYCxcclxuICAgICAgICAgICAgYENoYW5nZWQgZXh0ZW5zaW9uIGljb24gdG8gc29tZXRoaW5nIHNvbWV3aGF0IG1vcmUgcHJlc2VudGFibGVgLFxyXG4gICAgICAgICAgICBgUmVtb3ZlZCBwbGFjZWhvbGRlciBsb2dnaW5nIHRhYiBwZW5kaW5nIGZ1cnRoZXIgZGV2ZWxvcG1lbnRgLFxyXG4gICAgICAgICAgICBgQWRkZWQgYmxhY2tsaXN0ZWQga2V5d29yZHMgZnVuY3Rpb25hbGl0eSB0byBzY3JpcHQgKHN0aWxsIG5vIHRlc3QgYnV0dG9ucylgLFxyXG4gICAgICAgICAgICBgT3RoZXIgbWlub3IgZWRpdHMgdG8gZXh0ZW5zaW9uIHBvcHVwIHN0eWxpbmcsIG5vdGhpbmcgdG9vIG1ham9yYCxcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMS4wXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgQWRkZWQgY2hhbmdlbG9nICh0aGlzIHRhYiBoZXJlKSBhbmQgcGxhY2Vob2xkZXIgbG9nZ2luZyB0YWIgZm9yIHRlc3RpbmdgLFxyXG4gICAgICAgICAgICBgQ2hhbmdlZCBleHRlbnNpb24gc2NyaXB0IGxvYWRpbmcgdG8gd29yayBzb21ld2hhdCBtb3JlIGR5bmFtaWNhbGx5YCxcclxuICAgICAgICBdXHJcbiAgICB9LCB7XHJcbiAgICAgICAgXCJ2ZXJzaW9uXCI6IFwiYjAuMC4xXCIsXHJcbiAgICAgICAgXCJidWxsZXRwb2ludHNcIjogW1xyXG4gICAgICAgICAgICBgUG9ydGVkIG1vc3QgZnVuY3Rpb25hbGl0eSBmcm9tIFRhbXBlcm1vbmtleSBzY3JpcHQgbG9jYXRlZCA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2FsYmVydC1zdW4vdGFtcGVyLXNjcmlwdHMvXCI+aGVyZTwvYT5gLFxyXG4gICAgICAgICAgICBgPGI+RmVhdHVyZXMgbm90IHlldCBpbXBsZW1lbnRlZDwvYj46IGJsYWNrbGlzdGVkIGtleXdvcmRzIGFuZCBidXR0b25zIGZvciB0ZXN0aW5nIHd0aWhpbiBzZXR0aW5ncyAocmVtb3ZlZCB1bnRpbCBzZXR0aW5ncyBzdHJ1Y3R1cmUgZmluYWxpemVkKWAsXHJcbiAgICAgICAgICAgIGA8Yj5JbXByb3ZlbWVudHMgZnJvbSBUYW1wZXJtb25rZXkgc2NyaXB0PC9iPjogSW5zdGFudCBzZXR0aW5ncyBwcm9wb2dhdGlvbiBhbmQgbm8gcmVmcmVzaCByZXF1aXJlZCBmb3IgY2FydCBhZGRpdGlvbiBvciByZW1vdmFsYFxyXG4gICAgICAgIF1cclxuICAgIH1cclxuXTtcclxuLy8gU2V0dGluZ3MgYWNyb3NzIGFsbCBjYXRlZ29yaWVzIGZvciBleHRlbnNpb25cclxuZXhwb3J0cy5kZWZhdWx0U2V0dGluZ3MgPSB7XHJcbiAgICBcImJlc3RidXlcIjogW1xyXG4gICAgICAgIHsga2V5OiBcImF1dG9tYXRpY1F1ZXVlRml4XCIsIGRlc2NyaXB0aW9uOiBcIkF0dGVtcHQgdG8gYXV0b21hdGljYWxseSBmaXggYnJva2VuIHF1ZXVlc1wiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwiYXV0b0NsaWNrV2hpdGVsaXN0ZWRcIiwgZGVzY3JpcHRpb246IFwiQXV0b21hdGljYWxseSBjbGljayB3aGl0ZWxpc3RlZCBBVEMgYnV0dG9uc1wiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwic3RvcENsaWNrQ2FydE9jY3VwaWVkXCIsIGRlc2NyaXB0aW9uOiBcIlN0b3AgYXV0b21hdGljIGNsaWNraW5nIHdoZW4gY2FydCBvY2N1cGllZFwiLCB0eXBlOiBcInNsaWRlU3dpdGNoXCIsIHZhbHVlOiB0cnVlIH0sXHJcbiAgICAgICAgeyBrZXk6IFwiZ2xvYmFsUG9sbGluZ0ludGVydmFsXCIsIGRlc2NyaXB0aW9uOiBcIkdsb2JhbCBjb250ZW50IHNjcmlwdCBwb2xsaW5nIGludGVydmFsXCIsIHR5cGU6IFwibnVtYmVyXCIsIGV4dHJhVGV4dDogXCJtc1wiLCB2YWx1ZTogMTAwIH0sXHJcbiAgICAgICAgeyBrZXk6IFwic3VjY2Vzc2l2ZUNsaWNrVGltZW91dFwiLCBkZXNjcmlwdGlvbjogXCJUaW1lb3V0IGJldHdlZW4gY2xpY2tpbmcgdW5pcXVlIGJ1dHRvbnNcIiwgdHlwZTogXCJudW1iZXJcIiwgZXh0cmFUZXh0OiBcIm1zXCIsIHZhbHVlOiAyNTAwIH0sXHJcbiAgICAgICAgeyBrZXk6IFwibm90aWZpY2F0aW9uU291bmRVUkxcIiwgZGVzY3JpcHRpb246IFwiTm90aWZpY2F0aW9uIHNvdW5kIFVSTCAobXAzIGhvdGxpbmspXCIsIHR5cGU6IFwidGV4dFwiLCB2YWx1ZTogXCJodHRwczovL2dpdGh1Yi5jb20vYWxiZXJ0LXN1bi90YW1wZXItc2NyaXB0cy9ibG9iL21haW4vcmVzb3VyY2VzL25vdGlmaWNhdGlvbi5tcDM/cmF3PXRydWVcIiB9LFxyXG4gICAgICAgIHsga2V5OiBcIndoaXRlbGlzdGVkS2V5d29yZHNcIiwgZGVzY3JpcHRpb246IFwiV2hpdGVsaXN0ZWQga2V5d29yZHMgKGNvbW1hLXNlcGFyYXRlZClcIiwgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiBcIjMwNjAsMzA2MHRpLDMwNjAgdGksMzA3MCwzMDcwdGksMzA3MCB0aSwzMDgwLDMwODB0aSwzMDgwIHRpLDMwOTBcIiB9LFxyXG4gICAgICAgIHsga2V5OiBcImJsYWNrbGlzdGVkS2V5d29yZHNcIiwgZGVzY3JpcHRpb246IFwiQmxhY2tsaXN0ZWQga2V5d29yZHMgKGNvbW1hLXNlcGFyYXRlZClcIiwgdHlwZTogXCJ0ZXh0XCIsIHZhbHVlOiBcIlwiIH0sXHJcbiAgICAgICAgLy8geyBrZXk6IFwidGVzdE5vdGlmaWNhdGlvblNvdW5kXCIsIGRlc2NyaXB0aW9uOiBcIlBsYXkgY3VycmVudCBub3RpZmljYXRpb24gc291bmRcIiwgdHlwZTogXCJidXR0b25cIiwgaW5zdHJ1Y3Rpb246IFwidGVzdE5vdGlmaWNhdGlvblNvdW5kXCIgfSxcclxuICAgIF1cclxufTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnJldHJpZXZlU2V0dGluZ3NLViA9IGV4cG9ydHMucmV0cmlldmVTZXR0aW5ncyA9IGV4cG9ydHMuc3RvcmFnZUdldCA9IGV4cG9ydHMuZWxlbWVudENvbG9yID0gZXhwb3J0cy5zbGVlcCA9IHZvaWQgMDtcclxuY29uc3Qgd2ViZXh0ZW5zaW9uX3BvbHlmaWxsX3RzXzEgPSByZXF1aXJlKFwid2ViZXh0ZW5zaW9uLXBvbHlmaWxsLXRzXCIpO1xyXG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTUxMDIxL3doYXQtaXMtdGhlLWphdmFzY3JpcHQtdmVyc2lvbi1vZi1zbGVlcFxyXG4vLyBQb3NzaWJseSBoYXMgaXNzdWVzIHJlc29sdmluZyBvbiBGaXJlZm94PyBTdGFja092ZXJmbG93IHN1cmUgZG9lc24ndCB0aGluayBzby4uLlxyXG5mdW5jdGlvbiBzbGVlcChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xyXG59XHJcbmV4cG9ydHMuc2xlZXAgPSBzbGVlcDtcclxuLy8gQXBwcm94aW1hdGVzIHRoZSByZW5kZXJlZCBiYWNrZ3JvdW5kIGNvbG9yIG9mIGEgZ2l2ZW4gZWxlbWVudCB0byBhIGdpdmVuIHNldCBvZiBjb2xvcnMuXHJcbi8vIENoZWNrcyB3aGV0aGVyIHRoZSBcImRpc3RhbmNlXCIgZnJvbSB0aGUgZWxlbWVudCBjb2xvciBpcyB0cmFuc3BhcmVudCBvciBjbG9zZXN0IHRvIGVpdGhlciB5ZWxsb3cvd2hpdGUvYmx1ZS5cclxuY29uc3QgY29sb3JzID0gW1xyXG4gICAgeyBjb2xvcjogXCJ5ZWxsb3dcIiwgcjogMjU1LCBnOiAyMjQsIGI6IDAgfSxcclxuICAgIHsgY29sb3I6IFwiYmx1ZVwiLCByOiAwLCBnOiAzMCwgYjogMTE1IH0sXHJcbiAgICB7IGNvbG9yOiBcImdyZXlcIiwgcjogMTk3LCBnOiAyMDMsIGI6IDIxMyB9LFxyXG4gICAgeyBjb2xvcjogXCJ3aGl0ZVwiLCByOiAyNTUsIGc6IDI1NSwgYjogMjU1IH0sXHJcbl07XHJcbmZ1bmN0aW9uIGVsZW1lbnRDb2xvcihlbGVtZW50KSB7XHJcbiAgICAvLyBHZXQgdGhlIHJlbmRlcmVkIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIGVsZW1lbnRcclxuICAgIGNvbnN0IGNvbG9yVGV4dCA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShcImJhY2tncm91bmQtY29sb3JcIik7XHJcbiAgICBpZiAoY29sb3JUZXh0LmluY2x1ZGVzKFwicmdiKDAsIDAsIDBcIikpIHsgLy8gZWxlbWVudCBoYXMgbm8gY29sb3IgPSB0cmFuc3BhcmVudFxyXG4gICAgICAgIHJldHVybiBcInRyYW5zcGFyZW50XCI7XHJcbiAgICB9XHJcbiAgICAvLyBQYXJzZSBSR0IgdmFsdWUgYW5kIHVzZSBmYW5jeSBtYXRocyB0byBmaW5kIGNsb3Nlc3QgY29sb3JcclxuICAgIGNvbnN0IHBhcnNlZENvbG9yID0geyByOiAwLCBnOiAwLCBiOiAwIH07XHJcbiAgICBjb25zdCBtYXRjaGVkQ29sb3IgPSBjb2xvclRleHQubWF0Y2goL15yZ2JcXHMqXFwoXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccyosXFxzKihcXGQrKVxccypcXCkkL2kpO1xyXG4gICAgcGFyc2VkQ29sb3IuciA9IE51bWJlcihtYXRjaGVkQ29sb3JbMV0pO1xyXG4gICAgcGFyc2VkQ29sb3IuZyA9IE51bWJlcihtYXRjaGVkQ29sb3JbMl0pO1xyXG4gICAgcGFyc2VkQ29sb3IuYiA9IE51bWJlcihtYXRjaGVkQ29sb3JbM10pO1xyXG4gICAgY29uc3QgY2xvc2VzdCA9IHsgY29sb3I6IFwiXCIsIGRpc3RhbmNlOiA0NDIgfTsgLy8gRGVmYXVsdCBkaXN0YW5jZSBqdXN0IHNsaWdodGx5IGxhcmdlciB0aGFuIG1heFxyXG4gICAgZm9yIChjb25zdCBjaGVja0NvbG9yIG9mIGNvbG9ycykge1xyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KChwYXJzZWRDb2xvci5yIC0gY2hlY2tDb2xvci5yKSwgMikgKyBNYXRoLnBvdygocGFyc2VkQ29sb3IuZyAtIGNoZWNrQ29sb3IuZyksIDIpICsgKHBhcnNlZENvbG9yLmIgLSBjaGVja0NvbG9yLmIpKTtcclxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBjbG9zZXN0LmRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNsb3Nlc3QuY29sb3IgPSBjaGVja0NvbG9yLmNvbG9yO1xyXG4gICAgICAgICAgICBjbG9zZXN0LmRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsb3Nlc3QuY29sb3I7XHJcbn1cclxuZXhwb3J0cy5lbGVtZW50Q29sb3IgPSBlbGVtZW50Q29sb3I7XHJcbi8vIFdyYXBwZXIgZm9yIHJldHJpZXZpbmcgZnJvbSBzdG9yYWdlIHdpdGggZGVmYXVsdCB2YWx1ZSBpZiB1bmRlZmluZWRcclxuZnVuY3Rpb24gc3RvcmFnZUdldChzdG9yYWdlS2V5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmFnZVJlc3VsdCA9IHlpZWxkIHdlYmV4dGVuc2lvbl9wb2x5ZmlsbF90c18xLmJyb3dzZXIuc3RvcmFnZS5sb2NhbC5nZXQoc3RvcmFnZUtleSk7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JhZ2VSZXN1bHRbc3RvcmFnZUtleV0gIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHN0b3JhZ2VSZXN1bHRbc3RvcmFnZUtleV0gOiBkZWZhdWx0VmFsdWU7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnRzLnN0b3JhZ2VHZXQgPSBzdG9yYWdlR2V0O1xyXG4vLyBXcmFwcGVyIGZvciByZXRyaWV2aW5nIHNldHRpbmdzIGZvciBnaXZlbiBjYXRlZ29yeSBieSB1cGRhdGluZyBmcm9tIFN0b3JhZ2UgQVBJXHJcbmZ1bmN0aW9uIHJldHJpZXZlU2V0dGluZ3Moc2V0dGluZ3NDYXRlZ29yeSkge1xyXG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAvLyBHZXQgZGVmYXVsdCBzZXR0aW5ncywgdGhlbiB1cGRhdGUgaW5kaXZpZHVhbCBzZXR0aW5ncyBmcm9tIFN0b3JhZ2UgQVBJXHJcbiAgICAgICAgY29uc3QgY2F0ZWdvcnlTZXR0aW5ncyA9IGNvbnN0YW50c18xLmRlZmF1bHRTZXR0aW5nc1tzZXR0aW5nc0NhdGVnb3J5XTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNldHRpbmcgb2YgY2F0ZWdvcnlTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAvLyBJZ25vcmUgc2V0dGluZ3Mgd2l0aG91dCBhIHZhbHVlIChidXR0b25zIG1haW5seSlcclxuICAgICAgICAgICAgaWYgKHNldHRpbmcudmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUmVwbGFjZSB3aXRoIHZhbHVlIGZyb20gc3RvcmFnZSBpZiBtb2RpZmllZCBleGlzdHMsIG90aGVyd2lzZSBrZWVwIGRlZmF1bHRcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ0tleSA9IGBzZXR0aW5nLSR7c2V0dGluZ3NDYXRlZ29yeX0tJHtzZXR0aW5nLmtleX1gO1xyXG4gICAgICAgICAgICBzZXR0aW5nLnZhbHVlID0geWllbGQgc3RvcmFnZUdldChzZXR0aW5nS2V5LCBzZXR0aW5nLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5U2V0dGluZ3M7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnRzLnJldHJpZXZlU2V0dGluZ3MgPSByZXRyaWV2ZVNldHRpbmdzO1xyXG4vLyBXcmFwcGVyIGZvciBmb3JtYXR0aW5nIHRoZSBzZXR0aW5ncyBpbnRvIGtleS12YWx1ZSBpbnN0ZWFkIG9mIGFycmF5XHJcbmZ1bmN0aW9uIHJldHJpZXZlU2V0dGluZ3NLVihzZXR0aW5nc0NhdGVnb3J5KSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5U2V0dGluZ3NLViA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5U2V0dGluZ3MgPSB5aWVsZCByZXRyaWV2ZVNldHRpbmdzKHNldHRpbmdzQ2F0ZWdvcnkpOyAvLyBHZXQgc2V0dGluZ3MgYmVmb3JlIHJlZm9ybWF0dGluZ1xyXG4gICAgICAgIGZvciAoY29uc3Qgc2V0dGluZyBvZiBjYXRlZ29yeVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBzZXR0aW5ncyB3aXRob3V0IGEgdmFsdWUgKGJ1dHRvbnMgbWFpbmx5KVxyXG4gICAgICAgICAgICBpZiAoc2V0dGluZy52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRlZ29yeVNldHRpbmdzS1Zbc2V0dGluZy5rZXldID0gc2V0dGluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhdGVnb3J5U2V0dGluZ3NLVjtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMucmV0cmlldmVTZXR0aW5nc0tWID0gcmV0cmlldmVTZXR0aW5nc0tWO1xyXG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5qID0gMzg2OyIsIi8vIG5vIGJhc2VVUklcblxuLy8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuLy8gW3Jlc29sdmUsIHJlamVjdCwgUHJvbWlzZV0gPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG52YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuXHQzODY6IDAsXG5cdDUzMzogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5PLmogPSAoY2h1bmtJZCkgPT4gKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9PT0gMCk7XG5cbi8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xudmFyIHdlYnBhY2tKc29ucENhbGxiYWNrID0gKHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uLCBkYXRhKSA9PiB7XG5cdHZhciBbY2h1bmtJZHMsIG1vcmVNb2R1bGVzLCBydW50aW1lXSA9IGRhdGE7XG5cdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuXHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcblx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMDtcblx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0fVxuXHR9XG5cdGlmKHJ1bnRpbWUpIHZhciByZXN1bHQgPSBydW50aW1lKF9fd2VicGFja19yZXF1aXJlX18pO1xuXHRpZihwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbikgcGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24oZGF0YSk7XG5cdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKCk7XG5cdFx0fVxuXHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkc1tpXV0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmtleHRlbnNpb25cIl0gPSBzZWxmW1wid2VicGFja0NodW5rZXh0ZW5zaW9uXCJdIHx8IFtdO1xuY2h1bmtMb2FkaW5nR2xvYmFsLmZvckVhY2god2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCAwKSk7XG5jaHVua0xvYWRpbmdHbG9iYWwucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrLmJpbmQobnVsbCwgY2h1bmtMb2FkaW5nR2xvYmFsLnB1c2guYmluZChjaHVua0xvYWRpbmdHbG9iYWwpKTsiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGRlcGVuZHMgb24gb3RoZXIgbG9hZGVkIGNodW5rcyBhbmQgZXhlY3V0aW9uIG5lZWQgdG8gYmUgZGVsYXllZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8odW5kZWZpbmVkLCBbNzM2XSwgKCkgPT4gKF9fd2VicGFja19yZXF1aXJlX18oMTIwOSkpKVxuX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyhfX3dlYnBhY2tfZXhwb3J0c19fKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=